<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ふみのて (dockerについての文書)</title><link>https://32imuf.com/</link><description></description><atom:link href="https://32imuf.com/tags/docker.xml" rel="self" type="application/rss+xml"></atom:link><language>ja</language><copyright>Contents © 2019 &lt;a href="mailto:fumi232323fumi2016@gmail.com"&gt;fumi23&lt;/a&gt; </copyright><lastBuildDate>Mon, 10 Jun 2019 12:42:51 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Docker Compose で Django/PostgreSQL/MySQL 環境をつくろう</title><link>https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id2" id="id11"&gt;リファレンス・参考サイト書籍&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id3" id="id12"&gt;つくりかた&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id4" id="id13"&gt;構成&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id5" id="id14"&gt;設定ファイル&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id6" id="id15"&gt;起動&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id7" id="id16"&gt;つかいかた&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#app" id="id17"&gt;app コンテナ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#mysql-postgresql" id="id18"&gt;MySQL, PostgreSQL コンテナ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id8" id="id19"&gt;感想&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id9" id="id20"&gt;その他&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id10" id="id21"&gt;Python 公式イメージのルーツ&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#docker-hub" id="id22"&gt;Docker Hub&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id11"&gt;リファレンス・参考サイト書籍&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;ありがとうございました&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Python プロフェッショナルプログラミング第３版 &amp;gt; 01-01 Python のセットアップ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="https://hub.docker.com/_/ubuntu"&gt;ubuntu Docker Official Images&lt;/a&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;en_US.utf8&lt;/tt&gt; を &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;apt-get&lt;/span&gt;&lt;/tt&gt; するくだりを参考にした&lt;ul&gt;
&lt;li&gt;Ubuntu イメージにはデフォルトで &lt;tt class="docutils literal"&gt;C&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;C.UTF-8&lt;/span&gt;&lt;/tt&gt;, and &lt;tt class="docutils literal"&gt;POSIX&lt;/tt&gt; locales が含まれている、これで UTF-8 locale を使うほとんどのひとには十分なはずだけれども、&lt;/li&gt;
&lt;li&gt;足りない場合は、&lt;tt class="docutils literal"&gt;locales&lt;/tt&gt; package からインストールしてね&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/"&gt;Best practices for writing Dockerfiles&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;RUN&lt;/tt&gt; で &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;apt-get&lt;/span&gt;&lt;/tt&gt; するときはこうすると良さそう&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;apt-get&lt;/span&gt; upgrade&lt;/tt&gt; , &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;dist-upgrade&lt;/span&gt;&lt;/tt&gt; するのは避けよう&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;apt-get&lt;/span&gt; update &amp;amp;&amp;amp; &lt;span class="pre"&gt;apt-get&lt;/span&gt; install &lt;span class="pre"&gt;-y&lt;/span&gt;&lt;/tt&gt; はセットでやろう&lt;ul&gt;
&lt;li&gt;こうすると、 latest package versions が install できる&lt;/li&gt;
&lt;li&gt;このテクニックは、 &lt;tt class="docutils literal"&gt;cache busting&lt;/tt&gt; として知られているらしい&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;packages はアルファベット順に並べる&lt;ul&gt;
&lt;li&gt;重複に気づけるし、後から足したり減らしたりするのが容易になるから&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;最後に &lt;tt class="docutils literal"&gt;rm &lt;span class="pre"&gt;-rf&lt;/span&gt; /var/lib/apt/lists/*&lt;/tt&gt; して apt キャッシュを clean up すると、 image size を減らせる&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;良い見本&lt;/p&gt;
&lt;pre class="code docker"&gt;&lt;a name="rest_code_590568c537c8423da668051bde0aad83-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;RUN&lt;/span&gt; apt-get update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-2"&gt;&lt;/a&gt;    aufs-tools &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-3"&gt;&lt;/a&gt;    automake &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-4"&gt;&lt;/a&gt;    build-essential &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-5"&gt;&lt;/a&gt;    curl &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-6"&gt;&lt;/a&gt;    dpkg-sig &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-7"&gt;&lt;/a&gt;    libcap-dev &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-8"&gt;&lt;/a&gt;    libsqlite3-dev &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-9"&gt;&lt;/a&gt;    mercurial &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-10"&gt;&lt;/a&gt;    reprepro &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-11"&gt;&lt;/a&gt;    ruby1.9.1 &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-12"&gt;&lt;/a&gt;    ruby1.9.1-dev &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-13"&gt;&lt;/a&gt;    &lt;span class="nv"&gt;s3cmd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.1.* &lt;span class="se"&gt;\&lt;/span&gt;
&lt;a name="rest_code_590568c537c8423da668051bde0aad83-14"&gt;&lt;/a&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf /var/lib/apt/lists/*
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="https://docs.docker.com/develop/dev-best-practices/"&gt;Docker development best practices&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;RUN&lt;/tt&gt; で &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;apt-get&lt;/span&gt;&lt;/tt&gt; するときはこうすると良さそう&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;2行で書くより、1行で書く&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;1行で書くと、イメージを小さくできる ( &lt;tt class="docutils literal"&gt;layers&lt;/tt&gt; がなんのことなのかはよくわからない)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;cite&gt;The first creates two layers in the image, while the second only creates one.&lt;/cite&gt;&lt;/p&gt;
&lt;pre class="code docker"&gt;&lt;a name="rest_code_ad5aa4be14b3457c9f0a6f9ae93aecfd-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;RUN&lt;/span&gt; apt-get -y update
&lt;a name="rest_code_ad5aa4be14b3457c9f0a6f9ae93aecfd-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;RUN&lt;/span&gt; apt-get install -y python
&lt;/pre&gt;&lt;pre class="code docker"&gt;&lt;a name="rest_code_539ce1ec02a1469bbb5e3a41ef8cfe77-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;RUN&lt;/span&gt; apt-get -y update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y python
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="https://github.com/righ/djample/"&gt;くろのて勉強会 &amp;gt; DRF勉強会 (全6回) &amp;gt; djample&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;現場で使える Django の教科書 &amp;gt; D: Docker でラクラク開発&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="https://qiita.com/yagince/items/deba267f789604643bab"&gt;Docker Ubuntu18.04でtzdataをinstallするときにtimezoneの選択をしないでinstallする&lt;/a&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;途中で何も尋ねてほしくないときは、 &lt;tt class="docutils literal"&gt;ENV DEBIAN_FRONTEND=noninteractive&lt;/tt&gt; すると良さそう&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="https://stackoverflow.com/questions/27022373/python3-importerror-no-module-named-ctypes-when-using-value-from-module-mul/48045929"&gt;ModuleNotFoundError: No module named '_ctypes' の解決方法&lt;/a&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;事前に &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;libffi-dev&lt;/span&gt;&lt;/tt&gt; パッケージのインストールが必要&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="https://www.t3a.jp/blog/infrastructure/set-timezone/"&gt;[Linux]タイムゾーン(Timezone)をUTCから日本標準時(JST)に変更する&lt;/a&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;シンボリックリンクを張り替える&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;ln &lt;span class="pre"&gt;-sf&lt;/span&gt; /usr/share/zoneinfo/Asia/Tokyo /etc/localtime&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="https://docs.python.org/ja/3/using/unix.html#building-python"&gt;2.2. Python のビルド&lt;/a&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;make install&lt;/tt&gt; の代わりに &lt;tt class="docutils literal"&gt;make altinstall&lt;/tt&gt; 推奨&lt;/li&gt;
&lt;li&gt;&lt;cite&gt;警告 make install は python3 バイナリを上書きまたはリンクを破壊してしまうかもしれません。そのため、make install の代わりに exec_prefix/bin/pythonversion のみインストールする make altinstall が推奨されています。&lt;/cite&gt; だそうです。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id12"&gt;つくりかた&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;実際には、 PostgreSQL か MySQL かどちらか使うほうのみを生きとする。&lt;/p&gt;
&lt;div class="section" id="id4"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id13"&gt;構成&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_cc27236ddc0842729704af81841c3d64-1"&gt;&lt;/a&gt;$ tree fufufu
&lt;a name="rest_code_cc27236ddc0842729704af81841c3d64-2"&gt;&lt;/a&gt;fufufu
&lt;a name="rest_code_cc27236ddc0842729704af81841c3d64-3"&gt;&lt;/a&gt;├── Dockerfile-app        &lt;span class="c1"&gt;# 1. Django プロジェクト作るよう Dockerfile&lt;/span&gt;
&lt;a name="rest_code_cc27236ddc0842729704af81841c3d64-4"&gt;&lt;/a&gt;├── Dockerfile-mysql      &lt;span class="c1"&gt;# 2. MySQL よう Dockerfile&lt;/span&gt;
&lt;a name="rest_code_cc27236ddc0842729704af81841c3d64-5"&gt;&lt;/a&gt;├── Dockerfile-postgres   &lt;span class="c1"&gt;# 3. PostgreSQL よう Dockerfile&lt;/span&gt;
&lt;a name="rest_code_cc27236ddc0842729704af81841c3d64-6"&gt;&lt;/a&gt;├── docker-compose.yml    &lt;span class="c1"&gt;# 4. Composeファイル&lt;/span&gt;
&lt;a name="rest_code_cc27236ddc0842729704af81841c3d64-7"&gt;&lt;/a&gt;└── requirements.txt      &lt;span class="c1"&gt;# 5. requirements.txt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id5"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id14"&gt;設定ファイル&lt;/a&gt;&lt;/h3&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Dockerfile-app&lt;/span&gt;&lt;/tt&gt; : Django プロジェクトを入れるコンテナ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="s"&gt; ubuntu:18.04&lt;/span&gt;

&lt;span class="c"&gt;# インストール中に何も尋ねてくるな&lt;/span&gt;
&lt;span class="k"&gt;ENV&lt;/span&gt; &lt;span class="nv"&gt;DEBIAN_FRONTEND&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;noninteractive

&lt;span class="c"&gt;# Python の環境変数を設定&lt;/span&gt;
&lt;span class="c"&gt;# stdout, stderr のバッファを無効に&lt;/span&gt;
&lt;span class="k"&gt;ENV&lt;/span&gt; PYTHONUNBUFFERED &lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="c"&gt;# ソースモジュールのインポート時に .pyc ファイルを作成しない&lt;/span&gt;
&lt;span class="k"&gt;ENV&lt;/span&gt; PYTHONDONTWRITEBYTECODE &lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="c"&gt;# locales をインストールして設定する&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; apt-get clean &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y locales &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf /var/lib/apt/lists/* &lt;span class="se"&gt;\&lt;/span&gt;
    &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; localedef -i en_US -c -f UTF-8 -A /usr/share/locale/locale.alias en_US.UTF-8
&lt;span class="k"&gt;ENV&lt;/span&gt; LANG en_US.UTF-8
&lt;span class="k"&gt;ENV&lt;/span&gt; LANGUAGE en_US:en
&lt;span class="k"&gt;ENV&lt;/span&gt; LC_ALL en_US.UTF-8

&lt;span class="c"&gt;# タイムゾーンに JST を設定&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; ln -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime

&lt;span class="c"&gt;# Python ビルドに必要な deb パッケージのインストール&lt;/span&gt;
&lt;span class="c"&gt;# `libffi-dev`: 3.6 では不要 (?) 、3.7 では必要&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; apt-get clean &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y &lt;span class="se"&gt;\&lt;/span&gt;
    build-essential &lt;span class="se"&gt;\&lt;/span&gt;
    python3-dev &lt;span class="se"&gt;\&lt;/span&gt;
    libsqlite3-dev &lt;span class="se"&gt;\&lt;/span&gt;
    libreadline6-dev &lt;span class="se"&gt;\&lt;/span&gt;
    libgdbm-dev &lt;span class="se"&gt;\&lt;/span&gt;
    zlib1g-dev &lt;span class="se"&gt;\&lt;/span&gt;
    libbz2-dev &lt;span class="se"&gt;\&lt;/span&gt;
    sqlite3 &lt;span class="se"&gt;\&lt;/span&gt;
    tk-dev &lt;span class="se"&gt;\&lt;/span&gt;
    zip &lt;span class="se"&gt;\&lt;/span&gt;
    libssl-dev &lt;span class="se"&gt;\&lt;/span&gt;
    libffi-dev &lt;span class="se"&gt;\&lt;/span&gt;
    wget &lt;span class="se"&gt;\&lt;/span&gt;
 &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf /var/lib/apt/lists/*

&lt;span class="c"&gt;# Python をソースファイルからビルドしてインストール&lt;/span&gt;
&lt;span class="c"&gt;# `make altinstall`: `make install` の代わりに推奨&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; wget https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tgz &lt;span class="se"&gt;\&lt;/span&gt;
    &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; tar xf Python-3.7.3.tgz &lt;span class="se"&gt;\&lt;/span&gt;
    &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; Python-3.7.3 &lt;span class="se"&gt;\&lt;/span&gt;
    &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; ./configure --prefix&lt;span class="o"&gt;=&lt;/span&gt;/opt/python3.7.3 &lt;span class="se"&gt;\&lt;/span&gt;
    &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; make &lt;span class="se"&gt;\&lt;/span&gt;
    &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; make altinstall

&lt;span class="c"&gt;# Python のシンボリックリンクを作成&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; ln -s /opt/python3.7.3/bin/python3.7 /usr/local/bin/python

&lt;span class="c"&gt;# pip のシンボリックリンクを作成&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; ln -s /opt/python3.7.3/bin/pip3.7 /usr/local/bin/pip

&lt;span class="c"&gt;# pip をアップグレード&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; pip install -U pip

&lt;span class="c"&gt;# mysqlclient のインストールに必要なので、インストールしておく&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; apt-get clean &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y &lt;span class="se"&gt;\&lt;/span&gt;
    default-libmysqlclient-dev &lt;span class="se"&gt;\&lt;/span&gt;
 &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf /var/lib/apt/lists/*
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Dockerfile-mysql&lt;/span&gt;&lt;/tt&gt; : MySQL を入れるコンテナ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="s"&gt; mysql:latest&lt;/span&gt;

&lt;span class="c"&gt;# locales をインストールして設定する&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; apt-get update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y locales &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf /var/lib/apt/lists/* &lt;span class="se"&gt;\&lt;/span&gt;
    &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; localedef -i en_US -c -f UTF-8 -A /usr/share/locale/locale.alias en_US.UTF-8
&lt;span class="k"&gt;ENV&lt;/span&gt; LANG en_US.UTF-8
&lt;span class="k"&gt;ENV&lt;/span&gt; LANGUAGE en_US:en
&lt;span class="k"&gt;ENV&lt;/span&gt; LC_ALL en_US.UTF-8

&lt;span class="c"&gt;# タイムゾーンに JST を設定&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; ln -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;Dockerfile-postgres&lt;/span&gt;&lt;/tt&gt; : PostgreSQL を入れるコンテナ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="s"&gt; postgres:latest&lt;/span&gt;

&lt;span class="c"&gt;## locales をインストールして設定する (postgres の場合は、公式イメージで実行済み)&lt;/span&gt;
&lt;span class="c"&gt;## https://github.com/docker-library/postgres/blob/85aadc08c347cd20f199902c4b8b4f736341c3b8/11/Dockerfile&lt;/span&gt;
&lt;span class="c"&gt;#RUN apt-get update &amp;amp;&amp;amp; apt-get install -y locales &amp;amp;&amp;amp; rm -rf /var/lib/apt/lists/* \&lt;/span&gt;
&lt;span class="c"&gt;#  &amp;amp;&amp;amp; localedef -i en_US -c -f UTF-8 -A /usr/share/locale/locale.alias en_US.UTF-8&lt;/span&gt;
&lt;span class="c"&gt;#ENV LANG en_US.UTF-8&lt;/span&gt;
&lt;span class="k"&gt;ENV&lt;/span&gt; LANGUAGE en_US:en
&lt;span class="k"&gt;ENV&lt;/span&gt; LC_ALL en_US.UTF-8

&lt;span class="c"&gt;# タイムゾーンに JST を設定&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; ln -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;docker-compose.yml&lt;/span&gt;&lt;/tt&gt; : Composeファイル&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'3'&lt;/span&gt;

&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufufu_app&lt;/span&gt;
    &lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.&lt;/span&gt;
      &lt;span class="nt"&gt;dockerfile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Dockerfile-app&lt;/span&gt;
    &lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.:/fufufu&lt;/span&gt;
    &lt;span class="nt"&gt;working_dir&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;/fufufu&lt;/span&gt;
    &lt;span class="nt"&gt;command&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;bash -c "pip install -r requirements.txt &amp;amp;&amp;amp; bash"&lt;/span&gt;
    &lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"8000:8000"&lt;/span&gt;
    &lt;span class="nt"&gt;tty&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;  &lt;span class="c1"&gt;# 起動し続ける&lt;/span&gt;
    &lt;span class="nt"&gt;depends_on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;mysql&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;postgres&lt;/span&gt;

  &lt;span class="nt"&gt;mysql&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufufu_mysql&lt;/span&gt;
    &lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.&lt;/span&gt;
      &lt;span class="nt"&gt;dockerfile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Dockerfile-mysql&lt;/span&gt;
    &lt;span class="nt"&gt;command&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;--character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci&lt;/span&gt;
    &lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;always&lt;/span&gt;
    &lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"mysql-data:/var/lib/mysql"&lt;/span&gt;
    &lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufufu&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_DATABASE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufufu&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_USER&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufufu&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_PASSWORD&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufufu&lt;/span&gt;

  &lt;span class="nt"&gt;postgres&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufufu_postgres&lt;/span&gt;
    &lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.&lt;/span&gt;
      &lt;span class="nt"&gt;dockerfile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Dockerfile-postgres&lt;/span&gt;
    &lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;always&lt;/span&gt;
    &lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"postgres-data:/var/lib/postgresql/data"&lt;/span&gt;
    &lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;POSTGRES_DB&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufufu&lt;/span&gt;
      &lt;span class="nt"&gt;POSTGRES_USER&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufufu&lt;/span&gt;
      &lt;span class="nt"&gt;POSTGRES_PASSWORD&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufufu&lt;/span&gt;

&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;mysql-data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;postgres-data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;requirements.txt&lt;/tt&gt; : requirements.txt&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="na"&gt;Django&amp;gt;&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;2.1&lt;/span&gt;
&lt;span class="na"&gt;mysqlclient&lt;/span&gt;
&lt;span class="na"&gt;psycopg2-binary&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="id6"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id15"&gt;起動&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_5eceb9e9d46f420eb89a44a1e0e3df00-1"&gt;&lt;/a&gt;$ docker-compose up
&lt;a name="rest_code_5eceb9e9d46f420eb89a44a1e0e3df00-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 再度 image ビルドからやり直したい&lt;/span&gt;
&lt;a name="rest_code_5eceb9e9d46f420eb89a44a1e0e3df00-3"&gt;&lt;/a&gt;$ docker-compose up --build
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id7"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id16"&gt;つかいかた&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="app"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id17"&gt;app コンテナ&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_c01c7344029b432fae598a5275510ca6-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# Django プロジェクトのコンテナに入る&lt;/span&gt;
&lt;a name="rest_code_c01c7344029b432fae598a5275510ca6-2"&gt;&lt;/a&gt;$ docker container &lt;span class="nb"&gt;exec&lt;/span&gt; -it fufufu_app bash
&lt;a name="rest_code_c01c7344029b432fae598a5275510ca6-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# Django プロジェクトを作成する&lt;/span&gt;
&lt;a name="rest_code_c01c7344029b432fae598a5275510ca6-4"&gt;&lt;/a&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /fufufu
&lt;a name="rest_code_c01c7344029b432fae598a5275510ca6-5"&gt;&lt;/a&gt;$ /opt/python3.7.3/lib/python3.7/site-packages/django/bin/django-admin.py startproject config .
&lt;a name="rest_code_c01c7344029b432fae598a5275510ca6-6"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# runserver する ( settings.py の ``ALLOWED_HOSTS`` に ``'0.0.0.0'`` を書いておかないと ``DisallowedHost`` になります)&lt;/span&gt;
&lt;a name="rest_code_c01c7344029b432fae598a5275510ca6-7"&gt;&lt;/a&gt;$ python manage.py runserver &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:8000
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="mysql-postgresql"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id18"&gt;MySQL, PostgreSQL コンテナ&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_19714d589ae04e5bbfde05a1f2997435-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# MySQL のコンテナに入る&lt;/span&gt;
&lt;a name="rest_code_19714d589ae04e5bbfde05a1f2997435-2"&gt;&lt;/a&gt;$ docker container &lt;span class="nb"&gt;exec&lt;/span&gt; -it fufufu_mysql bash
&lt;a name="rest_code_19714d589ae04e5bbfde05a1f2997435-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# MySQL に入る&lt;/span&gt;
&lt;a name="rest_code_19714d589ae04e5bbfde05a1f2997435-4"&gt;&lt;/a&gt;$ mysql -u fufufu -D fufufu -p
&lt;a name="rest_code_19714d589ae04e5bbfde05a1f2997435-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_19714d589ae04e5bbfde05a1f2997435-6"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# PostgreSQL のコンテナに入る&lt;/span&gt;
&lt;a name="rest_code_19714d589ae04e5bbfde05a1f2997435-7"&gt;&lt;/a&gt;$ docker container &lt;span class="nb"&gt;exec&lt;/span&gt; -it fufufu_postgres bash
&lt;a name="rest_code_19714d589ae04e5bbfde05a1f2997435-8"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# PostgreSQL に入る&lt;/span&gt;
&lt;a name="rest_code_19714d589ae04e5bbfde05a1f2997435-9"&gt;&lt;/a&gt;$ psql -U fufufu fufufu
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id8"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id19"&gt;感想&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Python をソースファイルからビルドしてインストール&lt;/tt&gt; するのは時間がかかる&lt;/li&gt;
&lt;li&gt;Django プロジェクトを作成するのに、venv を作らず、&lt;ul&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;/opt/python3.7.3/lib/python3.7/site-packages/django/bin/django-admin.py&lt;/span&gt; startproject config .&lt;/tt&gt; じゃなくて、 &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;django-admin.py&lt;/span&gt; startproject config .&lt;/tt&gt; できる方法ないのだろうか...&lt;/li&gt;
&lt;li&gt;手動で &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;/opt/python3.7.3/lib/python3.7/site-packages/django/bin/&lt;/span&gt;&lt;/tt&gt; に PATH を通せばできるけどそうじゃなくて自動でやってくれないのかな...&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id9"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id20"&gt;その他&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id10"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id21"&gt;Python 公式イメージのルーツ&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;python:latest, python:3 =&amp;gt; buildpack-deps:stretch =&amp;gt; debian:stretch&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;ubuntu は Debian-based ということだけれど、 Debian と ubuntu はどんな風に違うんだろうなあ&lt;/li&gt;
&lt;li&gt;MySQL, PostgreSQL の公式イメージも Debian (debian:stretch-slim) だった&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="docker-hub"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/#id22"&gt;Docker Hub&lt;/a&gt;&lt;/h4&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://hub.docker.com/_/python"&gt;python Docker Official Images&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://hub.docker.com/_/buildpack-deps"&gt;buildpack-deps Docker Official Images&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;cite&gt;A collection of common build dependencies used for installing various modules, e.g., gems.&lt;/cite&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://hub.docker.com/_/debian"&gt;Debian Docker Official Images&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>docker</category><guid>https://32imuf.com/docker/create-django-env-with-docker-compose-psql-mysql/</guid><pubDate>Tue, 30 Apr 2019 15:00:00 GMT</pubDate></item><item><title>Docker Compose で MySQL DB をつくり Compose 外 (非 docker) の SQLAlchemy から接続する</title><link>https://32imuf.com/docker/connect-from-sqla-to-mysqldb/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id2" id="id20"&gt;リファレンス・ガイド&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#sqlalchemy" id="id21"&gt;SQLAlchemy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#docker-hub" id="id22"&gt;Docker Hub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#pypi" id="id23"&gt;PyPI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#mysql-db" id="id24"&gt;MySQL DB をつくる&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id3" id="id25"&gt;1. 準備&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id4" id="id26"&gt;ディレクトリ構成&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id5" id="id27"&gt;設定ファイル&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id6" id="id28"&gt;2. 起動&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id7" id="id29"&gt;SQLAlchemy の設定&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id8" id="id30"&gt;mysqlclient&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id9" id="id31"&gt;接続文字列&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id10" id="id32"&gt;事前準備&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id11" id="id33"&gt;PyMySQL&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id12" id="id34"&gt;接続文字列&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id13" id="id35"&gt;事前準備&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id14" id="id36"&gt;mysql-connector-python&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id15" id="id37"&gt;接続文字列&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id16" id="id38"&gt;事前準備&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id17" id="id39"&gt;使ったメモ&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id18" id="id40"&gt;※ 1.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#note-aborted-connection" id="id41"&gt;※ 2. [Note] Aborted connection ...&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id19" id="id42"&gt;参考ページ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id20"&gt;リファレンス・ガイド&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="sqlalchemy"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id21"&gt;SQLAlchemy&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://docs.sqlalchemy.org/en/latest/dialects/mysql.html"&gt;SQLAlchemy 1.3 Documentation: MySQL&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="docker-hub"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id22"&gt;Docker Hub&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://hub.docker.com/_/mysql"&gt;mysql Docker Official Images&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="pypi"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id23"&gt;PyPI&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://pypi.org/project/mysqlclient/"&gt;mysqlclient&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://pypi.org/project/PyMySQL/"&gt;PyMySQL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://pypi.org/project/mysql-connector-python/"&gt;mysql-connector-python&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="mysql-db"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id24"&gt;MySQL DB をつくる&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id3"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id25"&gt;1. 準備&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="id4"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id26"&gt;ディレクトリ構成&lt;/a&gt;&lt;/h4&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_3b55338931f84de0897e1a75647311ba-1"&gt;&lt;/a&gt;$ tree mmm
&lt;a name="rest_code_3b55338931f84de0897e1a75647311ba-2"&gt;&lt;/a&gt;mmm
&lt;a name="rest_code_3b55338931f84de0897e1a75647311ba-3"&gt;&lt;/a&gt;├── Dockerfile-mysql
&lt;a name="rest_code_3b55338931f84de0897e1a75647311ba-4"&gt;&lt;/a&gt;└── docker-compose.yml
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id5"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id27"&gt;設定ファイル&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Dockerfile-mysql&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="s"&gt; mysql:5.7.12&lt;/span&gt;
&lt;span class="c"&gt;# `5.7.12` は自分の使いたいイメージのタグ&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; apt-get clean &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y locales locales-all vim
&lt;span class="c"&gt;# ↑のイメージそのままだと vi も vim も入っていなくて不便だったので vim も入れておく&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; locale-gen ja_JP.UTF-8
&lt;span class="k"&gt;ENV&lt;/span&gt; LANG ja_JP.UTF-8
&lt;span class="k"&gt;ENV&lt;/span&gt; LANGUAGE ja_JP:en
&lt;span class="k"&gt;ENV&lt;/span&gt; LC_ALL ja_JP.UTF-8
&lt;span class="k"&gt;RUN&lt;/span&gt; ln -sf /usr/share/zoneinfo/Japan /etc/localtime
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;docker-compose.yml&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'3'&lt;/span&gt;

&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;mmm_db&lt;/span&gt;
    &lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.&lt;/span&gt;
      &lt;span class="nt"&gt;dockerfile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Dockerfile-mysql&lt;/span&gt;
    &lt;span class="c1"&gt;# 文字コードの設定をしておく&lt;/span&gt;
    &lt;span class="nt"&gt;command&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;--character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci&lt;/span&gt;
    &lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;always&lt;/span&gt;
    &lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"db-data:/var/lib/mysql"&lt;/span&gt;
    &lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;mmm&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_DATABASE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;mmm&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_USER&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;mmm&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_PASSWORD&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;mmm&lt;/span&gt;
    &lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"3306:3306"&lt;/span&gt;  &lt;span class="c1"&gt;# 大事。ここを書いておかないと、 compose の外から繋げない。&lt;/span&gt;

&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;db-data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id6"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id28"&gt;2. 起動&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_e65208e7bfcc44a3a04f6a117e9eb6b3-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# mmm 直下で実行する&lt;/span&gt;
&lt;a name="rest_code_e65208e7bfcc44a3a04f6a117e9eb6b3-2"&gt;&lt;/a&gt;$ docker-compose up
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id7"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id29"&gt;SQLAlchemy の設定&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id8"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id30"&gt;mysqlclient&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="id9"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id31"&gt;接続文字列&lt;/a&gt;&lt;/h4&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_7dabff8952f64083ba089120787b59f8-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;mysqldb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;mmm&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;mmm&lt;/span&gt;&lt;span class="nd"&gt;@127.0.0.1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3306&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;mmm&lt;/span&gt;&lt;span class="err"&gt;?&lt;/span&gt;&lt;span class="n"&gt;charset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;utf8mb4&lt;/span&gt;
&lt;a name="rest_code_7dabff8952f64083ba089120787b59f8-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# mysql+mysqldb://&amp;lt;user&amp;gt;:&amp;lt;password&amp;gt;@&amp;lt;host&amp;gt;[:&amp;lt;port&amp;gt;]/&amp;lt;dbname&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id10"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id32"&gt;事前準備&lt;/a&gt;&lt;/h4&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Python3 他のインストール&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;sudo apt-get install python3-dev default-libmysqlclient-dev ＃Debian / Ubuntu&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;sudo yum install python3-devel mysql-devel ＃Red Hat / CentOS&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;brew install mysql-connector-c # macOS (Homebrew) (Currently, it has bug. See below)&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;macOS の場合はバグあるらしくちょっと小細工が必要&lt;ul&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;/usr/local/bin/mysql_config&lt;/tt&gt; を編集しないといけない (PyPI の Project description, GitHub の README に書いてある)&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;mysql_config&lt;/tt&gt; は &lt;tt class="docutils literal"&gt;$ which mysql_config&lt;/tt&gt; で探せる&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ol class="arabic" start="2"&gt;
&lt;li&gt;&lt;p class="first"&gt;mysqlclient のインストール&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_ce0ee40c9441440790c4dc7d6c701ec2-1"&gt;&lt;/a&gt;pip install mysqlclient
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id11"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id33"&gt;PyMySQL&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="id12"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id34"&gt;接続文字列&lt;/a&gt;&lt;/h4&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_2026b84c62e14d259e0ace692e6902b5-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;pymysql&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;mmm&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;mmm&lt;/span&gt;&lt;span class="nd"&gt;@127.0.0.1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3306&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;mmm&lt;/span&gt;&lt;span class="err"&gt;?&lt;/span&gt;&lt;span class="n"&gt;charset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;utf8mb4&lt;/span&gt;
&lt;a name="rest_code_2026b84c62e14d259e0ace692e6902b5-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# mysql+pymysql://&amp;lt;username&amp;gt;:&amp;lt;password&amp;gt;@&amp;lt;host&amp;gt;/&amp;lt;dbname&amp;gt;[?&amp;lt;options&amp;gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id13"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id35"&gt;事前準備&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;PyMySQL のインストール&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_168abfa000e0475fbdab6931e285431f-1"&gt;&lt;/a&gt;pip install PyMySQL
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id14"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id36"&gt;mysql-connector-python&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="id15"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id37"&gt;接続文字列&lt;/a&gt;&lt;/h4&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_4a827a2871884bf889ff124bf3425d0e-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;mysqlconnector&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;mmm&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;mmm&lt;/span&gt;&lt;span class="nd"&gt;@127.0.0.1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3306&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;mmm&lt;/span&gt;&lt;span class="err"&gt;?&lt;/span&gt;&lt;span class="n"&gt;charset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;utf8mb4&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
&lt;a name="rest_code_4a827a2871884bf889ff124bf3425d0e-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# mysql+mysqlconnector://&amp;lt;user&amp;gt;:&amp;lt;password&amp;gt;@&amp;lt;host&amp;gt;[:&amp;lt;port&amp;gt;]/&amp;lt;dbname&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id16"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id38"&gt;事前準備&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;mysql-connector-python のインストール&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_7a0095e70f8a41e7ab62cffa5ae4a538-1"&gt;&lt;/a&gt;pip install mysql-connector-python
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id17"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id39"&gt;使ったメモ&lt;/a&gt;&lt;/h2&gt;
&lt;table border="1" class="colwidths-auto docutils"&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head stub"&gt; &lt;/th&gt;
&lt;th class="head"&gt;mysqlclient&lt;/th&gt;
&lt;th class="head"&gt;PyMySQL&lt;/th&gt;
&lt;th class="head"&gt;mysql-connector-python&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;th class="stub"&gt;準備 ※1&lt;/th&gt;
&lt;td&gt;&lt;p class="first"&gt;ただの Python3 だけでは済まない、 &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;python3-dev&lt;/span&gt;&lt;/tt&gt; をインストールする必要がある&lt;/p&gt;
&lt;blockquote class="last"&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;python3&lt;/tt&gt; パッケージ (実態は &lt;tt class="docutils literal"&gt;python3.7&lt;/tt&gt; とか) は実行に必要なものだけが入る&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;Python.h&lt;/tt&gt; などのヘッダファイルや &lt;tt class="docutils literal"&gt;python3.7.a&lt;/tt&gt; などのスタティックリンクライブラリは入っていない&lt;/li&gt;
&lt;li&gt;これらは、 &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;python3-dev&lt;/span&gt;&lt;/tt&gt; (&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;python3.7-dev&lt;/span&gt;&lt;/tt&gt;) でインストールされる。実行に必要がないため別れている。&lt;/li&gt;
&lt;li&gt;mysqlclient は C拡張を含んでるのでビルドする必要がある&lt;/li&gt;
&lt;li&gt;ビルドには &lt;tt class="docutils literal"&gt;Python.h&lt;/tt&gt; などのヘッダファイルが必要&lt;/li&gt;
&lt;li&gt;昨今は C拡張であってもビルド済の wheel が pypi にあがってたりしてインストール時にビルドが必要ないものも増えているが、 mysqlclient は SSL のリンクの都合上 wheel を提供していないよう&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/td&gt;
&lt;td&gt;&lt;p class="first"&gt;ただの Python3 だけで済む&lt;/p&gt;
&lt;ul class="last simple"&gt;
&lt;li&gt;PyMySQL は C拡張を含まずピュア Python なのでビルドする必要がない&lt;/li&gt;
&lt;li&gt;この場合 SSL はpythonをインストールしたときにリンクしたものを使う&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td&gt;ただの Python3 だけで済む&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;th class="stub"&gt;[Note] Aborted connection ※2&lt;/th&gt;
&lt;td&gt;&lt;tt class="docutils literal"&gt;log_warnings = 2&lt;/tt&gt; でも出ない&lt;/td&gt;
&lt;td&gt;&lt;tt class="docutils literal"&gt;log_warnings = 2&lt;/tt&gt; だと出る, 1 だと出ない&lt;/td&gt;
&lt;td&gt;&lt;tt class="docutils literal"&gt;log_warnings = 2&lt;/tt&gt; だと出る, 1 だと出ない&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;th class="stub"&gt;SQLAlchemy のおし具合&lt;/th&gt;
&lt;td&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;&lt;cite&gt;mysqlclient supports Python 2 and Python 3 and is very stable.&lt;/cite&gt;&lt;/li&gt;
&lt;li&gt;一番おすすめに見える (個人の感想)&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;&lt;cite&gt;The pymysql DBAPI is a pure Python port of the MySQL-python (MySQLdb) driver, and targets 100% compatibility.&lt;/cite&gt;&lt;/li&gt;
&lt;li&gt;二番目におすすめに見える (個人の感想)&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;特記事項なし&lt;/li&gt;
&lt;li&gt;付け加えて言いたいことがないようなので、ふつうかな (個人の感想)&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;th class="stub"&gt;わたしの感想&lt;/th&gt;
&lt;td&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;ただの Python3 だけでは済まないのが手軽感減少、Mac だとけっこうめんどう。どうにかしてほしい。&lt;/li&gt;
&lt;li&gt;でも &lt;tt class="docutils literal"&gt;Aborted connection&lt;/tt&gt; が出ないのはなるほどと思った&lt;/li&gt;
&lt;li&gt;Django もこれをおすすめしていたので、できればこれが良いが、インストールのところがどうしてもひっかかる。&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;td&gt;install が手軽でよい。 &lt;tt class="docutils literal"&gt;Aborted connection&lt;/tt&gt; はあまり気にしなくて良さそうでもあるし、 SQLA さんも二番目におすすめしている (空想) のでこれがいいかなあ。&lt;/td&gt;
&lt;td&gt;install が手軽でよい。ほかはとくになし。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;th class="stub"&gt;aodag さんに教えてもらったことメモ&lt;/th&gt;
&lt;td&gt; &lt;/td&gt;
&lt;td&gt;&lt;strong&gt;sqlalchemy で使うなら pymysql 使っとけ（断言）&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="section" id="id18"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id40"&gt;※ 1.&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;python3-dev&lt;/span&gt;&lt;/tt&gt; が必要 or 不要な理由も aodag さんに教えていただきました。ありがとうございました。&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="note-aborted-connection"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id41"&gt;※ 2. [Note] Aborted connection ...&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="https://dev.mysql.com/doc/refman/5.7/en/communication-errors.html"&gt;B.6.2.10 Communication Errors and Aborted Connections&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_2016d852110f4cf0a0e546e5da26d528-1"&gt;&lt;/a&gt;db_1  &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-03-24T06:38:23.691896Z &lt;span class="m"&gt;2&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Note&lt;span class="o"&gt;]&lt;/span&gt; Aborted connection &lt;span class="m"&gt;2&lt;/span&gt; to db: &lt;span class="s1"&gt;'mmm'&lt;/span&gt; user: &lt;span class="s1"&gt;'mmm'&lt;/span&gt; host: &lt;span class="s1"&gt;'172.27.0.1'&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;Got an error reading communication packets&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;クライアントの接続方法とか切断方法に何か問題があるらしい&lt;/li&gt;
&lt;li&gt;わたしの場合、同じコードでもドライバーによって出たり出なかったりする&lt;/li&gt;
&lt;li&gt;ログレベルを下げると出なくなる&lt;/li&gt;
&lt;li&gt;同じ事象のひとが世界中にけっこういる&lt;/li&gt;
&lt;li&gt;このログが出ていても、(ワーニングログがたくさん出ること以外に)「困った!」というひとはあまりいなそう&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="id19"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/connect-from-sqla-to-mysqldb/#id42"&gt;参考ページ&lt;/a&gt;&lt;/h4&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://weblabo.oscasierra.net/mysql-error-reading-communication-packets/"&gt;MySQLで「Got an error reading communication packets」というエラーが出力される原因と対策&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://qiita.com/hit/items/da50428ca4b4162162a8"&gt;[MariaDB] Aborted connectionのワーニング対応に大いにハマる・・&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;などなど... ありがとうございました。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>docker</category><guid>https://32imuf.com/docker/connect-from-sqla-to-mysqldb/</guid><pubDate>Sat, 23 Mar 2019 15:00:00 GMT</pubDate></item><item><title>Docker Compose で Django/MySQL 環境をつくる その2</title><link>https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id2" id="id12"&gt;リファレンス・ガイド・参考書籍&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id3" id="id13"&gt;環境構築&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id4" id="id14"&gt;1. 準備&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id5" id="id15"&gt;ディレクトリ構成&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id6" id="id16"&gt;設定ファイル&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id8" id="id17"&gt;2. 最初の1回だけ実行&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id9" id="id18"&gt;3. 実行後の状態&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#settings-mysql" id="id19"&gt;4. settings に mysql の定義を追記する&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#webdb" id="id20"&gt;5. web・db コンテナを起動する&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id10" id="id21"&gt;環境構築メモ&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#default-authentication-plugin-mysql-native-password" id="id22"&gt;&lt;strong&gt;※1&lt;/strong&gt;: default-authentication-plugin=mysql_native_password について&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#skip-host-cache-skip-name-resolve" id="id23"&gt;&lt;strong&gt;※2&lt;/strong&gt;: skip-host-cache, skip-name-resolve について&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id11" id="id24"&gt;使い方メモ&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#image" id="id25"&gt;再び image ビルドしたくなったら&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id12"&gt;リファレンス・ガイド・参考書籍&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql"&gt;Docker Compose で Django/MySQL 環境をつくる&lt;/a&gt; と同じ&lt;/li&gt;
&lt;li&gt;現場で使える Django の教科書《基礎編》&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id13"&gt;環境構築&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id4"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id14"&gt;1. 準備&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="id5"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id15"&gt;ディレクトリ構成&lt;/a&gt;&lt;/h4&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_dca1afac5d4741448d2af1e94c9e9e1a-1"&gt;&lt;/a&gt;$ tree fufu
&lt;a name="rest_code_dca1afac5d4741448d2af1e94c9e9e1a-2"&gt;&lt;/a&gt;fufu
&lt;a name="rest_code_dca1afac5d4741448d2af1e94c9e9e1a-3"&gt;&lt;/a&gt;├── Dockerfile-mysql
&lt;a name="rest_code_dca1afac5d4741448d2af1e94c9e9e1a-4"&gt;&lt;/a&gt;├── Dockerfile-web
&lt;a name="rest_code_dca1afac5d4741448d2af1e94c9e9e1a-5"&gt;&lt;/a&gt;├── docker-compose.yml
&lt;a name="rest_code_dca1afac5d4741448d2af1e94c9e9e1a-6"&gt;&lt;/a&gt;├── mysql
&lt;a name="rest_code_dca1afac5d4741448d2af1e94c9e9e1a-7"&gt;&lt;/a&gt;│   └── conf.d
&lt;a name="rest_code_dca1afac5d4741448d2af1e94c9e9e1a-8"&gt;&lt;/a&gt;│       └── mysql.cnf
&lt;a name="rest_code_dca1afac5d4741448d2af1e94c9e9e1a-9"&gt;&lt;/a&gt;└── requirements.txt
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id6"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id16"&gt;設定ファイル&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Dockerfile-web&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="s"&gt; python:3&lt;/span&gt;
&lt;span class="k"&gt;ENV&lt;/span&gt; PYTHONUNBUFFERED &lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; mkdir /code
&lt;span class="k"&gt;WORKDIR&lt;/span&gt;&lt;span class="s"&gt; /code&lt;/span&gt;
&lt;span class="k"&gt;ADD&lt;/span&gt; requirements.txt /code/
&lt;span class="k"&gt;RUN&lt;/span&gt; pip install -r requirements.txt
&lt;span class="k"&gt;ADD&lt;/span&gt; . /code/
&lt;span class="c"&gt;# アプリケーションは `apps` ディレクトリ配下に作りたかったので、追加&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; mkdir apps
&lt;span class="k"&gt;WORKDIR&lt;/span&gt;&lt;span class="s"&gt; apps&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;docker-compose.yml&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'3'&lt;/span&gt;

&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufu_db&lt;/span&gt;
    &lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.&lt;/span&gt;
      &lt;span class="nt"&gt;dockerfile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Dockerfile-mysql&lt;/span&gt;
    &lt;span class="nt"&gt;command&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;--default-authentication-plugin=mysql_native_password&lt;/span&gt;
    &lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;always&lt;/span&gt;
    &lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"db-data:/var/lib/mysql"&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"./mysql/conf.d:/etc/mysql/conf.d"&lt;/span&gt;
    &lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufu&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_DATABASE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufu&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_USER&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufu&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_PASSWORD&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufu&lt;/span&gt;

  &lt;span class="nt"&gt;web&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fufu_web&lt;/span&gt;
    &lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.&lt;/span&gt;
      &lt;span class="nt"&gt;dockerfile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Dockerfile-web&lt;/span&gt;
    &lt;span class="nt"&gt;command&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;python3 manage.py runserver 0.0.0.0:8000 --settings=settings.local&lt;/span&gt;
    &lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.:/code&lt;/span&gt;
    &lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"3236:8000"&lt;/span&gt;
    &lt;span class="nt"&gt;depends_on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;db&lt;/span&gt;

&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;db-data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mysql.cnf
&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Copyright (c) 2015, 2016, Oracle and/or its affiliates. All rights reserved.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# This program is free software; you can redistribute it and/or modify&lt;/span&gt;
&lt;span class="c1"&gt;# it under the terms of the GNU General Public License, version 2.0,&lt;/span&gt;
&lt;span class="c1"&gt;# as published by the Free Software Foundation.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# This program is also distributed with certain software (including&lt;/span&gt;
&lt;span class="c1"&gt;# but not limited to OpenSSL) that is licensed under separate terms,&lt;/span&gt;
&lt;span class="c1"&gt;# as designated in a particular file or component or in included license&lt;/span&gt;
&lt;span class="c1"&gt;# documentation.  The authors of MySQL hereby grant you an additional&lt;/span&gt;
&lt;span class="c1"&gt;# permission to link the program and your derivative works with the&lt;/span&gt;
&lt;span class="c1"&gt;# separately licensed software that they have included with MySQL.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# This program is distributed in the hope that it will be useful,&lt;/span&gt;
&lt;span class="c1"&gt;# but WITHOUT ANY WARRANTY; without even the implied warranty of&lt;/span&gt;
&lt;span class="c1"&gt;# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&lt;/span&gt;
&lt;span class="c1"&gt;# GNU General Public License, version 2.0, for more details.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# You should have received a copy of the GNU General Public License&lt;/span&gt;
&lt;span class="c1"&gt;# along with this program; if not, write to the Free Software&lt;/span&gt;
&lt;span class="c1"&gt;# Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA&lt;/span&gt;

&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The MySQL  Client configuration file.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# For explanations see&lt;/span&gt;
&lt;span class="c1"&gt;# http://dev.mysql.com/doc/mysql/en/server-system-variables.html&lt;/span&gt;


&lt;span class="na"&gt;[mysqld]  # *** mysqlサーバーの設定 ***************&lt;/span&gt;
&lt;span class="c1"&gt;# https://dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html#upgrade-caching-sha2-password&lt;/span&gt;
&lt;span class="c1"&gt;# https://dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html#upgrade-caching-sha2-password-compatible-connectors&lt;/span&gt;
&lt;span class="c1"&gt;# https://dev.mysql.com/doc/mysqld-version-reference/en/optvar-changes-8-0.html&lt;/span&gt;
&lt;span class="c1"&gt;# [環境構築メモ ※1 参照のこと]&lt;/span&gt;
&lt;span class="na"&gt;default-authentication-plugin&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;mysql_native_password&lt;/span&gt;

&lt;span class="c1"&gt;# デフォルト状態で /etc/mysql/conf.d/docker.cnf に定義されているやつをコピーしておく&lt;/span&gt;
&lt;span class="c1"&gt;# もしくは、 docker.cnf として作っておく&lt;/span&gt;
&lt;span class="c1"&gt;# [環境構築メモ ※2 参照のこと]&lt;/span&gt;
&lt;span class="na"&gt;skip-host-cache&lt;/span&gt;
&lt;span class="na"&gt;skip-name-resolve&lt;/span&gt;

&lt;span class="c1"&gt;# https://mysqlserverteam.com/mysql-8-0-kana-sensitive-collation-for-japanese-ja_jp/&lt;/span&gt;
&lt;span class="na"&gt;collation-server&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;utf8mb4_ja_0900_as_cs_ks&lt;/span&gt;
&lt;span class="na"&gt;character-set-server&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;utf8mb4&lt;/span&gt;
&lt;span class="c1"&gt;# https://dev.mysql.com/doc/refman/8.0/en/server-options.html#option_mysqld_default-time-zone&lt;/span&gt;
&lt;span class="na"&gt;default-time-zone&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;'Asia/Tokyo'&lt;/span&gt;

&lt;span class="na"&gt;[client]  # *** mysqlクライアントの設定 ************&lt;/span&gt;
&lt;span class="na"&gt;default-character-set&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;utf8mb4&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;docker.cnf&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="na"&gt;[mysqld]  # *** mysqlサーバーの設定 ***************&lt;/span&gt;
&lt;span class="na"&gt;skip-host-cache&lt;/span&gt;
&lt;span class="na"&gt;skip-name-resolve&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;あとの設定ファイルは &lt;a class="reference external" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql"&gt;Docker Compose で Django/MySQL 環境をつくる&lt;/a&gt; と同じ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id8"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id17"&gt;2. 最初の1回だけ実行&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;web, db の docker image をビルド -&amp;gt; web で startproject する。 (ログを良く見ると、たぶん db コンテナの起動もしている。)&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# fufu 直下で実行する&lt;/span&gt;
$ docker-compose run web django-admin.py startproject config .
Building db
Step &lt;span class="m"&gt;1&lt;/span&gt;/7 : FROM mysql:latest
latest: Pulling from library/mysql
177e7ef0df69: Pulling fs layer
cac25352c4c8: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
8585afabb40a: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
1e4af4996053: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
c326522894da: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
9020d6b6b171: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
55eb37ec6e5f: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
37f3f3d72fbd: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
03f098d64268: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
46a52a54cfe9: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
202bc662895d: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
46014f07b258: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
Digest: sha256:196c04e1944c5e4ea3ab86ae5f78f697cf18ee43865f25e334a6ffb1dbea81e6
Status: Downloaded newer image &lt;span class="k"&gt;for&lt;/span&gt; mysql:latest
 ---&amp;gt; 102816b1ee7d
Step &lt;span class="m"&gt;2&lt;/span&gt;/7 : RUN apt-get clean &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y locales locales-all
 ---&amp;gt; Running in 976810f0d320
Get:1 http://repo.mysql.com/apt/debian stretch InRelease &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;19&lt;/span&gt;.2 kB&lt;span class="o"&gt;]&lt;/span&gt;
Get:5 http://repo.mysql.com/apt/debian stretch/mysql-8.0 amd64 Packages &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;7186&lt;/span&gt; B&lt;span class="o"&gt;]&lt;/span&gt;
Ign:2 http://cdn-fastly.deb.debian.org/debian stretch InRelease
Get:3 http://security-cdn.debian.org/debian-security stretch/updates InRelease &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;94&lt;/span&gt;.3 kB&lt;span class="o"&gt;]&lt;/span&gt;
Get:4 http://cdn-fastly.deb.debian.org/debian stretch-updates InRelease &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;91&lt;/span&gt;.0 kB&lt;span class="o"&gt;]&lt;/span&gt;
Get:7 http://security-cdn.debian.org/debian-security stretch/updates/main amd64 Packages &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;464&lt;/span&gt; kB&lt;span class="o"&gt;]&lt;/span&gt;
Get:6 http://cdn-fastly.deb.debian.org/debian stretch Release &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;118&lt;/span&gt; kB&lt;span class="o"&gt;]&lt;/span&gt;
Get:8 http://cdn-fastly.deb.debian.org/debian stretch-updates/main amd64 Packages &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;5152&lt;/span&gt; B&lt;span class="o"&gt;]&lt;/span&gt;
Get:9 http://cdn-fastly.deb.debian.org/debian stretch Release.gpg &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;2434&lt;/span&gt; B&lt;span class="o"&gt;]&lt;/span&gt;
Get:10 http://cdn-fastly.deb.debian.org/debian stretch/main amd64 Packages &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;7089&lt;/span&gt; kB&lt;span class="o"&gt;]&lt;/span&gt;
Fetched &lt;span class="m"&gt;7890&lt;/span&gt; kB in 5s &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1505&lt;/span&gt; kB/s&lt;span class="o"&gt;)&lt;/span&gt;
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  libc-l10n
The following NEW packages will be installed:
  libc-l10n locales locales-all
&lt;span class="m"&gt;0&lt;/span&gt; upgraded, &lt;span class="m"&gt;3&lt;/span&gt; newly installed, &lt;span class="m"&gt;0&lt;/span&gt; to remove and &lt;span class="m"&gt;1&lt;/span&gt; not upgraded.
Need to get &lt;span class="m"&gt;7732&lt;/span&gt; kB of archives.
After this operation, &lt;span class="m"&gt;144&lt;/span&gt; MB of additional disk space will be used.
Get:1 http://cdn-fastly.deb.debian.org/debian stretch/main amd64 libc-l10n all &lt;span class="m"&gt;2&lt;/span&gt;.24-11+deb9u3 &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;820&lt;/span&gt; kB&lt;span class="o"&gt;]&lt;/span&gt;
Get:2 http://cdn-fastly.deb.debian.org/debian stretch/main amd64 locales all &lt;span class="m"&gt;2&lt;/span&gt;.24-11+deb9u3 &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;3287&lt;/span&gt; kB&lt;span class="o"&gt;]&lt;/span&gt;
Get:3 http://cdn-fastly.deb.debian.org/debian stretch/main amd64 locales-all amd64 &lt;span class="m"&gt;2&lt;/span&gt;.24-11+deb9u3 &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;3624&lt;/span&gt; kB&lt;span class="o"&gt;]&lt;/span&gt;
debconf: delaying package configuration, since apt-utils is not installed
Fetched &lt;span class="m"&gt;7732&lt;/span&gt; kB in 3s &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2190&lt;/span&gt; kB/s&lt;span class="o"&gt;)&lt;/span&gt;
Selecting previously unselected package libc-l10n.
&lt;span class="o"&gt;(&lt;/span&gt;Reading database ... &lt;span class="m"&gt;8866&lt;/span&gt; files and directories currently installed.&lt;span class="o"&gt;)&lt;/span&gt;
Preparing to unpack .../libc-l10n_2.24-11+deb9u3_all.deb ...
Unpacking libc-l10n &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.24-11+deb9u3&lt;span class="o"&gt;)&lt;/span&gt; ...
Selecting previously unselected package locales.
Preparing to unpack .../locales_2.24-11+deb9u3_all.deb ...
Unpacking locales &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.24-11+deb9u3&lt;span class="o"&gt;)&lt;/span&gt; ...
Selecting previously unselected package locales-all.
Preparing to unpack .../locales-all_2.24-11+deb9u3_amd64.deb ...
Unpacking locales-all &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.24-11+deb9u3&lt;span class="o"&gt;)&lt;/span&gt; ...
Setting up libc-l10n &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.24-11+deb9u3&lt;span class="o"&gt;)&lt;/span&gt; ...
Setting up locales &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.24-11+deb9u3&lt;span class="o"&gt;)&lt;/span&gt; ...
debconf: unable to initialize frontend: Dialog
debconf: &lt;span class="o"&gt;(&lt;/span&gt;TERM is not set, so the dialog frontend is not usable.&lt;span class="o"&gt;)&lt;/span&gt;
debconf: falling back to frontend: Readline
Generating locales &lt;span class="o"&gt;(&lt;/span&gt;this might take a &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;...
Generation complete.
Setting up locales-all &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.24-11+deb9u3&lt;span class="o"&gt;)&lt;/span&gt; ...
Removing intermediate container 976810f0d320
 ---&amp;gt; a38ea7bd8cf5
Step &lt;span class="m"&gt;3&lt;/span&gt;/7 : RUN locale-gen ja_JP.UTF-8
 ---&amp;gt; Running in 45929bff7253
Generating locales &lt;span class="o"&gt;(&lt;/span&gt;this might take a &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;...
Generation complete.
Removing intermediate container 45929bff7253
 ---&amp;gt; 61f34eeb1373
Step &lt;span class="m"&gt;4&lt;/span&gt;/7 : ENV LANG ja_JP.UTF-8
 ---&amp;gt; Running in 0edd321d2039
Removing intermediate container 0edd321d2039
 ---&amp;gt; 9d081db59b9d
Step &lt;span class="m"&gt;5&lt;/span&gt;/7 : ENV LANGUAGE ja_JP:en
 ---&amp;gt; Running in 3770c59b22a2
Removing intermediate container 3770c59b22a2
 ---&amp;gt; d1c0b275dfa6
Step &lt;span class="m"&gt;6&lt;/span&gt;/7 : ENV LC_ALL ja_JP.UTF-8
 ---&amp;gt; Running in 751e7ba46d23
Removing intermediate container 751e7ba46d23
 ---&amp;gt; 8b58a86198fe
Step &lt;span class="m"&gt;7&lt;/span&gt;/7 : RUN ln -sf /usr/share/zoneinfo/Japan /etc/localtime
 ---&amp;gt; Running in 4ee911d35ca8
Removing intermediate container 4ee911d35ca8
 ---&amp;gt; ae9e35a54368
Successfully built ae9e35a54368
Successfully tagged fufu_db:latest
WARNING: Image &lt;span class="k"&gt;for&lt;/span&gt; service db was built because it did not already exist. To rebuild this image you must use &lt;span class="sb"&gt;`&lt;/span&gt;docker-compose build&lt;span class="sb"&gt;`&lt;/span&gt; or &lt;span class="sb"&gt;`&lt;/span&gt;docker-compose up --build&lt;span class="sb"&gt;`&lt;/span&gt;.
Starting fufu_db ... &lt;span class="k"&gt;done&lt;/span&gt;
Building web
Step &lt;span class="m"&gt;1&lt;/span&gt;/9 : FROM python:3
 ---&amp;gt; 7c5fd2af3815
Step &lt;span class="m"&gt;2&lt;/span&gt;/9 : ENV PYTHONUNBUFFERED &lt;span class="m"&gt;1&lt;/span&gt;
 ---&amp;gt; Running in 1e7af8a959ba
Removing intermediate container 1e7af8a959ba
 ---&amp;gt; 145e89eeda68
Step &lt;span class="m"&gt;3&lt;/span&gt;/9 : RUN mkdir /code
 ---&amp;gt; Running in 8d0cf8c1af79
Removing intermediate container 8d0cf8c1af79
 ---&amp;gt; 50ee8eeb1e91
Step &lt;span class="m"&gt;4&lt;/span&gt;/9 : WORKDIR /code
 ---&amp;gt; Running in 170815b8e495
Removing intermediate container 170815b8e495
 ---&amp;gt; 2bb29d2d6a2d
Step &lt;span class="m"&gt;5&lt;/span&gt;/9 : ADD requirements.txt /code/
 ---&amp;gt; e7d415a86747
Step &lt;span class="m"&gt;6&lt;/span&gt;/9 : RUN pip install -r requirements.txt
 ---&amp;gt; Running in aca007d771ea
Collecting Django&amp;gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.11 &lt;span class="o"&gt;(&lt;/span&gt;from -r requirements.txt &lt;span class="o"&gt;(&lt;/span&gt;line &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
  Downloading https://files.pythonhosted.org/packages/36/50/078a42b4e9bedb94efd3e0278c0eb71650ed9672cdc91bd5542953bec17f/Django-2.1.5-py3-none-any.whl &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;.3MB&lt;span class="o"&gt;)&lt;/span&gt;
Collecting mysqlclient&amp;gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.3.7 &lt;span class="o"&gt;(&lt;/span&gt;from -r requirements.txt &lt;span class="o"&gt;(&lt;/span&gt;line &lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
  Downloading https://files.pythonhosted.org/packages/f7/a2/1230ebbb4b91f42ad6b646e59eb8855559817ad5505d81c1ca2b5a216040/mysqlclient-1.3.14.tar.gz &lt;span class="o"&gt;(&lt;/span&gt;91kB&lt;span class="o"&gt;)&lt;/span&gt;
Collecting mysql-connector-python &lt;span class="o"&gt;(&lt;/span&gt;from -r requirements.txt &lt;span class="o"&gt;(&lt;/span&gt;line &lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
  Downloading https://files.pythonhosted.org/packages/83/e3/a8782597a548cbaab0e4a24060ecd44da7058a376c0d62182b1aa9797a13/mysql_connector_python-8.0.13-cp37-cp37m-manylinux1_x86_64.whl &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;8&lt;/span&gt;.2MB&lt;span class="o"&gt;)&lt;/span&gt;
Collecting pytz &lt;span class="o"&gt;(&lt;/span&gt;from Django&amp;gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.11-&amp;gt;-r requirements.txt &lt;span class="o"&gt;(&lt;/span&gt;line &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
  Downloading https://files.pythonhosted.org/packages/61/28/1d3920e4d1d50b19bc5d24398a7cd85cc7b9a75a490570d5a30c57622d34/pytz-2018.9-py2.py3-none-any.whl &lt;span class="o"&gt;(&lt;/span&gt;510kB&lt;span class="o"&gt;)&lt;/span&gt;
Collecting protobuf&amp;gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;.0.0 &lt;span class="o"&gt;(&lt;/span&gt;from mysql-connector-python-&amp;gt;-r requirements.txt &lt;span class="o"&gt;(&lt;/span&gt;line &lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
  Downloading https://files.pythonhosted.org/packages/3a/30/289ead101f94998d88e8961a3548aea29417ae0057be23972483cddebf4f/protobuf-3.6.1-cp37-cp37m-manylinux1_x86_64.whl &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.1MB&lt;span class="o"&gt;)&lt;/span&gt;
Requirement already satisfied: setuptools in /usr/local/lib/python3.7/site-packages &lt;span class="o"&gt;(&lt;/span&gt;from protobuf&amp;gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;.0.0-&amp;gt;mysql-connector-python-&amp;gt;-r requirements.txt &lt;span class="o"&gt;(&lt;/span&gt;line &lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;40&lt;/span&gt;.6.3&lt;span class="o"&gt;)&lt;/span&gt;
Collecting six&amp;gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.9 &lt;span class="o"&gt;(&lt;/span&gt;from protobuf&amp;gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;.0.0-&amp;gt;mysql-connector-python-&amp;gt;-r requirements.txt &lt;span class="o"&gt;(&lt;/span&gt;line &lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
  Downloading https://files.pythonhosted.org/packages/73/fb/00a976f728d0d1fecfe898238ce23f502a721c0ac0ecfedb80e0d88c64e9/six-1.12.0-py2.py3-none-any.whl
Building wheels &lt;span class="k"&gt;for&lt;/span&gt; collected packages: mysqlclient
  Running setup.py bdist_wheel &lt;span class="k"&gt;for&lt;/span&gt; mysqlclient: started
  Running setup.py bdist_wheel &lt;span class="k"&gt;for&lt;/span&gt; mysqlclient: finished with status &lt;span class="s1"&gt;'done'&lt;/span&gt;
  Stored in directory: /root/.cache/pip/wheels/6d/7d/cb/181963137c414938d4faac9a57c966fb3a6ef675c25641c41a
Successfully built mysqlclient
Installing collected packages: pytz, Django, mysqlclient, six, protobuf, mysql-connector-python
Successfully installed Django-2.1.5 mysql-connector-python-8.0.13 mysqlclient-1.3.14 protobuf-3.6.1 pytz-2018.9 six-1.12.0
Removing intermediate container aca007d771ea
 ---&amp;gt; 950aa5581bf7
Step &lt;span class="m"&gt;7&lt;/span&gt;/9 : ADD . /code/
 ---&amp;gt; 8d7f1f5cc717
Step &lt;span class="m"&gt;8&lt;/span&gt;/9 : RUN mkdir apps
 ---&amp;gt; c46748e3db9b
Step &lt;span class="m"&gt;9&lt;/span&gt;/9 : WORKDIR apps
 ---&amp;gt; c642446504e2
Successfully built c642446504e2
Successfully tagged fufu_web:latest
WARNING: Image &lt;span class="k"&gt;for&lt;/span&gt; service web was built because it did not already exist. To rebuild this image you must use &lt;span class="sb"&gt;`&lt;/span&gt;docker-compose build&lt;span class="sb"&gt;`&lt;/span&gt; or &lt;span class="sb"&gt;`&lt;/span&gt;docker-compose up --build&lt;span class="sb"&gt;`&lt;/span&gt;.
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id9"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id18"&gt;3. 実行後の状態&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-1"&gt;&lt;/a&gt;$ tree fufu
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-2"&gt;&lt;/a&gt;fufu
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-3"&gt;&lt;/a&gt;├── Dockerfile-mysql
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-4"&gt;&lt;/a&gt;├── Dockerfile-web
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-5"&gt;&lt;/a&gt;├── apps
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-6"&gt;&lt;/a&gt;│   ├── config
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-7"&gt;&lt;/a&gt;│   │   ├── __init__.py
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-8"&gt;&lt;/a&gt;│   │   ├── settings.py
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-9"&gt;&lt;/a&gt;│   │   ├── urls.py
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-10"&gt;&lt;/a&gt;│   │   └── wsgi.py
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-11"&gt;&lt;/a&gt;│   └── manage.py
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-12"&gt;&lt;/a&gt;├── docker-compose.yml
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-13"&gt;&lt;/a&gt;├── mysql
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-14"&gt;&lt;/a&gt;│   └── conf.d
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-15"&gt;&lt;/a&gt;│       └── mysql.cnf
&lt;a name="rest_code_438b04b84b9c48ca821a266352d0a991-16"&gt;&lt;/a&gt;└── requirements.txt
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="settings-mysql"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id19"&gt;4. settings に mysql の定義を追記する&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;settings は環境ごとに分けたいので、 &lt;tt class="docutils literal"&gt;apps&lt;/tt&gt; 配下に settings ディレクトリを作ってそこ移動する&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_bc95a75dde9d428dbdc7bd3ec72809ed-1"&gt;&lt;/a&gt;$ tree apps
&lt;a name="rest_code_bc95a75dde9d428dbdc7bd3ec72809ed-2"&gt;&lt;/a&gt;apps
&lt;a name="rest_code_bc95a75dde9d428dbdc7bd3ec72809ed-3"&gt;&lt;/a&gt;├── config
&lt;a name="rest_code_bc95a75dde9d428dbdc7bd3ec72809ed-4"&gt;&lt;/a&gt;│   ├── __init__.py
&lt;a name="rest_code_bc95a75dde9d428dbdc7bd3ec72809ed-5"&gt;&lt;/a&gt;│   ├── urls.py
&lt;a name="rest_code_bc95a75dde9d428dbdc7bd3ec72809ed-6"&gt;&lt;/a&gt;│   └── wsgi.py
&lt;a name="rest_code_bc95a75dde9d428dbdc7bd3ec72809ed-7"&gt;&lt;/a&gt;├── manage.py
&lt;a name="rest_code_bc95a75dde9d428dbdc7bd3ec72809ed-8"&gt;&lt;/a&gt;└── settings
&lt;a name="rest_code_bc95a75dde9d428dbdc7bd3ec72809ed-9"&gt;&lt;/a&gt;    └── local.py  &lt;span class="c1"&gt;# ← ローカル環境用&lt;/span&gt;
&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;settings/local.py&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_9a7cc1a53e6e487cbcae87f1e7502236-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;DATABASES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_9a7cc1a53e6e487cbcae87f1e7502236-2"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'default'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_9a7cc1a53e6e487cbcae87f1e7502236-3"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'ENGINE'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'django.db.backends.mysql'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_9a7cc1a53e6e487cbcae87f1e7502236-4"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'NAME'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'fufu'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_9a7cc1a53e6e487cbcae87f1e7502236-5"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'USER'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'fufu'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_9a7cc1a53e6e487cbcae87f1e7502236-6"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'PASSWORD'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'fufu'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_9a7cc1a53e6e487cbcae87f1e7502236-7"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'HOST'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'db'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="c1"&gt;# ここは docker-compose ファイルに指定したサービス名でないといけないらしい&lt;/span&gt;
&lt;a name="rest_code_9a7cc1a53e6e487cbcae87f1e7502236-8"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'PORT'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3306&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_9a7cc1a53e6e487cbcae87f1e7502236-9"&gt;&lt;/a&gt;    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_9a7cc1a53e6e487cbcae87f1e7502236-10"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="webdb"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id20"&gt;5. web・db コンテナを起動する&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_774dcef32c3c4f53b4b7e4af1c4e4b98-1"&gt;&lt;/a&gt;$ docker-compose up
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id10"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id21"&gt;環境構築メモ&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="default-authentication-plugin-mysql-native-password"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id22"&gt;&lt;strong&gt;※1&lt;/strong&gt;: default-authentication-plugin=mysql_native_password について&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;MySQL 8.0.4 からデフォルトの認証 plugin のデフォルト値が &lt;tt class="docutils literal"&gt;mysql_native_password&lt;/tt&gt; から &lt;tt class="docutils literal"&gt;caching_sha2_password&lt;/tt&gt; へ変更になった&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;そのため、 &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;default-authentication-plugin&lt;/span&gt;&lt;/tt&gt; を指定していない状態で &lt;tt class="docutils literal"&gt;caching_sha2_password&lt;/tt&gt; に対応していないクライアント (今回の場合は &lt;tt class="docutils literal"&gt;web&lt;/tt&gt; ) から接続しようとすると、&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;こんなエラー↓が出て接続できない ( &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;docker-compose&lt;/span&gt; up&lt;/tt&gt; 時にこうなる)&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;web_1  &lt;span class="p"&gt;|&lt;/span&gt; Performing system checks...
web_1  &lt;span class="p"&gt;|&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt; System check identified no issues &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; silenced&lt;span class="o"&gt;)&lt;/span&gt;.
web_1  &lt;span class="p"&gt;|&lt;/span&gt; Unhandled exception in thread started by &amp;lt;&lt;span class="k"&gt;function&lt;/span&gt; check_errors.&amp;lt;locals&amp;gt;.wrapper at 0x7fe293c032f0&amp;gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt; Traceback &lt;span class="o"&gt;(&lt;/span&gt;most recent call last&lt;span class="o"&gt;)&lt;/span&gt;:
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/backends/base/base.py"&lt;/span&gt;, line &lt;span class="m"&gt;216&lt;/span&gt;, in ensure_connection
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     self.connect&lt;span class="o"&gt;()&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/backends/base/base.py"&lt;/span&gt;, line &lt;span class="m"&gt;194&lt;/span&gt;, in connect
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     self.connection &lt;span class="o"&gt;=&lt;/span&gt; self.get_new_connection&lt;span class="o"&gt;(&lt;/span&gt;conn_params&lt;span class="o"&gt;)&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/backends/mysql/base.py"&lt;/span&gt;, line &lt;span class="m"&gt;227&lt;/span&gt;, in get_new_connection
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     &lt;span class="k"&gt;return&lt;/span&gt; Database.connect&lt;span class="o"&gt;(&lt;/span&gt;**conn_params&lt;span class="o"&gt;)&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/MySQLdb/__init__.py"&lt;/span&gt;, line &lt;span class="m"&gt;85&lt;/span&gt;, in Connect
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     &lt;span class="k"&gt;return&lt;/span&gt; Connection&lt;span class="o"&gt;(&lt;/span&gt;*args, **kwargs&lt;span class="o"&gt;)&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/MySQLdb/connections.py"&lt;/span&gt;, line &lt;span class="m"&gt;208&lt;/span&gt;, in __init__
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     super&lt;span class="o"&gt;(&lt;/span&gt;Connection, self&lt;span class="o"&gt;)&lt;/span&gt;.__init__&lt;span class="o"&gt;(&lt;/span&gt;*args, **kwargs2&lt;span class="o"&gt;)&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt; _mysql_exceptions.OperationalError: &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2006&lt;/span&gt;, &lt;span class="s2"&gt;"Authentication plugin 'caching_sha2_password' cannot be loaded: /usr/lib/x86_64-linux-gnu/mariadb18/plugin/caching_sha2_password.so: cannot open shared object file: No such file or directory"&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt; The above exception was the direct cause of the following exception:
web_1  &lt;span class="p"&gt;|&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt; Traceback &lt;span class="o"&gt;(&lt;/span&gt;most recent call last&lt;span class="o"&gt;)&lt;/span&gt;:
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/utils/autoreload.py"&lt;/span&gt;, line &lt;span class="m"&gt;225&lt;/span&gt;, in wrapper
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     fn&lt;span class="o"&gt;(&lt;/span&gt;*args, **kwargs&lt;span class="o"&gt;)&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/core/management/commands/runserver.py"&lt;/span&gt;, line &lt;span class="m"&gt;120&lt;/span&gt;, in inner_run
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     self.check_migrations&lt;span class="o"&gt;()&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/core/management/base.py"&lt;/span&gt;, line &lt;span class="m"&gt;442&lt;/span&gt;, in check_migrations
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     &lt;span class="nv"&gt;executor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; MigrationExecutor&lt;span class="o"&gt;(&lt;/span&gt;connections&lt;span class="o"&gt;[&lt;/span&gt;DEFAULT_DB_ALIAS&lt;span class="o"&gt;])&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/migrations/executor.py"&lt;/span&gt;, line &lt;span class="m"&gt;18&lt;/span&gt;, in __init__
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     self.loader &lt;span class="o"&gt;=&lt;/span&gt; MigrationLoader&lt;span class="o"&gt;(&lt;/span&gt;self.connection&lt;span class="o"&gt;)&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/migrations/loader.py"&lt;/span&gt;, line &lt;span class="m"&gt;49&lt;/span&gt;, in __init__
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     self.build_graph&lt;span class="o"&gt;()&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/migrations/loader.py"&lt;/span&gt;, line &lt;span class="m"&gt;212&lt;/span&gt;, in build_graph
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     self.applied_migrations &lt;span class="o"&gt;=&lt;/span&gt; recorder.applied_migrations&lt;span class="o"&gt;()&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/migrations/recorder.py"&lt;/span&gt;, line &lt;span class="m"&gt;61&lt;/span&gt;, in applied_migrations
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     &lt;span class="k"&gt;if&lt;/span&gt; self.has_table&lt;span class="o"&gt;()&lt;/span&gt;:
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/migrations/recorder.py"&lt;/span&gt;, line &lt;span class="m"&gt;44&lt;/span&gt;, in has_table
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     &lt;span class="k"&gt;return&lt;/span&gt; self.Migration._meta.db_table in self.connection.introspection.table_names&lt;span class="o"&gt;(&lt;/span&gt;self.connection.cursor&lt;span class="o"&gt;())&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/backends/base/base.py"&lt;/span&gt;, line &lt;span class="m"&gt;255&lt;/span&gt;, in cursor
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     &lt;span class="k"&gt;return&lt;/span&gt; self._cursor&lt;span class="o"&gt;()&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/backends/base/base.py"&lt;/span&gt;, line &lt;span class="m"&gt;232&lt;/span&gt;, in _cursor
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     self.ensure_connection&lt;span class="o"&gt;()&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/backends/base/base.py"&lt;/span&gt;, line &lt;span class="m"&gt;216&lt;/span&gt;, in ensure_connection
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     self.connect&lt;span class="o"&gt;()&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/utils.py"&lt;/span&gt;, line &lt;span class="m"&gt;89&lt;/span&gt;, in __exit__
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     raise dj_exc_value.with_traceback&lt;span class="o"&gt;(&lt;/span&gt;traceback&lt;span class="o"&gt;)&lt;/span&gt; from exc_value
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/backends/base/base.py"&lt;/span&gt;, line &lt;span class="m"&gt;216&lt;/span&gt;, in ensure_connection
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     self.connect&lt;span class="o"&gt;()&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/backends/base/base.py"&lt;/span&gt;, line &lt;span class="m"&gt;194&lt;/span&gt;, in connect
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     self.connection &lt;span class="o"&gt;=&lt;/span&gt; self.get_new_connection&lt;span class="o"&gt;(&lt;/span&gt;conn_params&lt;span class="o"&gt;)&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/django/db/backends/mysql/base.py"&lt;/span&gt;, line &lt;span class="m"&gt;227&lt;/span&gt;, in get_new_connection
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     &lt;span class="k"&gt;return&lt;/span&gt; Database.connect&lt;span class="o"&gt;(&lt;/span&gt;**conn_params&lt;span class="o"&gt;)&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/MySQLdb/__init__.py"&lt;/span&gt;, line &lt;span class="m"&gt;85&lt;/span&gt;, in Connect
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     &lt;span class="k"&gt;return&lt;/span&gt; Connection&lt;span class="o"&gt;(&lt;/span&gt;*args, **kwargs&lt;span class="o"&gt;)&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt;   File &lt;span class="s2"&gt;"/usr/local/lib/python3.7/site-packages/MySQLdb/connections.py"&lt;/span&gt;, line &lt;span class="m"&gt;208&lt;/span&gt;, in __init__
web_1  &lt;span class="p"&gt;|&lt;/span&gt;     super&lt;span class="o"&gt;(&lt;/span&gt;Connection, self&lt;span class="o"&gt;)&lt;/span&gt;.__init__&lt;span class="o"&gt;(&lt;/span&gt;*args, **kwargs2&lt;span class="o"&gt;)&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt; django.db.utils.OperationalError: &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2006&lt;/span&gt;, &lt;span class="s2"&gt;"Authentication plugin 'caching_sha2_password' cannot be loaded: /usr/lib/x86_64-linux-gnu/mariadb18/plugin/caching_sha2_password.so: cannot open shared object file: No such file or directory"&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Django から MySQL に接続する際は、 &lt;tt class="docutils literal"&gt;caching_sha2_password&lt;/tt&gt; に対応していない &lt;tt class="docutils literal"&gt;mysqlclient&lt;/tt&gt; を使っているようなので、それでも接続できるように、&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;default-authentication-plugin=mysql_native_password&lt;/span&gt;&lt;/tt&gt; の指定が必要 (なんだと思う)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;後から該当ユーザーの &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;default-authentication-plugin&lt;/span&gt;&lt;/tt&gt; を変更するにはこう↓&lt;/p&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_bd0b1f3598524e878f471d43b7d39c40-1"&gt;&lt;/a&gt;ALTER USER &lt;span class="s1"&gt;'fufu'&lt;/span&gt;
&lt;a name="rest_code_bd0b1f3598524e878f471d43b7d39c40-2"&gt;&lt;/a&gt;  IDENTIFIED WITH mysql_native_password
&lt;a name="rest_code_bd0b1f3598524e878f471d43b7d39c40-3"&gt;&lt;/a&gt;  BY &lt;span class="s1"&gt;'fufu'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="skip-host-cache-skip-name-resolve"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id23"&gt;&lt;strong&gt;※2&lt;/strong&gt;: skip-host-cache, skip-name-resolve について&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Docker Hub の MySQL 公式イメージ &lt;tt class="docutils literal"&gt;mysql:latest&lt;/tt&gt; からコンテナをそのまま起動すると、&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;デフォルト状態で &lt;tt class="docutils literal"&gt;/etc/mysql/conf.d/docker.cnf&lt;/tt&gt; の &lt;tt class="docutils literal"&gt;[mysqld]&lt;/tt&gt; セクションにこのふたつが定義されている&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;2018/12/29 の Update で追加されたように (?) 見える&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;このふたつがないと、こんな感じ↓で延々とエラーになり、 db コンテナが起動できない&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ docker-compose up
Creating network &lt;span class="s2"&gt;"fufu_default"&lt;/span&gt; with the default driver
Creating volume &lt;span class="s2"&gt;"fufu_db-data"&lt;/span&gt; with default driver
Creating fufu_db ... &lt;span class="k"&gt;done&lt;/span&gt;
Creating fufu_web ... &lt;span class="k"&gt;done&lt;/span&gt;
Attaching to fufu_db, fufu_web
db_1   &lt;span class="p"&gt;|&lt;/span&gt; Initializing database
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:51.840057Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:51.840160Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013169&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; initializing of server in progress as process &lt;span class="m"&gt;31&lt;/span&gt;

&lt;span class="o"&gt;(&lt;/span&gt;中略&lt;span class="o"&gt;)&lt;/span&gt;

db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441764Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441886Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013236&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Newly created data directory /var/lib/mysql/ is unusable. You can safely remove it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441926Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:55.045197Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
fufu_db exited with code &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; Initializing database
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:51.840057Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:51.840160Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013169&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; initializing of server in progress as process &lt;span class="m"&gt;31&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441764Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441886Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013236&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Newly created data directory /var/lib/mysql/ is unusable. You can safely remove it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441926Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:55.045197Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:57.680035Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:57.680129Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:55:57.942301Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.026899Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.029078Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031090Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031510Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031827Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031895Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:55:58.032460Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:55:58.032548Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.032782Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.032832Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.032975Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:59.851741Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.499663Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.499753Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:02.758687Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.841674Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.844213Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846178Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846616Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846911Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846948Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:02.847441Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:02.847506Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.847644Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.847671Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.847769Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:04.258157Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
fufu_db exited with code &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; Initializing database
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:51.840057Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:51.840160Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013169&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; initializing of server in progress as process &lt;span class="m"&gt;31&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441764Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441886Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013236&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Newly created data directory /var/lib/mysql/ is unusable. You can safely remove it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441926Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:55.045197Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:57.680035Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:57.680129Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:55:57.942301Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.026899Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.029078Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031090Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031510Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031827Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031895Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:55:58.032460Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:55:58.032548Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.032782Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.032832Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.032975Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:59.851741Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.499663Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.499753Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:02.758687Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.841674Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.844213Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846178Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846616Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846911Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846948Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:02.847441Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:02.847506Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.847644Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.847671Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.847769Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:04.258157Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:06.885337Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:06.885434Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:07.153069Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.236161Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.238540Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.240561Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.240967Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241151Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241186Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:07.241673Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:07.241732Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241871Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241902Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241995Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:09.048029Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.651915Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.652007Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:11.912327Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.994607Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.996767Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.998486Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.998844Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999016Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999047Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:11.999541Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:11.999601Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999753Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999778Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999874Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:13.815771Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
fufu_db exited with code &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; Initializing database
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:51.840057Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:51.840160Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013169&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; initializing of server in progress as process &lt;span class="m"&gt;31&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441764Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441886Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013236&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Newly created data directory /var/lib/mysql/ is unusable. You can safely remove it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441926Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:55.045197Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:57.680035Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:57.680129Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:55:57.942301Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.026899Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.029078Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031090Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031510Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031827Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031895Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:55:58.032460Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:55:58.032548Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.032782Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.032832Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.032975Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:59.851741Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.499663Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.499753Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:02.758687Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.841674Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.844213Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846178Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846616Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846911Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846948Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:02.847441Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:02.847506Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.847644Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.847671Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.847769Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:04.258157Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:06.885337Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:06.885434Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:07.153069Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.236161Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.238540Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.240561Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.240967Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241151Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241186Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:07.241673Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:07.241732Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241871Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241902Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241995Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:09.048029Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.651915Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.652007Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:11.912327Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.994607Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.996767Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.998486Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.998844Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999016Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999047Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:11.999541Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:11.999601Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999753Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999778Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999874Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:13.815771Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.554707Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.554806Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:16.812075Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.895053Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.897313Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.899059Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.899390Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.899657Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.899694Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:16.900291Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:16.900354Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.900626Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.900654Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.900826Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:18.720970Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.019641Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.019736Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:23.282147Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.310746Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.317461Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.319319Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.320932Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.321207Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.321237Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:23.321817Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:23.321890Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.322074Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.322097Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.322247Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:25.183207Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
fufu_db exited with code &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; Initializing database
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:51.840057Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:51.840160Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013169&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; initializing of server in progress as process &lt;span class="m"&gt;31&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441764Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441886Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013236&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Newly created data directory /var/lib/mysql/ is unusable. You can safely remove it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:53.441926Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:55.045197Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:57.680035Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:57.680129Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:55:57.942301Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.026899Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.029078Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031090Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031510Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031827Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.031895Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:55:58.032460Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:55:58.032548Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.032782Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.032832Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:58.032975Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:55:59.851741Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.499663Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.499753Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:02.758687Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.841674Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.844213Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846178Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846616Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846911Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.846948Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:02.847441Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:02.847506Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.847644Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.847671Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:02.847769Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:04.258157Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:06.885337Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:06.885434Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:07.153069Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.236161Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.238540Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.240561Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.240967Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241151Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241186Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:07.241673Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:07.241732Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241871Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241902Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:07.241995Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:09.048029Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.651915Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.652007Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:11.912327Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.994607Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.996767Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.998486Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.998844Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999016Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999047Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:11.999541Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:11.999601Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999753Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999778Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:11.999874Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:13.815771Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.554707Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.554806Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:16.812075Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.895053Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.897313Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.899059Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.899390Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.899657Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.899694Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:16.900291Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:16.900354Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.900626Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.900654Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:16.900826Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:18.720970Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.019641Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.019736Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:23.282147Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.310746Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.317461Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.319319Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.320932Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.321207Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.321237Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:23.321817Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:23.321890Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.322074Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.322097Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:23.322247Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:25.183207Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:32.657838Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:32.657925Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:32.919082Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:33.002849Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:33.005166Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:33.006884Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:33.007190Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:33.007365Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:33.007399Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:33.007897Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:33.007959Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:33.008121Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:33.008148Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:33.008248Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:34.819455Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:48.777104Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011070&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="s1"&gt;'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it'&lt;/span&gt; is deprecated and will be removed in a future release.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:48.777198Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010116&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt; starting as process &lt;span class="m"&gt;1&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; mysqld: Table &lt;span class="s1"&gt;'mysql.plugin'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:49.036122Z 0 [ERROR] [MY-010735] [Server] Can'&lt;/span&gt;t open the mysql.plugin table. Please run mysql_upgrade to create it.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:49.117775Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010015&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Repl&lt;span class="o"&gt;]&lt;/span&gt; Gtid table is not ready to be used. Table &lt;span class="s1"&gt;'mysql.gtid_executed'&lt;/span&gt; cannot be opened.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:49.120188Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010068&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; CA certificate ca.pem is self signed.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:49.122183Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-011810&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Insecure configuration &lt;span class="k"&gt;for&lt;/span&gt; --pid-file: Location &lt;span class="s1"&gt;'/var/run/mysqld'&lt;/span&gt; in the path is accessible to all OS users. Consider choosing a different directory.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:49.122556Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010441&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Failed to open optimizer cost constant tables
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:49.122852Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-001146 - Table '&lt;/span&gt;mysql.component&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:49.122890Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-013129&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; A message intended &lt;span class="k"&gt;for&lt;/span&gt; a client cannot be sent there as no client-session is attached. Therefore, we&lt;span class="s1"&gt;'re sending the information to the error-log instead: MY-003543 - The mysql.component table is missing or has an incorrect definition.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:49.123460Z 0 [ERROR] [MY-010326] [Server] Fatal error: Can'&lt;/span&gt;t open and lock privilege tables: Table &lt;span class="s1"&gt;'mysql.user'&lt;/span&gt; doesn&lt;span class="s1"&gt;'t exist&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2019-01-20T11:56:49.123544Z 0 [Warning] [MY-010952] [Server] The privilege system failed to initialize correctly. If you have upgraded your server, make sure you'&lt;/span&gt;re executing mysql_upgrade to correct the issue.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:49.123830Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Warning&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010357&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Can&lt;span class="s1"&gt;'t open and lock time zone table: Table '&lt;/span&gt;mysql.time_zone_leap_second&lt;span class="s1"&gt;' doesn'&lt;/span&gt;t exist trying to live without them
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:49.123863Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010361&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Fatal error: Illegal or unknown default &lt;span class="nb"&gt;time&lt;/span&gt; zone &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:49.124062Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;ERROR&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010119&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; Aborting
db_1   &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="m"&gt;2019&lt;/span&gt;-01-20T11:56:50.944319Z &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;System&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;MY-010910&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;Server&lt;span class="o"&gt;]&lt;/span&gt; /usr/sbin/mysqld: Shutdown &lt;span class="nb"&gt;complete&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;mysqld &lt;span class="m"&gt;8&lt;/span&gt;.0.13&lt;span class="o"&gt;)&lt;/span&gt;  MySQL Community Server - GPL.
fufu_db exited with code &lt;span class="m"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;わたしの場合は、 docker-compose ファイルでこう↓しているので、デフォルト状態では存在した &lt;tt class="docutils literal"&gt;/etc/mysql/conf.d/docker.cnf&lt;/tt&gt; を抹殺してしまっている&lt;/p&gt;
&lt;pre class="code yaml"&gt;&lt;a name="rest_code_480fe531ccdc42c99dfa293783264a16-1"&gt;&lt;/a&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_480fe531ccdc42c99dfa293783264a16-2"&gt;&lt;/a&gt;  &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"./mysql/conf.d:/etc/mysql/conf.d"&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;しかたがないので、自分の &lt;tt class="docutils literal"&gt;mysql.cnf&lt;/tt&gt; に転記することにした&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;このふたつがないとどうしてこのエラーになるのかわたしにはわかりません、だって全然関係ないこと言ってるように見えるのに...&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;このふたつの説明はここです: &lt;a class="reference external" href="https://dev.mysql.com/doc/refman/8.0/en/host-cache.html"&gt;https://dev.mysql.com/doc/refman/8.0/en/host-cache.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id11"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id24"&gt;使い方メモ&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="image"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/#id25"&gt;再び image ビルドしたくなったら&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_1e928a47131e41bcb329aa192ead2db5-1"&gt;&lt;/a&gt;$ docker-compose run web django-admin.py startproject config .
&lt;/pre&gt;&lt;p&gt;とか&lt;/p&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_e22de61f419f446f975af77455082dc5-1"&gt;&lt;/a&gt;$ docker-compose run web django-admin.py startproject config .
&lt;a name="rest_code_e22de61f419f446f975af77455082dc5-2"&gt;&lt;/a&gt;$ docker-compose up
&lt;/pre&gt;&lt;p&gt;したあとに、再び image ビルドしたくなったら、&lt;/p&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_4005060e4692422f8f36a9619110c9a6-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# web をビルド&lt;/span&gt;
&lt;a name="rest_code_4005060e4692422f8f36a9619110c9a6-2"&gt;&lt;/a&gt;$ docker-compose build web
&lt;a name="rest_code_4005060e4692422f8f36a9619110c9a6-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_4005060e4692422f8f36a9619110c9a6-4"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# db をビルド&lt;/span&gt;
&lt;a name="rest_code_4005060e4692422f8f36a9619110c9a6-5"&gt;&lt;/a&gt;$ docker-compose build db
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>docker</category><guid>https://32imuf.com/docker/create-django-env-with-docker-compose-mysql-2/</guid><pubDate>Sat, 19 Jan 2019 15:00:00 GMT</pubDate></item><item><title>Docker Compose で Django/MySQL 環境をつくる</title><link>https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id2" id="id12"&gt;リファレンス・ガイド&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id3" id="id13"&gt;環境構築&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id4" id="id14"&gt;最初の1回だけ実行&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id5" id="id15"&gt;2回目以降&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id6" id="id16"&gt;ディレクトリ構成&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id7" id="id17"&gt;設定ファイル&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id8" id="id18"&gt;使い方メモ&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id9" id="id19"&gt;イメージビルドからやり直したい&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#volume" id="id20"&gt;volume は消さない限り再利用される&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#web" id="id21"&gt;web のほうのコンテナだけ再起動したいとき&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id10" id="id22"&gt;web のほうのコンテナに入る&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#mysql" id="id23"&gt;mysql のほうのコンテナに入る&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id11" id="id24"&gt;mysql に入る&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#todo" id="id25"&gt;TODO&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id12"&gt;リファレンス・ガイド&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://docs.docker.com/compose/compose-file/"&gt;Compose file version 3 reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://hub.docker.com/_/mysql/"&gt;Docker Hub の MySQL 公式イメージぺージ&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;docker-compose&lt;/span&gt;&lt;/tt&gt; ファイルの書き方見本とか、 Environment Variables の一覧とかが載っていた&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://dev.mysql.com/doc/refman/8.0/en/"&gt;MySQL 8.0 Reference Manual&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;MySQL 自体のリファレンス&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://dev.mysql.com/doc/refman/8.0/en/environment-variables.html"&gt;MySQL Program Environment Variables&lt;/a&gt; :
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;docker-compose&lt;/span&gt;&lt;/tt&gt; ファイルの &lt;tt class="docutils literal"&gt;environment&lt;/tt&gt; 部分に書けるやつを探すときに使った&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://dev.mysql.com/doc/refman/8.0/en/server-options.html"&gt;Server Command Options&lt;/a&gt; :
&lt;tt class="docutils literal"&gt;mysql.cnf&lt;/tt&gt; に書けるやつ、 &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;docker-compose&lt;/span&gt;&lt;/tt&gt; ファイルの &lt;tt class="docutils literal"&gt;command&lt;/tt&gt; 部分に書けるやつを探すときに使った&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html"&gt;Server System Variables&lt;/a&gt; :
&lt;tt class="docutils literal"&gt;mysql.cnf&lt;/tt&gt; に書けるやつを探すときに使った&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://pypi.org/project/mysql-connector-python/"&gt;PyPI の mysql-connector-python のページ&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;MySQL の driver。これが Oracle 純正のものらしい。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://dev.mysql.com/doc/connector-python/en/"&gt;MySQL Connector/Python Developer Guide&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;mysql-connector-python のガイドページ。使い方や見本がいろいろ載っている。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://pypi.org/project/mysqlclient/"&gt;PyPI の mysqlclient のページ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.1/ref/databases/#mysql-notes"&gt;Django で MySQL を使うときは見てねページ&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;Django のほうの説明を読んだら、 &lt;tt class="docutils literal"&gt;mysqlclient&lt;/tt&gt; がおすすめ、かつ、 &lt;cite&gt;Django requires mysqlclient 1.3.7 or later.&lt;/cite&gt; と書いてある。&lt;/li&gt;
&lt;li&gt;とりあえず &lt;tt class="docutils literal"&gt;mysqlclient&lt;/tt&gt; と &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;mysql-connector-python&lt;/span&gt;&lt;/tt&gt; を両方入れてみる。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id13"&gt;環境構築&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id4"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id14"&gt;最初の1回だけ実行&lt;/a&gt;&lt;/h3&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;web・db の docker image をビルド -&amp;gt; web で startproject する。&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_1cb23970eb29432797921a112dca8168-1"&gt;&lt;/a&gt;$ docker-compose --pull&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt; run web django-admin.py startproject fu .
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;--pull=true&lt;/span&gt;&lt;/tt&gt; : FROM に指定したベースイメージがローカルにすでに存在していても、改めて Docker Hub に取得しにいく&lt;/li&gt;
&lt;li&gt;↑今やったら使えなかった。最新イメージを再取得するには、どうすればいいんだろう。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;settings に MySQL の設定を書き足す&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_3b57aded265d439b846c8d58b5a09635-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;DATABASES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_3b57aded265d439b846c8d58b5a09635-2"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'default'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_3b57aded265d439b846c8d58b5a09635-3"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'ENGINE'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'django.db.backends.mysql'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3b57aded265d439b846c8d58b5a09635-4"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'NAME'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'fu'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3b57aded265d439b846c8d58b5a09635-5"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'USER'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'fu'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3b57aded265d439b846c8d58b5a09635-6"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'PASSWORD'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'fu'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3b57aded265d439b846c8d58b5a09635-7"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'HOST'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'db'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3b57aded265d439b846c8d58b5a09635-8"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'PORT'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3306&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3b57aded265d439b846c8d58b5a09635-9"&gt;&lt;/a&gt;    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_3b57aded265d439b846c8d58b5a09635-10"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;docker-compose up して、 web・db コンテナを起動する&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_399f7fefa76e48e0a7450bba44d95d38-1"&gt;&lt;/a&gt;$ docker-compose up
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="id5"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id15"&gt;2回目以降&lt;/a&gt;&lt;/h3&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;docker-compose up して mysql・web コンテナを起動する。&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_81bce5382cad40c5ba17e5c424431a80-1"&gt;&lt;/a&gt;$ docker-compose up
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;安全にシャットダウン。コンテナの停止と削除。&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_8cbc4a483d01403caca9a4d0546e0e17-1"&gt;&lt;/a&gt;$ docker-compose down
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="id6"&gt;
&lt;span id="config-files"&gt;&lt;/span&gt;&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id16"&gt;ディレクトリ構成&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-1"&gt;&lt;/a&gt;$ tree fu
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-3"&gt;&lt;/a&gt;fu
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-4"&gt;&lt;/a&gt;├── Dockerfile-mysql
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-5"&gt;&lt;/a&gt;├── Dockerfile-web
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-6"&gt;&lt;/a&gt;├── docker-compose.yml
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-7"&gt;&lt;/a&gt;├── fu
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-8"&gt;&lt;/a&gt;│   ├── __init__.py
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-9"&gt;&lt;/a&gt;│   ├── urls.py
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-10"&gt;&lt;/a&gt;│   └── wsgi.py
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-11"&gt;&lt;/a&gt;├── manage.py
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-12"&gt;&lt;/a&gt;├── mysql
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-13"&gt;&lt;/a&gt;│   └── conf.d
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-14"&gt;&lt;/a&gt;│       └── mysql.cnf
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-15"&gt;&lt;/a&gt;├── requirements.txt
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-16"&gt;&lt;/a&gt;└── settings
&lt;a name="rest_code_084fea8587f14f10a15a72c703128ea2-17"&gt;&lt;/a&gt;    └── _.py
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id7"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id17"&gt;設定ファイル&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;fu/docker-compose.yml&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'3'&lt;/span&gt;

&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fu_db&lt;/span&gt;
    &lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.&lt;/span&gt;
      &lt;span class="nt"&gt;dockerfile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Dockerfile-mysql&lt;/span&gt;
    &lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;always&lt;/span&gt;
    &lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"db-data:/var/lib/mysql"&lt;/span&gt;
      &lt;span class="c1"&gt;# mysql のカスタム設定ファイルもホスト &amp;lt;-&amp;gt; コンテナ間で同期しておく (編集するのに便利だから)&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"./mysql/conf.d:/etc/mysql/conf.d"&lt;/span&gt;
    &lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fu&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_DATABASE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fu&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_USER&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fu&lt;/span&gt;
      &lt;span class="nt"&gt;MYSQL_PASSWORD&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fu&lt;/span&gt;

  &lt;span class="nt"&gt;web&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;fu_web&lt;/span&gt;
    &lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.&lt;/span&gt;
      &lt;span class="nt"&gt;dockerfile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Dockerfile-web&lt;/span&gt;
    &lt;span class="nt"&gt;command&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;python3 manage.py runserver 0.0.0.0:8000 --settings=settings._&lt;/span&gt;
    &lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.:/code&lt;/span&gt;
    &lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"6560:8000"&lt;/span&gt;
    &lt;span class="nt"&gt;depends_on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;db&lt;/span&gt;

&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;db-data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;fu/Dockerfile-web&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="s"&gt; python:3&lt;/span&gt;
&lt;span class="k"&gt;ENV&lt;/span&gt; PYTHONUNBUFFERED &lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; mkdir /code
&lt;span class="k"&gt;WORKDIR&lt;/span&gt;&lt;span class="s"&gt; /code&lt;/span&gt;
&lt;span class="k"&gt;ADD&lt;/span&gt; requirements.txt /code/
&lt;span class="k"&gt;RUN&lt;/span&gt; pip install -r requirements.txt
&lt;span class="k"&gt;ADD&lt;/span&gt; . /code/
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;fu/Dockerfile-mysql&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="s"&gt; mysql:latest&lt;/span&gt;
&lt;span class="c"&gt;# locales をインストールする&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; apt-get clean &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y locales locales-all
&lt;span class="c"&gt;# locale 定義ファイルをコンパイルする&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; locale-gen ja_JP.UTF-8
&lt;span class="c"&gt;# 日本語を設定する TODO: もしかして LANG だけでいいのかも...?&lt;/span&gt;
&lt;span class="k"&gt;ENV&lt;/span&gt; LANG ja_JP.UTF-8
&lt;span class="k"&gt;ENV&lt;/span&gt; LANGUAGE ja_JP:en
&lt;span class="k"&gt;ENV&lt;/span&gt; LC_ALL ja_JP.UTF-8
&lt;span class="c"&gt;# タイムゾーンに日本を設定する&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; ln -sf /usr/share/zoneinfo/Japan /etc/localtime
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;fu/requirements.txt&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Django&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mf"&gt;1.11&lt;/span&gt;
&lt;span class="n"&gt;mysqlclient&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mf"&gt;1.3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;
&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;connector&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;fu/mysql/conf.d/mysql.cnf&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Copyright (c) 2015, 2016, Oracle and/or its affiliates. All rights reserved.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# This program is free software; you can redistribute it and/or modify&lt;/span&gt;
&lt;span class="c1"&gt;# it under the terms of the GNU General Public License, version 2.0,&lt;/span&gt;
&lt;span class="c1"&gt;# as published by the Free Software Foundation.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# This program is also distributed with certain software (including&lt;/span&gt;
&lt;span class="c1"&gt;# but not limited to OpenSSL) that is licensed under separate terms,&lt;/span&gt;
&lt;span class="c1"&gt;# as designated in a particular file or component or in included license&lt;/span&gt;
&lt;span class="c1"&gt;# documentation.  The authors of MySQL hereby grant you an additional&lt;/span&gt;
&lt;span class="c1"&gt;# permission to link the program and your derivative works with the&lt;/span&gt;
&lt;span class="c1"&gt;# separately licensed software that they have included with MySQL.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# This program is distributed in the hope that it will be useful,&lt;/span&gt;
&lt;span class="c1"&gt;# but WITHOUT ANY WARRANTY; without even the implied warranty of&lt;/span&gt;
&lt;span class="c1"&gt;# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&lt;/span&gt;
&lt;span class="c1"&gt;# GNU General Public License, version 2.0, for more details.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# You should have received a copy of the GNU General Public License&lt;/span&gt;
&lt;span class="c1"&gt;# along with this program; if not, write to the Free Software&lt;/span&gt;
&lt;span class="c1"&gt;# Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA&lt;/span&gt;

&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# The MySQL  Client configuration file.&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# For explanations see&lt;/span&gt;
&lt;span class="c1"&gt;# http://dev.mysql.com/doc/mysql/en/server-system-variables.html&lt;/span&gt;


&lt;span class="na"&gt;[mysqld]  # mysqlサーバーの設定&lt;/span&gt;
&lt;span class="na"&gt;default-authentication-plugin&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;mysql_native_password&lt;/span&gt;
&lt;span class="c1"&gt;# Collation (文字照合順) の設定: https://mysqlserverteam.com/mysql-8-0-kana-sensitive-collation-for-japanese-ja_jp/&lt;/span&gt;
&lt;span class="na"&gt;collation-server&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;utf8mb4_ja_0900_as_cs_ks&lt;/span&gt;
&lt;span class="c1"&gt;# サーバー側の文字コードの設定: "Default Value (&amp;gt;= 8.0.1)	utf8mb4" だけれどもなんとなく念のため指定&lt;/span&gt;
&lt;span class="na"&gt;character-set-server&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;utf8mb4&lt;/span&gt;
&lt;span class="c1"&gt;# time_zone の設定: https://dev.mysql.com/doc/refman/8.0/en/server-options.html#option_mysqld_default-time-zone&lt;/span&gt;
&lt;span class="na"&gt;default-time-zone&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;'Asia/Tokyo'&lt;/span&gt;

&lt;span class="na"&gt;[client]  # mysqlクライアントの設定&lt;/span&gt;
&lt;span class="c1"&gt;# クライアント側の文字コードの設定&lt;/span&gt;
&lt;span class="c1"&gt;# utf8mb4: A UTF-8 encoding of the Unicode character set using one to four bytes per character.&lt;/span&gt;
&lt;span class="na"&gt;default-character-set&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;utf8mb4&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;MySQL デフォルトの設定ファイルは &lt;tt class="docutils literal"&gt;/etc/mysql/my.cnf&lt;/tt&gt; の模様。 MySQL 公式イメージからコンテナを作成すると、初期状態で &lt;tt class="docutils literal"&gt;/etc/mysql/my.cnf&lt;/tt&gt; 中に&lt;/p&gt;
&lt;pre class="code cfg"&gt;&lt;a name="rest_code_3903d54a8a094655b34207a4d16c3a99-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# Custom config should go here&lt;/span&gt;
&lt;a name="rest_code_3903d54a8a094655b34207a4d16c3a99-2"&gt;&lt;/a&gt;&lt;span class="na"&gt;!includedir /etc/mysql/conf.d/&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;と書いてあるので、言に従い自分用設定は &lt;tt class="docutils literal"&gt;/etc/mysql/conf.d/&lt;/tt&gt; に記述した。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id8"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id18"&gt;使い方メモ&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id9"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id19"&gt;イメージビルドからやり直したい&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;こんなときは...&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;requirements.txt にライブラリを書き足したとき&lt;/li&gt;
&lt;li&gt;Dockerfile を更新したとき&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_f0ce9ee05d834cbeaa12684b655f87be-1"&gt;&lt;/a&gt;$ docker-compose build
&lt;a name="rest_code_f0ce9ee05d834cbeaa12684b655f87be-2"&gt;&lt;/a&gt;$ docker-compose up
&lt;/pre&gt;&lt;p&gt;もしくは、&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_32a40d524d4c45d29f70522d57337080-1"&gt;&lt;/a&gt;$ docker-compose up --build
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="volume"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id20"&gt;volume は消さない限り再利用される&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code yaml"&gt;&lt;a name="rest_code_5efa7c7a699f44c4986826cd65437585-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# fu/docker-compose.yml&lt;/span&gt;
&lt;a name="rest_code_5efa7c7a699f44c4986826cd65437585-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_5efa7c7a699f44c4986826cd65437585-3"&gt;&lt;/a&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_5efa7c7a699f44c4986826cd65437585-4"&gt;&lt;/a&gt;  &lt;span class="nt"&gt;db-data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code bash"&gt;&lt;a name="rest_code_c862d17ac1af4210a1c48e60ad993a55-1"&gt;&lt;/a&gt;$ docker volume ls
&lt;a name="rest_code_c862d17ac1af4210a1c48e60ad993a55-2"&gt;&lt;/a&gt;DRIVER              VOLUME NAME
&lt;a name="rest_code_c862d17ac1af4210a1c48e60ad993a55-3"&gt;&lt;/a&gt;&lt;span class="nb"&gt;local&lt;/span&gt;               fu_db-data  &lt;span class="c1"&gt;# こういう名前がついている&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="web"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id21"&gt;web のほうのコンテナだけ再起動したいとき&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_211b15d20eab4d30ac016b6d3a30b019-1"&gt;&lt;/a&gt;$ docker container restart fu_web
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id10"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id22"&gt;web のほうのコンテナに入る&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;VM の中に入るのと同じような気持ち。&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-1"&gt;&lt;/a&gt;$ docker container &lt;span class="nb"&gt;exec&lt;/span&gt; -it fu_web bash
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-2"&gt;&lt;/a&gt;root@eb1ab9a6dbdb:/code#
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-4"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 現在のロケール設定を確認する&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-5"&gt;&lt;/a&gt;root@eb1ab9a6dbdb:/code# locale
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-6"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;C.UTF-8
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-7"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LANGUAGE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-8"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_CTYPE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"C.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-9"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_NUMERIC&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"C.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-10"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_TIME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"C.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-11"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_COLLATE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"C.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-12"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_MONETARY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"C.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-13"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_MESSAGES&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"C.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-14"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_PAPER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"C.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-15"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_NAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"C.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-16"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_ADDRESS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"C.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-17"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_TELEPHONE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"C.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-18"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_MEASUREMENT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"C.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-19"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_IDENTIFICATION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"C.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_654bd601da404946b847dae6a92f6346-20"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_ALL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="mysql"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id23"&gt;mysql のほうのコンテナに入る&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# mysql のコンテナに入る&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-2"&gt;&lt;/a&gt;$ docker container &lt;span class="nb"&gt;exec&lt;/span&gt; -it fu_db bash
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-4"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 現在のロケール設定を確認する&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-5"&gt;&lt;/a&gt;root@dcc8b4d2cd21:/# locale
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-6"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ja_JP.UTF-8
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-7"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LANGUAGE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ja_JP:en
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-8"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_CTYPE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ja_JP.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-9"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_NUMERIC&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ja_JP.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-10"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_TIME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ja_JP.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-11"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_COLLATE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ja_JP.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-12"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_MONETARY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ja_JP.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-13"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_MESSAGES&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ja_JP.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-14"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_PAPER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ja_JP.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-15"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_NAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ja_JP.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-16"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_ADDRESS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ja_JP.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-17"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_TELEPHONE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ja_JP.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-18"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_MEASUREMENT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ja_JP.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-19"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_IDENTIFICATION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ja_JP.UTF-8"&lt;/span&gt;
&lt;a name="rest_code_4d8ae125fe674f86ae87c32d3e032395-20"&gt;&lt;/a&gt;&lt;span class="nv"&gt;LC_ALL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ja_JP.UTF-8
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id11"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id24"&gt;mysql に入る&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# mysql のコンテナに入る&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-2"&gt;&lt;/a&gt;$ docker container &lt;span class="nb"&gt;exec&lt;/span&gt; -it fu_db bash
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-3"&gt;&lt;/a&gt;root@6ba1661872de:/#
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-5"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# mysql にログインする&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-6"&gt;&lt;/a&gt;$ mysql -h localhost -u fu -p fu
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-8"&gt;&lt;/a&gt;Enter password: &lt;span class="o"&gt;(&lt;/span&gt;compose ファイルに定義したパスワード&lt;span class="o"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-9"&gt;&lt;/a&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-10"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 現在の Character Sets 設定を表示する&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-11"&gt;&lt;/a&gt;mysql&amp;gt; SHOW VARIABLES LIKE &lt;span class="s2"&gt;"char%"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-12"&gt;&lt;/a&gt;+--------------------------+--------------------------------+
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-13"&gt;&lt;/a&gt;&lt;span class="p"&gt;|&lt;/span&gt; Variable_name            &lt;span class="p"&gt;|&lt;/span&gt; Value                          &lt;span class="p"&gt;|&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-14"&gt;&lt;/a&gt;+--------------------------+--------------------------------+
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-15"&gt;&lt;/a&gt;&lt;span class="p"&gt;|&lt;/span&gt; character_set_client     &lt;span class="p"&gt;|&lt;/span&gt; utf8mb4                        &lt;span class="p"&gt;|&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-16"&gt;&lt;/a&gt;&lt;span class="p"&gt;|&lt;/span&gt; character_set_connection &lt;span class="p"&gt;|&lt;/span&gt; utf8mb4                        &lt;span class="p"&gt;|&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-17"&gt;&lt;/a&gt;&lt;span class="p"&gt;|&lt;/span&gt; character_set_database   &lt;span class="p"&gt;|&lt;/span&gt; utf8mb4                        &lt;span class="p"&gt;|&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-18"&gt;&lt;/a&gt;&lt;span class="p"&gt;|&lt;/span&gt; character_set_filesystem &lt;span class="p"&gt;|&lt;/span&gt; binary                         &lt;span class="p"&gt;|&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-19"&gt;&lt;/a&gt;&lt;span class="p"&gt;|&lt;/span&gt; character_set_results    &lt;span class="p"&gt;|&lt;/span&gt; utf8mb4                        &lt;span class="p"&gt;|&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-20"&gt;&lt;/a&gt;&lt;span class="p"&gt;|&lt;/span&gt; character_set_server     &lt;span class="p"&gt;|&lt;/span&gt; utf8mb4                        &lt;span class="p"&gt;|&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-21"&gt;&lt;/a&gt;&lt;span class="p"&gt;|&lt;/span&gt; character_set_system     &lt;span class="p"&gt;|&lt;/span&gt; utf8                           &lt;span class="p"&gt;|&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-22"&gt;&lt;/a&gt;&lt;span class="p"&gt;|&lt;/span&gt; character_sets_dir       &lt;span class="p"&gt;|&lt;/span&gt; /usr/share/mysql-8.0/charsets/ &lt;span class="p"&gt;|&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-23"&gt;&lt;/a&gt;+--------------------------+--------------------------------+
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-24"&gt;&lt;/a&gt;&lt;span class="m"&gt;8&lt;/span&gt; rows in &lt;span class="nb"&gt;set&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.01 sec&lt;span class="o"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-25"&gt;&lt;/a&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-26"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 現在のタイムゾーン設定を表示する&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-27"&gt;&lt;/a&gt;mysql&amp;gt; SHOW VARIABLES LIKE &lt;span class="s1"&gt;'%time_zone%'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-28"&gt;&lt;/a&gt;+------------------+------------+
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-29"&gt;&lt;/a&gt;&lt;span class="p"&gt;|&lt;/span&gt; Variable_name    &lt;span class="p"&gt;|&lt;/span&gt; Value      &lt;span class="p"&gt;|&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-30"&gt;&lt;/a&gt;+------------------+------------+
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-31"&gt;&lt;/a&gt;&lt;span class="p"&gt;|&lt;/span&gt; system_time_zone &lt;span class="p"&gt;|&lt;/span&gt; JST        &lt;span class="p"&gt;|&lt;/span&gt;  &lt;span class="c1"&gt;# MySQL が動いているコンテナ (Debian) のシステムタイムゾーン、Dockerfile-mysql で設定した&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-32"&gt;&lt;/a&gt;&lt;span class="p"&gt;|&lt;/span&gt; time_zone        &lt;span class="p"&gt;|&lt;/span&gt; Asia/Tokyo &lt;span class="p"&gt;|&lt;/span&gt;  &lt;span class="c1"&gt;# mysql.cnf で設定した MySQL サーバー側のタイムゾーン&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-33"&gt;&lt;/a&gt;+------------------+------------+
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-34"&gt;&lt;/a&gt;&lt;span class="m"&gt;2&lt;/span&gt; rows in &lt;span class="nb"&gt;set&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.01 sec&lt;span class="o"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-35"&gt;&lt;/a&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-36"&gt;&lt;/a&gt;mysql&amp;gt; status
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-37"&gt;&lt;/a&gt;--------------
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-38"&gt;&lt;/a&gt;mysql  Ver &lt;span class="m"&gt;8&lt;/span&gt;.0.13 &lt;span class="k"&gt;for&lt;/span&gt; Linux on x86_64 &lt;span class="o"&gt;(&lt;/span&gt;MySQL Community Server - GPL&lt;span class="o"&gt;)&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-39"&gt;&lt;/a&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-40"&gt;&lt;/a&gt;Connection id:                &lt;span class="m"&gt;11&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-41"&gt;&lt;/a&gt;Current database:     fu
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-42"&gt;&lt;/a&gt;Current user:         fu@localhost
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-43"&gt;&lt;/a&gt;SSL:                  Not in use
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-44"&gt;&lt;/a&gt;Current pager:                stdout
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-45"&gt;&lt;/a&gt;Using outfile:                &lt;span class="s1"&gt;''&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-46"&gt;&lt;/a&gt;Using delimiter:      &lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-47"&gt;&lt;/a&gt;Server version:               &lt;span class="m"&gt;8&lt;/span&gt;.0.13 MySQL Community Server - GPL
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-48"&gt;&lt;/a&gt;Protocol version:     &lt;span class="m"&gt;10&lt;/span&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-49"&gt;&lt;/a&gt;Connection:           Localhost via UNIX socket
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-50"&gt;&lt;/a&gt;Server characterset:  utf8mb4
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-51"&gt;&lt;/a&gt;Db     characterset:  utf8mb4
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-52"&gt;&lt;/a&gt;Client characterset:  utf8mb4
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-53"&gt;&lt;/a&gt;Conn.  characterset:  utf8mb4
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-54"&gt;&lt;/a&gt;UNIX socket:          /var/run/mysqld/mysqld.sock
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-55"&gt;&lt;/a&gt;Uptime:                       &lt;span class="m"&gt;2&lt;/span&gt; hours &lt;span class="m"&gt;9&lt;/span&gt; min &lt;span class="m"&gt;49&lt;/span&gt; sec
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-56"&gt;&lt;/a&gt;
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-57"&gt;&lt;/a&gt;Threads: &lt;span class="m"&gt;3&lt;/span&gt;  Questions: &lt;span class="m"&gt;40&lt;/span&gt;  Slow queries: &lt;span class="m"&gt;0&lt;/span&gt;  Opens: &lt;span class="m"&gt;189&lt;/span&gt;  Flush tables: &lt;span class="m"&gt;2&lt;/span&gt;  Open tables: &lt;span class="m"&gt;163&lt;/span&gt;  Queries per second avg: &lt;span class="m"&gt;0&lt;/span&gt;.005
&lt;a name="rest_code_c3c81149a671409fabd888c67d128ddb-58"&gt;&lt;/a&gt;--------------
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="todo"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/#id25"&gt;TODO&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;web コンテナのほうの locale と タイムゾーンは db コンテナと合わせなくて大丈夫なんだろうか...&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>docker</category><guid>https://32imuf.com/docker/create-django-env-with-docker-compose-mysql/</guid><pubDate>Fri, 04 Jan 2019 15:00:00 GMT</pubDate></item><item><title>Docker Compose で Volumes をつかう</title><link>https://32imuf.com/docker/use-volumes-with-docker-compose/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;p&gt;&lt;/p&gt;
&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#id2" id="id4"&gt;リファレンス&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#id3" id="id5"&gt;手順&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#volume" id="id6"&gt;1. volume を作成する&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#docker-compose-yml-volume" id="id7"&gt;2. &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;docker-compose.yml&lt;/span&gt;&lt;/tt&gt; に作成した volume を指定する&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#settings-py-database" id="id8"&gt;3. &lt;tt class="docutils literal"&gt;settings.py&lt;/tt&gt; に DATABASE を定義する&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#docker" id="id9"&gt;4. Docker コンテナを実行する&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#db" id="id10"&gt;5. DB コンテナのなかに入って、テーブルを作成 &amp;amp; データを挿入する&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#shutdown" id="id11"&gt;6. 安全に shutdown する&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#docker-compose-up" id="id12"&gt;7. 再度 &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;docker-compose&lt;/span&gt; up&lt;/tt&gt; して、先ほど登録したテーブル &amp;amp; データを見てみる&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#id4"&gt;リファレンス&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://docs.docker.com/storage/volumes/"&gt;Use volumes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://docs.docker.com/storage/volumes/#create-and-manage-volumes"&gt;Create and manage volumes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://docs.docker.com/compose/compose-file/#external"&gt;https://docs.docker.com/compose/compose-file/#external&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://docs.docker.com/compose/compose-file/#environment"&gt;https://docs.docker.com/compose/compose-file/#environment&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.postgresqltutorial.com/psql-commands/"&gt;http://www.postgresqltutorial.com/psql-commands/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#id5"&gt;手順&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;tt class="docutils literal"&gt;web&lt;/tt&gt; のイメージをビルド...するところは、
&lt;a class="reference external" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql"&gt;Docker Compose で Django/PostgreSQL 環境をつくる&lt;/a&gt;
を参照のこと。&lt;/p&gt;
&lt;div class="section" id="volume"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#id6"&gt;1. volume を作成する&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;db-data&lt;/span&gt;&lt;/tt&gt; という名前の volume を作成する。&lt;/p&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_4ff607f68a7e4b3d9eb19b9ccd04ab49-1"&gt;&lt;/a&gt;$ docker volume create db-data
&lt;a name="rest_code_4ff607f68a7e4b3d9eb19b9ccd04ab49-2"&gt;&lt;/a&gt;db-data
&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;volumes を一覧表示する。&lt;/p&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_b503ead70cd54902a5abe4b5757b1929-1"&gt;&lt;/a&gt;$ docker volume ls
&lt;a name="rest_code_b503ead70cd54902a5abe4b5757b1929-2"&gt;&lt;/a&gt;DRIVER              VOLUME NAME
&lt;a name="rest_code_b503ead70cd54902a5abe4b5757b1929-3"&gt;&lt;/a&gt;&lt;span class="nb"&gt;local&lt;/span&gt;               db-data
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;volume を調べる。&lt;/p&gt;
&lt;pre class="code shell"&gt;&lt;a name="rest_code_5c98f7ffb2c540f18a78fd8ce1d71060-1"&gt;&lt;/a&gt;$ docker volume inspect db-data
&lt;a name="rest_code_5c98f7ffb2c540f18a78fd8ce1d71060-2"&gt;&lt;/a&gt;&lt;span class="o"&gt;[&lt;/span&gt;
&lt;a name="rest_code_5c98f7ffb2c540f18a78fd8ce1d71060-3"&gt;&lt;/a&gt;    &lt;span class="o"&gt;{&lt;/span&gt;
&lt;a name="rest_code_5c98f7ffb2c540f18a78fd8ce1d71060-4"&gt;&lt;/a&gt;        &lt;span class="s2"&gt;"CreatedAt"&lt;/span&gt;: &lt;span class="s2"&gt;"2018-12-02T13:09:48Z"&lt;/span&gt;,
&lt;a name="rest_code_5c98f7ffb2c540f18a78fd8ce1d71060-5"&gt;&lt;/a&gt;        &lt;span class="s2"&gt;"Driver"&lt;/span&gt;: &lt;span class="s2"&gt;"local"&lt;/span&gt;,
&lt;a name="rest_code_5c98f7ffb2c540f18a78fd8ce1d71060-6"&gt;&lt;/a&gt;        &lt;span class="s2"&gt;"Labels"&lt;/span&gt;: &lt;span class="o"&gt;{}&lt;/span&gt;,
&lt;a name="rest_code_5c98f7ffb2c540f18a78fd8ce1d71060-7"&gt;&lt;/a&gt;        &lt;span class="s2"&gt;"Mountpoint"&lt;/span&gt;: &lt;span class="s2"&gt;"/var/lib/docker/volumes/db-data/_data"&lt;/span&gt;,
&lt;a name="rest_code_5c98f7ffb2c540f18a78fd8ce1d71060-8"&gt;&lt;/a&gt;        &lt;span class="s2"&gt;"Name"&lt;/span&gt;: &lt;span class="s2"&gt;"db-data"&lt;/span&gt;,
&lt;a name="rest_code_5c98f7ffb2c540f18a78fd8ce1d71060-9"&gt;&lt;/a&gt;        &lt;span class="s2"&gt;"Options"&lt;/span&gt;: &lt;span class="o"&gt;{}&lt;/span&gt;,
&lt;a name="rest_code_5c98f7ffb2c540f18a78fd8ce1d71060-10"&gt;&lt;/a&gt;        &lt;span class="s2"&gt;"Scope"&lt;/span&gt;: &lt;span class="s2"&gt;"local"&lt;/span&gt;
&lt;a name="rest_code_5c98f7ffb2c540f18a78fd8ce1d71060-11"&gt;&lt;/a&gt;    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;a name="rest_code_5c98f7ffb2c540f18a78fd8ce1d71060-12"&gt;&lt;/a&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;今作った &lt;tt class="docutils literal"&gt;volume&lt;/tt&gt; はこの絵↓の真ん中のものである。&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="/images/docker/use-volumes-with-docker-compose/use-volumes.png" src="https://32imuf.com/images/docker/use-volumes-with-docker-compose/use-volumes.png"&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external" href="https://docs.docker.com/storage/volumes/"&gt;https://docs.docker.com/storage/volumes/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="docker-compose-yml-volume"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#id7"&gt;2. &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;docker-compose.yml&lt;/span&gt;&lt;/tt&gt; に作成した volume を指定する&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'3'&lt;/span&gt;

&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;postgres:latest&lt;/span&gt;
    &lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="c1"&gt;# コンテナの `/var/lib/postgresql/data` を、volume `db-data` にマウントする。&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"db-data:/var/lib/postgresql/data"&lt;/span&gt;
    &lt;span class="c1"&gt;# 環境変数を追加する&lt;/span&gt;
    &lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="c1"&gt;# postgres のパスワードを設定する&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;POSTGRES_PASSWORD=postgres&lt;/span&gt;
  &lt;span class="nt"&gt;web&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.&lt;/span&gt;
      &lt;span class="nt"&gt;dockerfile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;Dockerfile-web&lt;/span&gt;
    &lt;span class="nt"&gt;command&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;python3 manage.py runserver 0.0.0.0:8000&lt;/span&gt;
    &lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.:/code&lt;/span&gt;
    &lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"3236:8000"&lt;/span&gt;
    &lt;span class="nt"&gt;depends_on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;db&lt;/span&gt;

&lt;span class="c1"&gt;# volumes を定義する&lt;/span&gt;
&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="c1"&gt;# volume の名前を指定&lt;/span&gt;
  &lt;span class="nt"&gt;db-data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="c1"&gt;# Compose の外ですでに作成済みの volume を指定する場合は ture を設定する。&lt;/span&gt;
    &lt;span class="c1"&gt;# そうすると、 docker-compose up 時に Compose は volume を作成しようとしません。&lt;/span&gt;
    &lt;span class="c1"&gt;# かつ、指定した volume が存在しないとエラーを raise します。&lt;/span&gt;
    &lt;span class="nt"&gt;external&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;external: true&lt;/tt&gt; を書かないと、 &lt;tt class="docutils literal"&gt;$ &lt;span class="pre"&gt;docker-compose&lt;/span&gt; up&lt;/tt&gt; 時に 1. で作った &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;db-data&lt;/span&gt;&lt;/tt&gt; とは別に
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;{プロジェクト名}_db-data&lt;/span&gt;&lt;/tt&gt; という感じの名前の volume が作られて、そちらが使われる。&lt;/li&gt;
&lt;li&gt;それでもまあかまわないけれど。今のところは。&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="settings-py-database"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#id8"&gt;3. &lt;tt class="docutils literal"&gt;settings.py&lt;/tt&gt; に DATABASE を定義する&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_b28d9bf737544f14b48d09ccba8457d4-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;DATABASES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_b28d9bf737544f14b48d09ccba8457d4-2"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'default'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_b28d9bf737544f14b48d09ccba8457d4-3"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'ENGINE'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'django.db.backends.postgresql'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b28d9bf737544f14b48d09ccba8457d4-4"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'NAME'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'postgres'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b28d9bf737544f14b48d09ccba8457d4-5"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'USER'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'postgres'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b28d9bf737544f14b48d09ccba8457d4-6"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'PASSWORD'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'postgres'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="c1"&gt;# パスワードを追加した&lt;/span&gt;
&lt;a name="rest_code_b28d9bf737544f14b48d09ccba8457d4-7"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'HOST'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'db'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b28d9bf737544f14b48d09ccba8457d4-8"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'PORT'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;5432&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b28d9bf737544f14b48d09ccba8457d4-9"&gt;&lt;/a&gt;    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_b28d9bf737544f14b48d09ccba8457d4-10"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="docker"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#id9"&gt;4. Docker コンテナを実行する&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_e798072060464c5894f6d24da1809969-1"&gt;&lt;/a&gt;$ docker-compose up
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="db"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#id10"&gt;5. DB コンテナのなかに入って、テーブルを作成 &amp;amp; データを挿入する&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;1). &lt;tt class="docutils literal"&gt;db&lt;/tt&gt; コンテナのなかに入る&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_8098d4a4cef24553b7ce43af191aec34-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# コンテナをシェル経由で操作する&lt;/span&gt;
&lt;a name="rest_code_8098d4a4cef24553b7ce43af191aec34-2"&gt;&lt;/a&gt;$ docker container &lt;span class="nb"&gt;exec&lt;/span&gt; -it fffff_db_1 sh
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;2). postgres に接続する&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code postgres"&gt;&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;-- postgres に接続するその１&lt;/span&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-2"&gt;&lt;/a&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;psql&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;U&lt;/span&gt; &lt;span class="n"&gt;postgres&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="mf"&gt;127.0.0.1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mf"&gt;5432&lt;/span&gt; &lt;span class="n"&gt;postgres&lt;/span&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;psql&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;11.1&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Debian&lt;/span&gt; &lt;span class="mf"&gt;11.1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.&lt;/span&gt;&lt;span class="n"&gt;pgdg90&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;Type&lt;/span&gt; &lt;span class="s s-Name"&gt;"help"&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-6"&gt;&lt;/a&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-8"&gt;&lt;/a&gt;&lt;span class="c1"&gt;-- postgres に接続するその２&lt;/span&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-9"&gt;&lt;/a&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;psql&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="n"&gt;postgres&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;U&lt;/span&gt;  &lt;span class="n"&gt;postgres&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;W&lt;/span&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-10"&gt;&lt;/a&gt;&lt;span class="k"&gt;Password&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-11"&gt;&lt;/a&gt;&lt;span class="n"&gt;psql&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;11.1&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Debian&lt;/span&gt; &lt;span class="mf"&gt;11.1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.&lt;/span&gt;&lt;span class="n"&gt;pgdg90&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-12"&gt;&lt;/a&gt;&lt;span class="k"&gt;Type&lt;/span&gt; &lt;span class="s s-Name"&gt;"help"&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-13"&gt;&lt;/a&gt;
&lt;a name="rest_code_a4750cc8e2bb4eb9af51759fd13cca77-14"&gt;&lt;/a&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;3). テーブルを作成し、データを挿入する&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code postgres"&gt;&lt;a name="rest_code_07247f4e256643c180da0e49930ffdec-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;fruits&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_07247f4e256643c180da0e49930ffdec-2"&gt;&lt;/a&gt;   &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="nb"&gt;SERIAL&lt;/span&gt; &lt;span class="k"&gt;PRIMARY&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_07247f4e256643c180da0e49930ffdec-3"&gt;&lt;/a&gt;   &lt;span class="k"&gt;name&lt;/span&gt; &lt;span class="nb"&gt;VARCHAR&lt;/span&gt; &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;
&lt;a name="rest_code_07247f4e256643c180da0e49930ffdec-4"&gt;&lt;/a&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_07247f4e256643c180da0e49930ffdec-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;fruits&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'orange'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_07247f4e256643c180da0e49930ffdec-6"&gt;&lt;/a&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;fruits&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="k"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;DEFAULT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'apple'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_07247f4e256643c180da0e49930ffdec-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_07247f4e256643c180da0e49930ffdec-8"&gt;&lt;/a&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;q&lt;/span&gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class="section" id="shutdown"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#id11"&gt;6. 安全に shutdown する&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;コンテナは停止・削除される。&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_906e5cba3ffc4964ababe9013dcaadbe-1"&gt;&lt;/a&gt;$ docker-compose down
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="docker-compose-up"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/use-volumes-with-docker-compose/#id12"&gt;7. 再度 &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;docker-compose&lt;/span&gt; up&lt;/tt&gt; して、先ほど登録したテーブル &amp;amp; データを見てみる&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;先ほど作成したテーブルとデータがありました。&lt;/p&gt;
&lt;pre class="code console"&gt;&lt;a name="rest_code_7d5e3eed4a8f4b8e88442494f897e8fa-1"&gt;&lt;/a&gt;&lt;span class="gp"&gt;$&lt;/span&gt; docker-compose up
&lt;a name="rest_code_7d5e3eed4a8f4b8e88442494f897e8fa-2"&gt;&lt;/a&gt;&lt;span class="gp"&gt;$&lt;/span&gt; docker container &lt;span class="nb"&gt;exec&lt;/span&gt; -it fffff_db_1 sh
&lt;/pre&gt;&lt;pre class="code postgres"&gt;&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-1"&gt;&lt;/a&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;psql&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;U&lt;/span&gt; &lt;span class="n"&gt;postgres&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="mf"&gt;127.0.0.1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="mf"&gt;5432&lt;/span&gt; &lt;span class="n"&gt;postgres&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;psql&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;11.1&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Debian&lt;/span&gt; &lt;span class="mf"&gt;11.1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.&lt;/span&gt;&lt;span class="n"&gt;pgdg90&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;Type&lt;/span&gt; &lt;span class="s s-Name"&gt;"help"&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;dt&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-6"&gt;&lt;/a&gt;         &lt;span class="n"&gt;List&lt;/span&gt; &lt;span class="k"&gt;of&lt;/span&gt; &lt;span class="n"&gt;relations&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-7"&gt;&lt;/a&gt; &lt;span class="k"&gt;Schema&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="k"&gt;Name&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="k"&gt;Type&lt;/span&gt;  &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="k"&gt;Owner&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-8"&gt;&lt;/a&gt;&lt;span class="c1"&gt;--------+--------+-------+----------&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-9"&gt;&lt;/a&gt; &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;fruits&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="k"&gt;table&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;postgres&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-10"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt; &lt;span class="k"&gt;row&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-11"&gt;&lt;/a&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-12"&gt;&lt;/a&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;fruits&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-13"&gt;&lt;/a&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="k"&gt;name&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-14"&gt;&lt;/a&gt;&lt;span class="c1"&gt;----+--------&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-15"&gt;&lt;/a&gt;  &lt;span class="mf"&gt;1&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;orange&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-16"&gt;&lt;/a&gt;  &lt;span class="mf"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;apple&lt;/span&gt;
&lt;a name="rest_code_f05667e5402949af9e12ddd6ee11e7c6-17"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2&lt;/span&gt; &lt;span class="k"&gt;rows&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>docker</category><guid>https://32imuf.com/docker/use-volumes-with-docker-compose/</guid><pubDate>Sat, 01 Dec 2018 15:00:00 GMT</pubDate></item><item><title>Docker Compose で Django/PostgreSQL 環境をつくる</title><link>https://32imuf.com/docker/create-django-env-with-docker-compose-psql/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;p&gt;&lt;/p&gt;
&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql/#id2" id="id6"&gt;ガイド&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql/#id3" id="id7"&gt;リファレンス&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql/#id4" id="id8"&gt;インストール&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql/#id5" id="id9"&gt;つくりかた&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql/#id6"&gt;ガイド&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://docs.docker.com/compose/django/"&gt;Quickstart: Compose and Django&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql/#id7"&gt;リファレンス&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://docs.docker.com/engine/reference/builder/"&gt;Dockerfile reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://docs.docker.com/compose/compose-file/"&gt;Compose file version 3 reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://docs.docker.com/compose/reference/run/"&gt;https://docs.docker.com/compose/reference/run/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id4"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql/#id8"&gt;インストール&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="https://docs.docker.com/docker-for-mac/install/"&gt;Install Docker Desktop for Mac&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id5"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/docker/create-django-env-with-docker-compose-psql/#id9"&gt;つくりかた&lt;/a&gt;&lt;/h2&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;Dockerfile&lt;/tt&gt; を準備する。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;# ベースイメージ&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="s"&gt; python:3&lt;/span&gt;
&lt;span class="c"&gt;# Docker コンテナ内で使える環境変数を指定&lt;/span&gt;
&lt;span class="k"&gt;ENV&lt;/span&gt; PYTHONUNBUFFERED &lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="c"&gt;# イメージビルド時に mkdir /code する&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; mkdir /code
&lt;span class="c"&gt;# この後の指令は /code で実行する&lt;/span&gt;
&lt;span class="k"&gt;WORKDIR&lt;/span&gt;&lt;span class="s"&gt; /code&lt;/span&gt;
&lt;span class="c"&gt;# requirements.txt をイメージ内の /code/ ディレクトリにコピーする&lt;/span&gt;
&lt;span class="k"&gt;ADD&lt;/span&gt; requirements.txt /code/
&lt;span class="c"&gt;# イメージビルド時に requirements.txt から pip install する&lt;/span&gt;
&lt;span class="k"&gt;RUN&lt;/span&gt; pip install -r requirements.txt
&lt;span class="c"&gt;# カレントディレクトリ配下を /code 配下にコピーする&lt;/span&gt;
&lt;span class="k"&gt;ADD&lt;/span&gt; . /code/
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;requirements.txt&lt;/tt&gt; を準備する。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Django&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mf"&gt;1.8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mf"&gt;2.0&lt;/span&gt;
&lt;span class="n"&gt;psycopg2&lt;/span&gt;
&lt;span class="c1"&gt;# psycopg2: Python-PostgreSQL Database Adapter https://pypi.org/project/psycopg2/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;docker-compose.yml&lt;/span&gt;&lt;/tt&gt; を準備する。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'3'&lt;/span&gt;

&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;postgres&lt;/span&gt;
  &lt;span class="nt"&gt;web&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="c1"&gt;# Dockerfile が存在するディレクトリの相対パスを指定する&lt;/span&gt;
    &lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.&lt;/span&gt;
    &lt;span class="c1"&gt;# コンテナ実行時に実行するコマンド&lt;/span&gt;
    &lt;span class="nt"&gt;command&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;python3 manage.py runserver 0.0.0.0:8000&lt;/span&gt;
    &lt;span class="c1"&gt;# コンテナの /code を、ホストのカレントディレクトリにマウントする&lt;/span&gt;
    &lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;.:/code&lt;/span&gt;
    &lt;span class="c1"&gt;# ポートフォワーディング&lt;/span&gt;
    &lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="c1"&gt;# ホストのポート:コンテナのポート&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="s"&gt;"3236:8000"&lt;/span&gt;
    &lt;span class="c1"&gt;# 依存するものをここに書く。docker-compose up 時に、 web の前に db をスタートしてくれる。&lt;/span&gt;
    &lt;span class="nt"&gt;depends_on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;db&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;startproject する (Docker イメージビルドもされる)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# docker-compose.yml に指定したとおり、カレントディレクトリの Dockerfile から `web` のイメージをビルド&lt;/span&gt;
&lt;span class="c1"&gt;# `web` の中で django-admin.py startproject fff を実行する&lt;/span&gt;
$ sudo docker-compose run web django-admin.py startproject fff .
&lt;span class="c1"&gt;# mac のパスワードを入力する&lt;/span&gt;
Password:
Creating network &lt;span class="s2"&gt;"fff_default"&lt;/span&gt; with the default driver
Pulling db &lt;span class="o"&gt;(&lt;/span&gt;postgres:&lt;span class="o"&gt;)&lt;/span&gt;...
latest: Pulling from library/postgres
a5a6f2f73cd8: Already exists
e50fbea8af5a: Pulling fs layer
73b4855ad326: Pulling fs layer
39616673f22b: Pulling fs layer
94e1b79f69ee: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
c91e4af2ff8e: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
16ba314c612f: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
89011a174cee: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
d82b02de73e7: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
e3026dc5acbe: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
225d0988f8bb: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
89efa60266d6: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
64e6167259ce: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
8f44f8f48bbe: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
Digest: sha256:40b48cf04185e69c5a9183a986fcbbfd105e5991a70b1980e9a641b53ba5ead7
Status: Downloaded newer image &lt;span class="k"&gt;for&lt;/span&gt; postgres:latest
Creating fff_db_1 ... &lt;span class="k"&gt;done&lt;/span&gt;
Building web
Step &lt;span class="m"&gt;1&lt;/span&gt;/7 : FROM python:3
&lt;span class="m"&gt;3&lt;/span&gt;: Pulling from library/python
54f7e8ac135a: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
d6341e30912f: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
087a57faf949: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
5d71636fb824: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
0c1db9598990: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
bfb904e99f24: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
78a3d3a96a32: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
885a0ed92c89: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
dd7cc9ace242: Pull &lt;span class="nb"&gt;complete&lt;/span&gt;
Digest: sha256:3870d35b962a943df72d948580fc66ceaaee1c4fbd205930f32e0f0760eb1077
Status: Downloaded newer image &lt;span class="k"&gt;for&lt;/span&gt; python:3
 ---&amp;gt; 1e80caffd59e
Step &lt;span class="m"&gt;2&lt;/span&gt;/7 : ENV PYTHONUNBUFFERED &lt;span class="m"&gt;1&lt;/span&gt;
 ---&amp;gt; Running in 8b36b0f52978
Removing intermediate container 8b36b0f52978
 ---&amp;gt; d8c31fcb6021
Step &lt;span class="m"&gt;3&lt;/span&gt;/7 : RUN mkdir /code
 ---&amp;gt; Running in 4f2b5e392870
Removing intermediate container 4f2b5e392870
 ---&amp;gt; 9c8ee756f336
Step &lt;span class="m"&gt;4&lt;/span&gt;/7 : WORKDIR /code
 ---&amp;gt; Running in de4383433c19
Removing intermediate container de4383433c19
 ---&amp;gt; 3641af229774
Step &lt;span class="m"&gt;5&lt;/span&gt;/7 : ADD requirements.txt /code/
 ---&amp;gt; ef8667808ce1
Step &lt;span class="m"&gt;6&lt;/span&gt;/7 : RUN pip install -r requirements.txt
 ---&amp;gt; Running in 1da62dd84073
Collecting Django&amp;lt;&lt;span class="m"&gt;2&lt;/span&gt;.1,&amp;gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.8 &lt;span class="o"&gt;(&lt;/span&gt;from -r requirements.txt &lt;span class="o"&gt;(&lt;/span&gt;line &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
  Downloading https://files.pythonhosted.org/packages/6c/9d/c0feec696b815708354a2fd06ae0f51330a15043822a29bc8be2f185d9fe/Django-2.0.9-py3-none-any.whl &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;.1MB&lt;span class="o"&gt;)&lt;/span&gt;
Collecting psycopg2 &lt;span class="o"&gt;(&lt;/span&gt;from -r requirements.txt &lt;span class="o"&gt;(&lt;/span&gt;line &lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
  Downloading https://files.pythonhosted.org/packages/90/aa/b033c170c9bd505c7e4d1560f5dbb35ca2a7e928ac03c384f93d0cdaf6a7/psycopg2-2.7.6.1-cp37-cp37m-manylinux1_x86_64.whl &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.7MB&lt;span class="o"&gt;)&lt;/span&gt;
Collecting pytz &lt;span class="o"&gt;(&lt;/span&gt;from Django&amp;lt;&lt;span class="m"&gt;2&lt;/span&gt;.1,&amp;gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.8-&amp;gt;-r requirements.txt &lt;span class="o"&gt;(&lt;/span&gt;line &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
  Downloading https://files.pythonhosted.org/packages/f8/0e/2365ddc010afb3d79147f1dd544e5ee24bf4ece58ab99b16fbb465ce6dc0/pytz-2018.7-py2.py3-none-any.whl &lt;span class="o"&gt;(&lt;/span&gt;506kB&lt;span class="o"&gt;)&lt;/span&gt;
Installing collected packages: pytz, Django, psycopg2
Successfully installed Django-2.0.9 psycopg2-2.7.6.1 pytz-2018.7
Removing intermediate container 1da62dd84073
 ---&amp;gt; d0afed5e3cf7
Step &lt;span class="m"&gt;7&lt;/span&gt;/7 : ADD . /code/
 ---&amp;gt; 5a39d311c84c
Successfully built 5a39d311c84c
Successfully tagged fff_web:latest
WARNING: Image &lt;span class="k"&gt;for&lt;/span&gt; service web was built because it did not already exist. To rebuild this image you must use &lt;span class="sb"&gt;`&lt;/span&gt;docker-compose build&lt;span class="sb"&gt;`&lt;/span&gt; or &lt;span class="sb"&gt;`&lt;/span&gt;docker-compose up --build&lt;span class="sb"&gt;`&lt;/span&gt;.
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;tt class="docutils literal"&gt;settings.py&lt;/tt&gt; に DATABASE を定義する。&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_a872f903c7c443d3b7b294f4f5ee2d7b-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;DATABASES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_a872f903c7c443d3b7b294f4f5ee2d7b-2"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'default'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_a872f903c7c443d3b7b294f4f5ee2d7b-3"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'ENGINE'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'django.db.backends.postgresql'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_a872f903c7c443d3b7b294f4f5ee2d7b-4"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'NAME'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'postgres'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_a872f903c7c443d3b7b294f4f5ee2d7b-5"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'USER'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'postgres'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_a872f903c7c443d3b7b294f4f5ee2d7b-6"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'HOST'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'db'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_a872f903c7c443d3b7b294f4f5ee2d7b-7"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'PORT'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;5432&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_a872f903c7c443d3b7b294f4f5ee2d7b-8"&gt;&lt;/a&gt;    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_a872f903c7c443d3b7b294f4f5ee2d7b-9"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Docker コンテナ (db と web) を実行する&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ docker-compose up
fff_db_1 is up-to-date
Creating fff_web_1 ... &lt;span class="k"&gt;done&lt;/span&gt;
Attaching to fff_db_1, fff_web_1
db_1   &lt;span class="p"&gt;|&lt;/span&gt; The files belonging to this database system will be owned by user &lt;span class="s2"&gt;"postgres"&lt;/span&gt;.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; This user must also own the server process.
db_1   &lt;span class="p"&gt;|&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; The database cluster will be initialized with locale &lt;span class="s2"&gt;"en_US.utf8"&lt;/span&gt;.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; The default database encoding has accordingly been &lt;span class="nb"&gt;set&lt;/span&gt; to &lt;span class="s2"&gt;"UTF8"&lt;/span&gt;.
db_1   &lt;span class="p"&gt;|&lt;/span&gt; The default text search configuration will be &lt;span class="nb"&gt;set&lt;/span&gt; to &lt;span class="s2"&gt;"english"&lt;/span&gt;.
db_1   &lt;span class="p"&gt;|&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; Data page checksums are disabled.
db_1   &lt;span class="p"&gt;|&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; fixing permissions on existing directory /var/lib/postgresql/data ... ok
db_1   &lt;span class="p"&gt;|&lt;/span&gt; creating subdirectories ... ok
db_1   &lt;span class="p"&gt;|&lt;/span&gt; selecting default max_connections ... &lt;span class="m"&gt;100&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; selecting default shared_buffers ... 128MB
db_1   &lt;span class="p"&gt;|&lt;/span&gt; selecting dynamic shared memory implementation ... posix
db_1   &lt;span class="p"&gt;|&lt;/span&gt; creating configuration files ... ok
db_1   &lt;span class="p"&gt;|&lt;/span&gt; running bootstrap script ... ok
db_1   &lt;span class="p"&gt;|&lt;/span&gt; performing post-bootstrap initialization ... ok
db_1   &lt;span class="p"&gt;|&lt;/span&gt; syncing data to disk ... ok
db_1   &lt;span class="p"&gt;|&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; Success. You can now start the database server using:
db_1   &lt;span class="p"&gt;|&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; WARNING: enabling &lt;span class="s2"&gt;"trust"&lt;/span&gt; authentication &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nb"&gt;local&lt;/span&gt; connections
db_1   &lt;span class="p"&gt;|&lt;/span&gt; You can change this by editing pg_hba.conf or using the option -A, or
db_1   &lt;span class="p"&gt;|&lt;/span&gt; --auth-local and --auth-host, the next &lt;span class="nb"&gt;time&lt;/span&gt; you run initdb.
db_1   &lt;span class="p"&gt;|&lt;/span&gt;     pg_ctl -D /var/lib/postgresql/data -l logfile start
db_1   &lt;span class="p"&gt;|&lt;/span&gt;
db_1   &lt;span class="p"&gt;|&lt;/span&gt; ****************************************************
db_1   &lt;span class="p"&gt;|&lt;/span&gt; WARNING: No password has been &lt;span class="nb"&gt;set&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; the database.
db_1   &lt;span class="p"&gt;|&lt;/span&gt;          This will allow anyone with access to the
db_1   &lt;span class="p"&gt;|&lt;/span&gt;          Postgres port to access your database. In
db_1   &lt;span class="p"&gt;|&lt;/span&gt;          Docker&lt;span class="s1"&gt;'s default configuration, this is&lt;/span&gt;
&lt;span class="s1"&gt;db_1   |          effectively any other container on the same&lt;/span&gt;
&lt;span class="s1"&gt;db_1   |          system.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   |&lt;/span&gt;
&lt;span class="s1"&gt;db_1   |          Use "-e POSTGRES_PASSWORD=password" to set&lt;/span&gt;
&lt;span class="s1"&gt;db_1   |          it in "docker run".&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | ****************************************************&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | waiting for server to start....2018-11-26 14:35:32.757 UTC [45] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2018-11-26 14:35:32.772 UTC [46] LOG:  database system was shut down at 2018-11-26 14:35:32 UTC&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2018-11-26 14:35:32.777 UTC [45] LOG:  database system is ready to accept connections&lt;/span&gt;
&lt;span class="s1"&gt;db_1   |  done&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | server started&lt;/span&gt;
&lt;span class="s1"&gt;db_1   |&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*&lt;/span&gt;
&lt;span class="s1"&gt;db_1   |&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | waiting for server to shut down....2018-11-26 14:35:32.851 UTC [45] LOG:  received fast shutdown request&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2018-11-26 14:35:32.855 UTC [45] LOG:  aborting any active transactions&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2018-11-26 14:35:32.858 UTC [45] LOG:  background worker "logical replication launcher" (PID 52) exited with exit code 1&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2018-11-26 14:35:32.860 UTC [47] LOG:  shutting down&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2018-11-26 14:35:32.882 UTC [45] LOG:  database system is shut down&lt;/span&gt;
&lt;span class="s1"&gt;db_1   |  done&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | server stopped&lt;/span&gt;
&lt;span class="s1"&gt;db_1   |&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | PostgreSQL init process complete; ready for start up.&lt;/span&gt;
&lt;span class="s1"&gt;db_1   |&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2018-11-26 14:35:32.970 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2018-11-26 14:35:32.972 UTC [1] LOG:  listening on IPv6 address "::", port 5432&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2018-11-26 14:35:32.977 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2018-11-26 14:35:32.994 UTC [54] LOG:  database system was shut down at 2018-11-26 14:35:32 UTC&lt;/span&gt;
&lt;span class="s1"&gt;db_1   | 2018-11-26 14:35:33.002 UTC [1] LOG:  database system is ready to accept connections&lt;/span&gt;
&lt;span class="s1"&gt;web_1  | /usr/local/lib/python3.7/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use "pip install psycopg2-binary" instead. For details see: &amp;lt;http://initd.org/psycopg/docs/install.html#binary-install-from-pypi&amp;gt;.&lt;/span&gt;
&lt;span class="s1"&gt;web_1  |   """)&lt;/span&gt;
&lt;span class="s1"&gt;web_1  | /usr/local/lib/python3.7/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use "pip install psycopg2-binary" instead. For details see: &amp;lt;http://initd.org/psycopg/docs/install.html#binary-install-from-pypi&amp;gt;.&lt;/span&gt;
&lt;span class="s1"&gt;web_1  |   """)&lt;/span&gt;
&lt;span class="s1"&gt;web_1  | Performing system checks...&lt;/span&gt;
&lt;span class="s1"&gt;web_1  |&lt;/span&gt;
&lt;span class="s1"&gt;web_1  | System check identified no issues (0 silenced).&lt;/span&gt;
&lt;span class="s1"&gt;web_1  |&lt;/span&gt;
&lt;span class="s1"&gt;web_1  | You have 14 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.&lt;/span&gt;
&lt;span class="s1"&gt;web_1  | Run '&lt;/span&gt;python manage.py migrate&lt;span class="s1"&gt;' to apply them.&lt;/span&gt;
&lt;span class="s1"&gt;web_1  | November 26, 2018 - 14:44:40&lt;/span&gt;
&lt;span class="s1"&gt;web_1  | Django version 2.0.9, using settings '&lt;/span&gt;fff.settings&lt;span class="err"&gt;'&lt;/span&gt;
web_1  &lt;span class="p"&gt;|&lt;/span&gt; Starting development server at http://0.0.0.0:8000/
web_1  &lt;span class="p"&gt;|&lt;/span&gt; Quit the server with CONTROL-C.
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;アクセスする。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a class="reference external" href="http://localhost:3236/"&gt;http://localhost:3236/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;div class="figure"&gt;
&lt;img alt="/images/docker/create-django-env-with-docker-compose-psql/hello-django.png" src="https://32imuf.com/images/docker/create-django-env-with-docker-compose-psql/hello-django.png"&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;ol class="arabic" start="8"&gt;
&lt;li&gt;&lt;p class="first"&gt;実行中の コンテナを list する。&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_2c451ac3b6344a6fa2735a80c83d0785-1"&gt;&lt;/a&gt;$ docker ps
&lt;a name="rest_code_2c451ac3b6344a6fa2735a80c83d0785-2"&gt;&lt;/a&gt;CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
&lt;a name="rest_code_2c451ac3b6344a6fa2735a80c83d0785-3"&gt;&lt;/a&gt;e95174b2be87        fff_web             &lt;span class="s2"&gt;"python3 manage.py r…"&lt;/span&gt;   &lt;span class="m"&gt;32&lt;/span&gt; minutes ago      Up &lt;span class="m"&gt;32&lt;/span&gt; minutes       &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:3236-&amp;gt;8000/tcp   fff_web_1
&lt;a name="rest_code_2c451ac3b6344a6fa2735a80c83d0785-4"&gt;&lt;/a&gt;2994f0092cd4        postgres            &lt;span class="s2"&gt;"docker-entrypoint.s…"&lt;/span&gt;   &lt;span class="m"&gt;41&lt;/span&gt; minutes ago      Up &lt;span class="m"&gt;41&lt;/span&gt; minutes       &lt;span class="m"&gt;5432&lt;/span&gt;/tcp                 fff_db_1
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;安全に shutdown する。&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_cef5bbf3959f476ea26bc7d1876fca86-1"&gt;&lt;/a&gt;$ docker-compose down
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>docker</category><guid>https://32imuf.com/docker/create-django-env-with-docker-compose-psql/</guid><pubDate>Sun, 25 Nov 2018 15:00:00 GMT</pubDate></item></channel></rss>