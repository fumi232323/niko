<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ふみのて (djangoについての文書)</title><link>https://32imuf.com/</link><description></description><atom:link href="https://32imuf.com/tags/django.xml" rel="self" type="application/rss+xml"></atom:link><language>ja</language><copyright>Contents © 2020 &lt;a href="mailto:fumi232323fumi2016@gmail.com"&gt;fumi23&lt;/a&gt; </copyright><lastBuildDate>Mon, 13 Jan 2020 14:35:44 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Django: メールを送信する</title><link>https://32imuf.com/django/email/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/email/#id2" id="id5"&gt;リファレンス/参考書籍など&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/email/#id3" id="id6"&gt;説明&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/email/#amazon-ses" id="id7"&gt;Amazon SES を使ってメール送信する&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/email/#id5"&gt;リファレンス/参考書籍など&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/email/"&gt;https://docs.djangoproject.com/ja/2.2/topics/email/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://booth.pm/ja/items/1030026"&gt;現場で使える Django の教科書《実践編》&lt;/a&gt; A: メール送信の設定&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/email/#id6"&gt;説明&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;メールを送信する&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_9a56bccb0c3046cd8dcb892db5bd6b18-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.core.mail&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;send_mail&lt;/span&gt;
&lt;a name="rest_code_9a56bccb0c3046cd8dcb892db5bd6b18-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_9a56bccb0c3046cd8dcb892db5bd6b18-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;send_mail&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_9a56bccb0c3046cd8dcb892db5bd6b18-4"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'Subject here'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;           &lt;span class="c1"&gt;# 件名&lt;/span&gt;
&lt;a name="rest_code_9a56bccb0c3046cd8dcb892db5bd6b18-5"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'Here is the message.'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="c1"&gt;# 本文&lt;/span&gt;
&lt;a name="rest_code_9a56bccb0c3046cd8dcb892db5bd6b18-6"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'from@example.com'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;       &lt;span class="c1"&gt;# From アドレス&lt;/span&gt;
&lt;a name="rest_code_9a56bccb0c3046cd8dcb892db5bd6b18-7"&gt;&lt;/a&gt;    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'to@example.com'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;       &lt;span class="c1"&gt;# To アドレス&lt;/span&gt;
&lt;a name="rest_code_9a56bccb0c3046cd8dcb892db5bd6b18-8"&gt;&lt;/a&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;いろんなバックエンドがある&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/email/#email-backends"&gt;https://docs.djangoproject.com/ja/2.2/topics/email/#email-backends&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;コンソールに出すとか&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;メール送らないダミーとか&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;開発用にメールを設定する&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/email/#configuring-email-for-development"&gt;https://docs.djangoproject.com/ja/2.2/topics/email/#configuring-email-for-development&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;これ使いそう&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_f99f2287c4ed4516a90cd8346996070e-1"&gt;&lt;/a&gt;$ python -m smtpd -n -c DebuggingServer localhost:1025
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="amazon-ses"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/email/#id7"&gt;Amazon SES を使ってメール送信する&lt;/a&gt;&lt;/h2&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://pypi.org/project/django-ses/"&gt;https://pypi.org/project/django-ses/&lt;/a&gt; をインストール&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_e9b5b6708f9b4be4aed91d22d56d4fcf-1"&gt;&lt;/a&gt;$ pip install django-ses
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;settings に設定を追加する&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_756c56119c65477fb01dc0c5bcaaefab-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;EMAIL_BACKEND&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'django_ses.SESBackend'&lt;/span&gt;
&lt;a name="rest_code_756c56119c65477fb01dc0c5bcaaefab-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_756c56119c65477fb01dc0c5bcaaefab-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 本当は settings には書かない&lt;/span&gt;
&lt;a name="rest_code_756c56119c65477fb01dc0c5bcaaefab-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;AWS_ACCESS_KEY_ID&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'MY-ACCESS-KEY-ID'&lt;/span&gt;
&lt;a name="rest_code_756c56119c65477fb01dc0c5bcaaefab-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;AWS_SECRET_ACCESS_KEY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'MY-SECRET-ACCESS-KEY'&lt;/span&gt;
&lt;a name="rest_code_756c56119c65477fb01dc0c5bcaaefab-6"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# us-east-1 以外のAWSリージョンを使用する場合はこれも必要↓&lt;/span&gt;
&lt;a name="rest_code_756c56119c65477fb01dc0c5bcaaefab-7"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# AWS_SES_REGION_NAME = 'us-west-2'&lt;/span&gt;
&lt;a name="rest_code_756c56119c65477fb01dc0c5bcaaefab-8"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# AWS_SES_REGION_ENDPOINT = 'email.us-west-2.amazonaws.com'&lt;/span&gt;
&lt;a name="rest_code_756c56119c65477fb01dc0c5bcaaefab-9"&gt;&lt;/a&gt;
&lt;a name="rest_code_756c56119c65477fb01dc0c5bcaaefab-10"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# DEFAULT_FROM_EMAIL: サイト管理者からの自動送信メールに使用するデフォルトの Email アドレス&lt;/span&gt;
&lt;a name="rest_code_756c56119c65477fb01dc0c5bcaaefab-11"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# SERVER_EMAIL: ADMINS や MANAGERS に送信されるエラーメッセージの送信元 Email アドレス&lt;/span&gt;
&lt;a name="rest_code_756c56119c65477fb01dc0c5bcaaefab-12"&gt;&lt;/a&gt;&lt;span class="n"&gt;DEFAULT_FROM_EMAIL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;SERVER_EMAIL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'no-reply &amp;lt;XXXXX@example.com&amp;gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Amazon SES を設定する&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a class="reference external" href="https://32imuf.com/aws/ses-sending-email/"&gt;Amazon SES でメールを送信する&lt;/a&gt; を参照のこと&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>django</category><guid>https://32imuf.com/django/email/</guid><pubDate>Sat, 07 Dec 2019 15:00:00 GMT</pubDate></item><item><title>django-allauth</title><link>https://32imuf.com/django/allauth/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/allauth/#id2" id="id10"&gt;リファレンスなど&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/allauth/#id3" id="id11"&gt;概要&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/allauth/#id4" id="id12"&gt;主な機能&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/allauth/#github" id="id13"&gt;GitHub とソーシャル連携認証してみる&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/allauth/#id5" id="id14"&gt;ガイド&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/allauth/#id6" id="id15"&gt;手順&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/allauth/#id7" id="id16"&gt;できあがるレコード&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/allauth/#settings" id="id17"&gt;settings&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/allauth/#id8" id="id18"&gt;メールを設定した&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/allauth/#id10"&gt;リファレンスなど&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://django-allauth.readthedocs.io/en/latest/"&gt;https://django-allauth.readthedocs.io/en/latest/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://booth.pm/ja/items/1030026"&gt;現場で使える Django の教科書《実践編》&lt;/a&gt; 2章&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/allauth/#id11"&gt;概要&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Integrated set of Django applications addressing authentication, registration, account management as well as 3rd party (social) account authentication.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id4"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/allauth/#id12"&gt;主な機能&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;ログイン&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ログアウト&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;パスワード変更&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;パスワード再設定&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ユーザー登録&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ユーザー登録時にメールを送信して登録確認&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;メールアドレスとパスワードでログイン&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ログイン失敗回数制限&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ソーシャル連携認証&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://python-social-auth-docs.readthedocs.io/en/latest/"&gt;https://python-social-auth-docs.readthedocs.io/en/latest/&lt;/a&gt; こういうのもある&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;テンプレートも用意してくれている&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="github"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/allauth/#id13"&gt;GitHub とソーシャル連携認証してみる&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id5"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/allauth/#id14"&gt;ガイド&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a class="reference external" href="https://django-allauth.readthedocs.io/en/latest/providers.html#github"&gt;https://django-allauth.readthedocs.io/en/latest/providers.html#github&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id6"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/allauth/#id15"&gt;手順&lt;/a&gt;&lt;/h3&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p&gt;GitHub に OAuth アプリケーションを登録する&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://github.com/settings/developers"&gt;https://github.com/settings/developers&lt;/a&gt; &amp;gt; &lt;code class="docutils literal"&gt;OAuth Apps&lt;/code&gt;  &amp;gt; &lt;code class="docutils literal"&gt;Register a new OAuth application&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/00_register-oauth-application.png" src="https://32imuf.com/images/django/allauth/00_register-oauth-application.png"&gt;
&lt;/div&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;Authorization callback URL&lt;/code&gt;: サービスプロバイダが認可コードを返した後に Web アプリ側にリダイレクトするための URL&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;django-allauth を使う場合はサービスプロバイダによって異なる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;サービスプロバイダごとに異なるビュー関数が用意されているため&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;設定値は後から Update できるよ&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Admin サイトで GitHub とソーシャル連携するために初期データを登録する&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_3ba1b64d458e47c2b543bec53b81ac46-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# django-allauth をインストールする&lt;/span&gt;
&lt;a name="rest_code_3ba1b64d458e47c2b543bec53b81ac46-2"&gt;&lt;/a&gt;$ pip3 install django-allauth
&lt;a name="rest_code_3ba1b64d458e47c2b543bec53b81ac46-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_3ba1b64d458e47c2b543bec53b81ac46-4"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# マイグレーション&lt;/span&gt;
&lt;a name="rest_code_3ba1b64d458e47c2b543bec53b81ac46-5"&gt;&lt;/a&gt;$ python3 manage.py migrate
&lt;a name="rest_code_3ba1b64d458e47c2b543bec53b81ac46-6"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# スーパーユーザー作成&lt;/span&gt;
&lt;a name="rest_code_3ba1b64d458e47c2b543bec53b81ac46-7"&gt;&lt;/a&gt;$ python3 manage.py createsuperuser
&lt;a name="rest_code_3ba1b64d458e47c2b543bec53b81ac46-8"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# Django アプリを起動&lt;/span&gt;
&lt;a name="rest_code_3ba1b64d458e47c2b543bec53b81ac46-9"&gt;&lt;/a&gt;$ python3 manage.py runserver &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:8181
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="http://localhost:8181/admin/"&gt;http://localhost:8181/admin/&lt;/a&gt; へログインする&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="http://localhost:8181/admin/sites/site/"&gt;http://localhost:8181/admin/sites/site/&lt;/a&gt; にレコードが1件あることを確認する&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="http://localhost:8181/admin/socialaccount/socialapp/"&gt;http://localhost:8181/admin/socialaccount/socialapp/&lt;/a&gt; に GitHub に登録した OAuth アプリケーションの &lt;code class="docutils literal"&gt;Client ID&lt;/code&gt; と &lt;code class="docutils literal"&gt;Client Secret&lt;/code&gt; を登録する&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;動作確認する&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;admin サイトからログアウト&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;GitHub からもログアウト&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="http://localhost:8181/accounts/login/"&gt;http://localhost:8181/accounts/login/&lt;/a&gt; へアクセス&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;GitHub リンク押下&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/01_login.png" src="https://32imuf.com/images/django/allauth/01_login.png"&gt;
&lt;/div&gt;
&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/02_sign-in-to-github.png" src="https://32imuf.com/images/django/allauth/02_sign-in-to-github.png"&gt;
&lt;/div&gt;
&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/03_authorize-fuminote.png" src="https://32imuf.com/images/django/allauth/03_authorize-fuminote.png"&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;今いま callback URL がエラーになる =&amp;gt; メールを設定していないからかもしれない =&amp;gt; あとでやってみる&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/06_social-login-error.png" src="https://32imuf.com/images/django/allauth/06_social-login-error.png"&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ログインできた!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/04_home.png" src="https://32imuf.com/images/django/allauth/04_home.png"&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ソーシャル連携解除&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="http://localhost:8181/accounts/social/connections/"&gt;http://localhost:8181/accounts/social/connections/&lt;/a&gt; でソーシャル連携解除できる&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/05_social-connections.png" src="https://32imuf.com/images/django/allauth/05_social-connections.png"&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="id7"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/allauth/#id16"&gt;できあがるレコード&lt;/a&gt;&lt;/h3&gt;
&lt;dl class="field-list simple"&gt;
&lt;dt&gt;auth_user&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;Django サイトのユーザー&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;account_emailaddress&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;Django サイトのユーザーと Email&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;socialaccount_socialtoken&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;サービスプロバイダから払いだされたトークン&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;socialaccount_socialaccount&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;Django サイトのユーザーとサービスプロバイダから払いだされたトークンとを関連付けるソーシャルアカウント&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;サービスプロバイダから連携されたユーザー情報を保持&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/dd&gt;
&lt;dt&gt;socialaccount_socialapp&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;&lt;a class="reference external" href="http://localhost:8181/admin/socialaccount/socialapp/"&gt;http://localhost:8181/admin/socialaccount/socialapp/&lt;/a&gt; で登録したサービスプロパイダ&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;今回の場合だと GitHub に登録した OAuth アプリケーションの &lt;code class="docutils literal"&gt;Client ID&lt;/code&gt; と &lt;code class="docutils literal"&gt;Client Secret&lt;/code&gt; を保持&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/dd&gt;
&lt;dt&gt;socialaccount_socialapp_sites&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;サービスプロパイダとサイトの紐付け&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/div&gt;
&lt;div class="section" id="settings"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/allauth/#id17"&gt;settings&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="code-block "&gt;&lt;div class="code-block-label"&gt;settings.py&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;span class="sd"&gt;Django settings for fufu project.&lt;/span&gt;

&lt;span class="sd"&gt;Generated by 'django-admin startproject' using Django 2.2.7.&lt;/span&gt;

&lt;span class="sd"&gt;For more information on this file, see&lt;/span&gt;
&lt;span class="sd"&gt;https://docs.djangoproject.com/en/2.2/topics/settings/&lt;/span&gt;

&lt;span class="sd"&gt;For the full list of settings and their values, see&lt;/span&gt;
&lt;span class="sd"&gt;https://docs.djangoproject.com/en/2.2/ref/settings/&lt;/span&gt;
&lt;span class="sd"&gt;"""&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;

&lt;span class="c1"&gt;# Build paths inside the project like this: os.path.join(BASE_DIR, ...)&lt;/span&gt;
&lt;span class="n"&gt;BASE_DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dirname&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dirname&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;abspath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="vm"&gt;__file__&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;


&lt;span class="c1"&gt;# Quick-start development settings - unsuitable for production&lt;/span&gt;
&lt;span class="c1"&gt;# See https://docs.djangoproject.com/en/2.2/howto/deployment/checklist/&lt;/span&gt;

&lt;span class="c1"&gt;# SECURITY WARNING: keep the secret key used in production secret!&lt;/span&gt;
&lt;span class="n"&gt;SECRET_KEY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'o=uce-pwytvkyjsg8vv12#5zvh765-w!ph==vxs#_(^nw(in$='&lt;/span&gt;

&lt;span class="c1"&gt;# SECURITY WARNING: don't run with debug turned on in production!&lt;/span&gt;
&lt;span class="n"&gt;DEBUG&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;

&lt;span class="n"&gt;ALLOWED_HOSTS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'*'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="c1"&gt;# Application definition&lt;/span&gt;

&lt;span class="n"&gt;INSTALLED_APPS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="s1"&gt;'django.contrib.admin'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'django.contrib.auth'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'django.contrib.contenttypes'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'django.contrib.sessions'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'django.contrib.messages'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'django.contrib.staticfiles'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="c1"&gt;# django-allauth ######&lt;/span&gt;
    &lt;span class="s1"&gt;'django.contrib.sites'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="c1"&gt;# django-allauth では sites フレームワーク必須&lt;/span&gt;
    &lt;span class="s1"&gt;'allauth'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'allauth.account'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'allauth.socialaccount'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'allauth.socialaccount.providers.github'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="c1"&gt;# GitHub とソーシャル連携&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;MIDDLEWARE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="s1"&gt;'django.middleware.security.SecurityMiddleware'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'django.contrib.sessions.middleware.SessionMiddleware'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'django.middleware.common.CommonMiddleware'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'django.middleware.csrf.CsrfViewMiddleware'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'django.contrib.auth.middleware.AuthenticationMiddleware'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'django.contrib.messages.middleware.MessageMiddleware'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'django.middleware.clickjacking.XFrameOptionsMiddleware'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;ROOT_URLCONF&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'fufu.urls'&lt;/span&gt;

&lt;span class="n"&gt;TEMPLATES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;'BACKEND'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'django.template.backends.django.DjangoTemplates'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;'DIRS'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BASE_DIR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'templates'&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
        &lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;'APP_DIRS'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;'OPTIONS'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="s1"&gt;'context_processors'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s1"&gt;'django.template.context_processors.debug'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s1"&gt;'django.template.context_processors.request'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s1"&gt;'django.contrib.auth.context_processors.auth'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s1"&gt;'django.contrib.messages.context_processors.messages'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
        &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;WSGI_APPLICATION&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'fufu.wsgi.application'&lt;/span&gt;


&lt;span class="c1"&gt;# Database&lt;/span&gt;
&lt;span class="c1"&gt;# https://docs.djangoproject.com/en/2.2/ref/settings/#databases&lt;/span&gt;

&lt;span class="n"&gt;DATABASES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s1"&gt;'default'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;'ENGINE'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'django.db.backends.sqlite3'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s1"&gt;'NAME'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BASE_DIR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'db.sqlite3'&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;


&lt;span class="c1"&gt;# Password validation&lt;/span&gt;
&lt;span class="c1"&gt;# https://docs.djangoproject.com/en/2.2/ref/settings/#auth-password-validators&lt;/span&gt;

&lt;span class="n"&gt;AUTH_PASSWORD_VALIDATORS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;'NAME'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'django.contrib.auth.password_validation.UserAttributeSimilarityValidator'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;'NAME'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'django.contrib.auth.password_validation.MinimumLengthValidator'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;'NAME'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'django.contrib.auth.password_validation.CommonPasswordValidator'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s1"&gt;'NAME'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'django.contrib.auth.password_validation.NumericPasswordValidator'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="p"&gt;]&lt;/span&gt;


&lt;span class="c1"&gt;# Internationalization&lt;/span&gt;
&lt;span class="c1"&gt;# https://docs.djangoproject.com/en/2.2/topics/i18n/&lt;/span&gt;

&lt;span class="c1"&gt;# 日本語にするとテンプレートも勝手に日本語で表示される&lt;/span&gt;
&lt;span class="n"&gt;LANGUAGE_CODE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'ja'&lt;/span&gt;
&lt;span class="c1"&gt;# 英語にするとテンプレートも勝手に英語で表示される&lt;/span&gt;
&lt;span class="c1"&gt;# LANGUAGE_CODE = 'en-us'&lt;/span&gt;

&lt;span class="n"&gt;TIME_ZONE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;

&lt;span class="n"&gt;USE_I18N&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;

&lt;span class="n"&gt;USE_L10N&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;

&lt;span class="n"&gt;USE_TZ&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;


&lt;span class="c1"&gt;# Static files (CSS, JavaScript, Images)&lt;/span&gt;
&lt;span class="c1"&gt;# https://docs.djangoproject.com/en/2.2/howto/static-files/&lt;/span&gt;

&lt;span class="n"&gt;STATIC_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'/static/'&lt;/span&gt;

&lt;span class="c1"&gt;##################&lt;/span&gt;
&lt;span class="c1"&gt;# Authentication #&lt;/span&gt;
&lt;span class="c1"&gt;##################&lt;/span&gt;

&lt;span class="c1"&gt;# メールアドレスとパスワードで認証&lt;/span&gt;
&lt;span class="n"&gt;AUTHENTICATION_BACKENDS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="c1"&gt;# デフォルト: これを残しておくと管理画面はユーザー名/パスワードで認証できる&lt;/span&gt;
    &lt;span class="s1"&gt;'django.contrib.auth.backends.ModelBackend'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;'allauth.account.auth_backends.AuthenticationBackend'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="c1"&gt;# django-allauth を追加&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;# 認証⽅式を 「メールアドレスとパスワード」 に変更&lt;/span&gt;
&lt;span class="n"&gt;ACCOUNT_AUTHENTICATION_METHOD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'email'&lt;/span&gt;
&lt;span class="c1"&gt;# ユーザー名は使⽤しない&lt;/span&gt;
&lt;span class="n"&gt;ACCOUNT_USERNAME_REQUIRED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;

&lt;span class="c1"&gt;# django-allauth にはこれが必要&lt;/span&gt;
&lt;span class="n"&gt;SITE_ID&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="n"&gt;LOGIN_REDIRECT_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'home'&lt;/span&gt;
&lt;span class="n"&gt;ACCOUNT_LOGOUT_REDIRECT_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'/accounts/login/'&lt;/span&gt;

&lt;span class="c1"&gt;# ログアウトリンクログアウトさせたい場合 True&lt;/span&gt;
&lt;span class="c1"&gt;# (デフォルトはログアウト画面経由で POST リクエスト)&lt;/span&gt;
&lt;span class="n"&gt;ACCOUNT_LOGOUT_ON_GET&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;

&lt;span class="c1"&gt;# ユーザー登録時にメールアドレス確認を行う&lt;/span&gt;
&lt;span class="n"&gt;ACCOUNT_EMAIL_VARIFICATION&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'mandatory'&lt;/span&gt;
&lt;span class="c1"&gt;# ユーザー登録時にメールアドレス確認を行わない&lt;/span&gt;
&lt;span class="c1"&gt;# ACCOUNT_EMAIL_VARIFICATION = 'none'&lt;/span&gt;
&lt;span class="c1"&gt;# ユーザー登録画面でにEmailを必須項目にする&lt;/span&gt;
&lt;span class="n"&gt;ACCOUNT_EMAIL_REQUIRED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;

&lt;span class="c1"&gt;##################&lt;/span&gt;
&lt;span class="c1"&gt;# AWS settings   #&lt;/span&gt;
&lt;span class="c1"&gt;##################&lt;/span&gt;
&lt;span class="c1"&gt;# 本当は settings には書かない&lt;/span&gt;
&lt;span class="n"&gt;AWS_ACCESS_KEY_ID&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'MY-ACCESS-KEY-ID'&lt;/span&gt;
&lt;span class="n"&gt;AWS_SECRET_ACCESS_KEY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'MY-SECRET-ACCESS-KEY'&lt;/span&gt;

&lt;span class="c1"&gt;##################&lt;/span&gt;
&lt;span class="c1"&gt;# Email settings #&lt;/span&gt;
&lt;span class="c1"&gt;##################&lt;/span&gt;
&lt;span class="c1"&gt;# Amazon SES を使う場合&lt;/span&gt;
&lt;span class="c1"&gt;# https://pypi.org/project/django-ses/&lt;/span&gt;
&lt;span class="n"&gt;EMAIL_BACKEND&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'django_ses.SESBackend'&lt;/span&gt;
&lt;span class="c1"&gt;# us-east-1 以外のAWSリージョンを使用する場合はこれも必要↓&lt;/span&gt;
&lt;span class="c1"&gt;# AWS_SES_REGION_NAME = 'us-west-2'&lt;/span&gt;
&lt;span class="c1"&gt;# AWS_SES_REGION_ENDPOINT = 'email.us-west-2.amazonaws.com'&lt;/span&gt;

&lt;span class="n"&gt;DEFAULT_FROM_EMAIL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;SERVER_EMAIL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'no-reply &amp;lt;no-reply@32imuf.com&amp;gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id8"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/allauth/#id18"&gt;メールを設定した&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;callback URL はエラーにならず、 &lt;code class="docutils literal"&gt;Confirm &lt;span class="pre"&gt;E-mail&lt;/span&gt; Address&lt;/code&gt; メール が送られてくるようになった。&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;Confirm E-mail Address メールが送られてくるのは、 settings に &lt;code class="docutils literal"&gt;ユーザー登録時にメールアドレス確認を行う&lt;/code&gt; と設定しているためです&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;メールの設定は &lt;a class="reference external" href="https://32imuf.com/django/email/"&gt;Django: メールを送信する&lt;/a&gt; を参照のこと&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;流れ&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p&gt;ログイン画面で &lt;code class="docutils literal"&gt;GitHub&lt;/code&gt; リンク押下する&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/11_sign_in.png" src="https://32imuf.com/images/django/allauth/11_sign_in.png"&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;GitHub 側のサインイン画面へ遷移する&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/12_continue_to_fuminote.png" src="https://32imuf.com/images/django/allauth/12_continue_to_fuminote.png"&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;GitHub でサインインすると、自分のアプリのホーム画面へ遷移する。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;同時に、 GitHub に登録してある Email address に &lt;code class="docutils literal"&gt;Confirm &lt;span class="pre"&gt;E-mail&lt;/span&gt; Address&lt;/code&gt; メールが届く。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/13_confirm_email.png" src="https://32imuf.com/images/django/allauth/13_confirm_email.png"&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;Confirm &lt;span class="pre"&gt;E-mail&lt;/span&gt; Address&lt;/code&gt; メールに記載のリンクを押下すると、 E-mail Address 確認画面へ遷移する。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/14_confirm_email_screen.png" src="https://32imuf.com/images/django/allauth/14_confirm_email_screen.png"&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Confirm ボタンを押下するとホーム画面が表示される。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/15_home.png" src="https://32imuf.com/images/django/allauth/15_home.png"&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;おまけ: &lt;a class="reference external" href="https://32imuf.com/aws/ses-sending-email/"&gt;Amazon SES をセットアップした&lt;/a&gt; の図 (ちゃんと送られてきたー)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;div class="figure"&gt;
&lt;img alt="/images/django/allauth/16_mail-detail-aws-ses.png" src="https://32imuf.com/images/django/allauth/16_mail-detail-aws-ses.png"&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>django</category><guid>https://32imuf.com/django/allauth/</guid><pubDate>Mon, 02 Dec 2019 15:00:00 GMT</pubDate></item><item><title>Django: 認証システム django.contrib.auth</title><link>https://32imuf.com/django/auth/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/auth/#id2" id="id4"&gt;リファレンスなど&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/auth/#id3" id="id5"&gt;説明&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/auth/#id4"&gt;リファレンスなど&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/auth/"&gt;https://docs.djangoproject.com/ja/2.2/topics/auth/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://booth.pm/ja/items/1030026"&gt;現場で使える Django の教科書《実践編》&lt;/a&gt; 2章&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/auth/#id5"&gt;説明&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Djangoの認証は、認証機能と権限機能の両方を共に提供しています。そして、一般的に、これらの機能を合わせて認証システムと呼びます。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ユーザー登録/ユーザー情報変更とかはない感じ&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;テンプレートは用意されていないので、使用したいビューのテンプレートを自分で作る&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;設定ディレクトリの &lt;code class="docutils literal"&gt;urls.py&lt;/code&gt; に &lt;code class="docutils literal"&gt;django.contrib.auth.urls&lt;/code&gt; の include を追加すると、 以下の URL パターンが設定される&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/auth/default/#module-django.contrib.auth.views"&gt;https://docs.djangoproject.com/ja/2.2/topics/auth/default/#module-django.contrib.auth.views&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_109f21d4a0394486839da806613899cf-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# これを追加すると、↓が全部使える!! しゅごい!&lt;/span&gt;
&lt;a name="rest_code_109f21d4a0394486839da806613899cf-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;urlpatterns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;a name="rest_code_109f21d4a0394486839da806613899cf-3"&gt;&lt;/a&gt;    &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'accounts/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'django.contrib.auth.urls'&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
&lt;a name="rest_code_109f21d4a0394486839da806613899cf-4"&gt;&lt;/a&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;table class="colwidths-auto"&gt;
&lt;thead&gt;
&lt;tr&gt;&lt;th class="head"&gt;&lt;p&gt;機能&lt;/p&gt;&lt;/th&gt;
&lt;th class="head"&gt;&lt;p&gt;URL パターン&lt;/p&gt;&lt;/th&gt;
&lt;th class="head"&gt;&lt;p&gt;ビュー&lt;/p&gt;&lt;/th&gt;
&lt;th class="head"&gt;&lt;p&gt;フォーム&lt;/p&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;ログイン&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;accounts/login/ [name='login']&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;LoginView&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;AuthenticationForm&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;ログアウト&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;accounts/logout/ [name='logout']&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;LogoutView&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;-&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;パスワード変更&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;accounts/password_change/ [name='password_change']&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;PasswordChangeView&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;PasswordChangeForm&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;パスワード変更完了&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;accounts/password_change/done/ [name='password_change_done']&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;PasswordChangeDoneView&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;-&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;パスワード再設定 メール送信&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;accounts/password_reset/ [name='password_reset']&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;PasswordResetView&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;PasswordResetForm&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;パスワード再設定 メール送信完了&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;accounts/password_reset/done/ [name='password_reset_done']&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;PasswordResetDoneView&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;-&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;パスワード再設定&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;accounts/reset/&amp;lt;uidb64&amp;gt;/&amp;lt;token&amp;gt;/ [name='password_reset_confirm']&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;PasswordResetConfirmView&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;SetPasswordForm&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;パスワード再設定 完了&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;accounts/reset/done/ [name='password_reset_complete']&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;PasswordResetCompleteView&lt;/p&gt;&lt;/td&gt;
&lt;td&gt;&lt;p&gt;-&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>django</category><guid>https://32imuf.com/django/auth/</guid><pubDate>Sat, 30 Nov 2019 15:00:00 GMT</pubDate></item><item><title>Django: settings.py</title><link>https://32imuf.com/django/settings/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id2" id="id17"&gt;書籍/リファレンス&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id3" id="id18"&gt;概要&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id4" id="id19"&gt;インストールするアプリケーション一覧&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id5" id="id20"&gt;デバッグ設定&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id6" id="id21"&gt;静的ファイル/メディアファイル&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id7" id="id22"&gt;静的ファイル関連の設定&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id8" id="id23"&gt;メディアファイル関連設定&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#runserver" id="id24"&gt;runserver でメディアファイルを配信してくれる仕組みがある&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id9" id="id25"&gt;データベース設定&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id10" id="id26"&gt;組み込みでサポートしているデータベースエンジン:&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id11" id="id27"&gt;設定できる項目一覧:&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#mysql" id="id28"&gt;MySQL で注意する点:&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id12" id="id29"&gt;ロギングの設定&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#logging" id="id30"&gt;本番稼働時の LOGGING 設定例&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id13" id="id31"&gt;開発時の LOGGING 設定例&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id14" id="id32"&gt;ロガーを取得する&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id15" id="id33"&gt;その他の重要な設定&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/settings/#id16" id="id34"&gt;ベストプラクティス&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id17"&gt;書籍/リファレンス&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;Djangoの設定: &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/settings/"&gt;https://docs.djangoproject.com/ja/2.2/topics/settings/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;設定: &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/settings/"&gt;https://docs.djangoproject.com/ja/2.2/ref/settings/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://booth.pm/ja/items/1059917"&gt;現場で使える Django の教科書&lt;/a&gt; 第10章&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id18"&gt;概要&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;設定オブジェクト: &lt;code class="docutils literal"&gt;django.conf.settings&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Django 起動時に次のようにインスタンス化されるシングルトンなグローバルオブジェクト&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_c53e1abd029c4355a62f448e83b97afd-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# django/conf/__init__.py&lt;/span&gt;
&lt;a name="rest_code_c53e1abd029c4355a62f448e83b97afd-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;settings&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LazySettings&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;↑ は、Django のデフォルト設定ファイル ( &lt;code class="docutils literal"&gt;django.conf.global__settings.py&lt;/code&gt; ) を読み込んだ後&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;プロジェクト作成時に生成される設定ファイル ( &lt;code class="docutils literal"&gt;settings.py&lt;/code&gt; ) を読み込んで設定を上書きされる&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;設定ファイル: プロジェクト生成時に生成される &lt;code class="docutils literal"&gt;settings.py&lt;/code&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;Django のデフォルト設定とは異なるプロジェクト固有の設定値や&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;自作のアプリケーションで利用する独自の変数を記述しておく&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Django で利用できる設定変数とそのデフォルト値の一覧 =&amp;gt; &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/settings/"&gt;https://docs.djangoproject.com/ja/2.2/ref/settings/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;View や models からアクセスするときは、オブジェクトなので、&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_b07b59142b3d444cafcdadeba25e3775-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# こんな風に参照しましょう&lt;/span&gt;
&lt;a name="rest_code_b07b59142b3d444cafcdadeba25e3775-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.conf&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;
&lt;a name="rest_code_b07b59142b3d444cafcdadeba25e3775-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LOGIN_URL&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;LazySettings ??&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;その設定値にアクセスされてから初めてその属性が読み込まれる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;最初にその属性値にアクセスされるまでは設定を変え放題&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;settings の属性に一度でもアクセスされてしまうと、変更しようとしてもエラーになるので、&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;基本的には、設定ファイルの中で初期設定を済ませよう&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id4"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id19"&gt;インストールするアプリケーション一覧&lt;/a&gt;&lt;/h2&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_bdd0ec8ad9ef4da29abac05098799338-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;INSTALLED_APPS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;a name="rest_code_bdd0ec8ad9ef4da29abac05098799338-2"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# 略&lt;/span&gt;
&lt;a name="rest_code_bdd0ec8ad9ef4da29abac05098799338-3"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Install するアプリケーションをリスト形式で列挙&lt;/span&gt;
&lt;a name="rest_code_bdd0ec8ad9ef4da29abac05098799338-4"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# 各アプリディレクトリ.apps.py の AppConfig クラスのサブクラスを指定する&lt;/span&gt;
&lt;a name="rest_code_bdd0ec8ad9ef4da29abac05098799338-5"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'accounts.apps.AccountsConfig'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_bdd0ec8ad9ef4da29abac05098799338-6"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'shop.apps.ShopConfig'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_bdd0ec8ad9ef4da29abac05098799338-7"&gt;&lt;/a&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;パッケージ名を書くのは少し古い書き方&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;上に書いた方が優先順位が高い&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id5"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id20"&gt;デバッグ設定&lt;/a&gt;&lt;/h2&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_a6893ec182f841acbcf9262af96d5a37-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;DEBUG&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;開発時は True にしておくと、いろいろ便利&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;エラー発生時に画面にデバッグ情報が出力される&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;django-debug-toolbar, SQL 文のロギングは True じゃないと使えない&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id6"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id21"&gt;静的ファイル/メディアファイル&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;The staticfiles app: &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/contrib/staticfiles/"&gt;https://docs.djangoproject.com/ja/2.2/ref/contrib/staticfiles/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;静的ファイルのデプロイ: &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/howto/static-files/deployment/"&gt;https://docs.djangoproject.com/ja/2.2/howto/static-files/deployment/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ファイルのアップロード: &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/http/file-uploads/"&gt;https://docs.djangoproject.com/ja/2.2/topics/http/file-uploads/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Djangoで静的ファイルとうまくやる: &lt;a class="reference external" href="https://tell-k.github.io/djangocongressjp2019/#1"&gt;https://tell-k.github.io/djangocongressjp2019/#1&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="id7"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id22"&gt;静的ファイル関連の設定&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;静的ファイル (static ファイル)&lt;/code&gt;: リクエストに応じて中身を変更せずそのまま配信するファイル&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;CSS ファイル&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;JavaScript ファイル&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;画像ファイルに&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;単に静的ファイルをブラウザへ返すだけの処理をアプリケーションサーバーで捌くと、無駄が多くなってしまう&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;=&amp;gt; アプリケーションサーバーの前段に Nginx に代表される &lt;code class="docutils literal"&gt;リバースプロキシ&lt;/code&gt; と呼ばれるサーバーを配置し、&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;=&amp;gt; 静的ファイルを返すだけの処理はリバースプロキシが担当し、&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;=&amp;gt; Web application の処理が必要なリクエストだけをアプリケーションサーバーへ振り分けることで、&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;=&amp;gt; 効率よくリクエストを捌けるようにする&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;セキュリティの観点から、↓は別々にするケースが多い&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;静的ファイルの配信元&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;プロジェクトで静的ファイルをバージョン管理する際のプロジェクト内での置き場所&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;最低限↓の３つの設定必要&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# これしておくと便利&lt;/span&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;BASE_DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dirname&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dirname&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;abspath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="vm"&gt;__file__&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;PROJECT_NAME&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;basename&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BASE_DIR&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-5"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 静的ファイル配信用のディレクトリ、URL の一部になる&lt;/span&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-6"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 設定値はデフォルトの `/static/` のままでよい&lt;/span&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-7"&gt;&lt;/a&gt;&lt;span class="n"&gt;STATIC_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'/static/'&lt;/span&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-8"&gt;&lt;/a&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-9"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# アプリケーションに紐づかない静的ファイルの置き場&lt;/span&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-10"&gt;&lt;/a&gt;&lt;span class="n"&gt;STATICFILES_DIRS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BASE_DIR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'static'&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-11"&gt;&lt;/a&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-12"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 静的ファイルの配信元&lt;/span&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-13"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# collectstatic コマンドで静的ファイルを集約する際のコピー先でもある&lt;/span&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-14"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# `STATICFILES_DIRS` とは別のディレクトリを指定する必要がある&lt;/span&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-15"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# DEBUG = False のときに必要&lt;/span&gt;
&lt;a name="rest_code_bf232b3b044348f58469c32e33875481-16"&gt;&lt;/a&gt;&lt;span class="n"&gt;STATIC_ROOT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'/var/www/{}/static'&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PROJECT_NAME&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;静的ファイル集約のための管理コマンド: &lt;code class="docutils literal"&gt;collectstatic&lt;/code&gt;&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_c8112ca2d680451ba907fd6c92908469-1"&gt;&lt;/a&gt;$ python3 manage.py collectstatic
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;DEBUG = True&lt;/code&gt; のときは、 runserver がやってくれるので自分で &lt;code class="docutils literal"&gt;collectstatic&lt;/code&gt; する必要ない&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;STATIC_URL&lt;/code&gt; を使って画像を表示するテンプレート実装例&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_5d4dc909d86549f8b2233a0f2c61cdeb-1"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt; &lt;span class="n"&gt;static&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_5d4dc909d86549f8b2233a0f2c61cdeb-2"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"{&lt;/span&gt;&lt;span class="si"&gt;% s&lt;/span&gt;&lt;span class="s2"&gt;tatic 'shop/images/no-image.png' %}"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_5d4dc909d86549f8b2233a0f2c61cdeb-3"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"{&lt;/span&gt;&lt;span class="si"&gt;% s&lt;/span&gt;&lt;span class="s2"&gt;tatic 'images/logo.png' %}"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id8"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id23"&gt;メディアファイル関連設定&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;メディアファイル&lt;/code&gt;: 静的ファイルのうち、 (システム管理者を含めた) ユーザーがサイトを利用してアップロードするファイル&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;本番環境では、メディアファイルもAPサーバーで裁かずにリバースプロキシなどで捌くことで負荷を減らす&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_37d2aa207801466282ee703d3be3f9e4-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# メディアファイルの設定例 (config/settings.py)&lt;/span&gt;
&lt;a name="rest_code_37d2aa207801466282ee703d3be3f9e4-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# DEBUG =  False 時&lt;/span&gt;
&lt;a name="rest_code_37d2aa207801466282ee703d3be3f9e4-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;MEDIA_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'/media/'&lt;/span&gt;
&lt;a name="rest_code_37d2aa207801466282ee703d3be3f9e4-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;MEDIA_ROOT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'/var/www/{}/media'&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PROJECT_NAME&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_37d2aa207801466282ee703d3be3f9e4-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_37d2aa207801466282ee703d3be3f9e4-6"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# ユニットテスト時 or PaaS ? WhiteNoise 時&lt;/span&gt;
&lt;a name="rest_code_37d2aa207801466282ee703d3be3f9e4-7"&gt;&lt;/a&gt;&lt;span class="n"&gt;MEDIA_ROOT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BASE_DIR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'media_root'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;アップロードを実装するときのコツは P.114 付近に詳しく書いてあるので、実装するときはよく見ること&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="runserver"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id24"&gt;runserver でメディアファイルを配信してくれる仕組みがある&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;動作確認に便利&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_9b199c283c294d81aaa3409a95ab4b38-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# config/urls.py&lt;/span&gt;
&lt;a name="rest_code_9b199c283c294d81aaa3409a95ab4b38-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.conf&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;
&lt;a name="rest_code_9b199c283c294d81aaa3409a95ab4b38-3"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.conf.urls.static&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;static&lt;/span&gt;
&lt;a name="rest_code_9b199c283c294d81aaa3409a95ab4b38-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_9b199c283c294d81aaa3409a95ab4b38-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;urlpatterns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;a name="rest_code_9b199c283c294d81aaa3409a95ab4b38-6"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# ...&lt;/span&gt;
&lt;a name="rest_code_9b199c283c294d81aaa3409a95ab4b38-7"&gt;&lt;/a&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_9b199c283c294d81aaa3409a95ab4b38-8"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# static 関数の内部で DEBUG = True でないと動作しないようにチェックしているよ&lt;/span&gt;
&lt;a name="rest_code_9b199c283c294d81aaa3409a95ab4b38-9"&gt;&lt;/a&gt;&lt;span class="n"&gt;urlpatterns&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;static&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MEDIA_URL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;document_root&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MEDIA_ROOT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id9"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id25"&gt;データベース設定&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id10"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id26"&gt;組み込みでサポートしているデータベースエンジン:&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;django.db.backends.postgresql (PostgreSQL)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;django.db.backends.mysql (MySQL)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;django.db.backends.sqlite3 (SQLite)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;django.db.backends.oracle (Oracle)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id11"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id27"&gt;設定できる項目一覧:&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/settings/#databases"&gt;https://docs.djangoproject.com/ja/2.2/ref/settings/#databases&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;ATOMIC_REQUESTS&lt;/code&gt;:  トランザクションの有効範囲をリクエストの開始から終了までにするかどうかを指定できる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;OPTIONS&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;いろんなオプションを設定できる&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;トランザクションの分離レベル &lt;code class="docutils literal"&gt;isolation_level&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;MySQL の SQL モード &lt;code class="docutils literal"&gt;sql_mode&lt;/code&gt; など&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;デフォルトから変更したら、Django 側だけでなくデータベース側にも同じ設定をしておくのが望ましい&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="mysql"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id28"&gt;MySQL で注意する点:&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;SQLモードを「厳密モード」にしておかないと振る舞いが微妙なので、設定しておいたほうがよい&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_b1098d2f79934304ab19be3ad425a1e9-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 最も厳しく設定するとこうなる&lt;/span&gt;
&lt;a name="rest_code_b1098d2f79934304ab19be3ad425a1e9-2"&gt;&lt;/a&gt;&lt;span class="s1"&gt;'OPTIONS'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_b1098d2f79934304ab19be3ad425a1e9-3"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'sql_mode'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'TRADITIONAL,NO_AUTO_VALUE_ON_ZERO'&lt;/span&gt;
&lt;a name="rest_code_b1098d2f79934304ab19be3ad425a1e9-4"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;MySQL を利用する際はドライバーが必要: Django 推奨は &lt;code class="docutils literal"&gt;mysqlclient&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id12"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id29"&gt;ロギングの設定&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/logging/"&gt;https://docs.djangoproject.com/ja/2.2/topics/logging/&lt;/a&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;プロジェクト作成時にはロギング設定は書かれていない&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Django の起動時に django.utils.log.py の &lt;code class="docutils literal"&gt;DEFAUT_LOGGING&lt;/code&gt; の設定が読み込まれる&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="logging"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id30"&gt;本番稼働時の LOGGING 設定例&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;LOGGING&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-2"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# バージョンは「1」固定&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-3"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'version'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-4"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# 既存のログ設定を無効化しない&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-5"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'disable_existing_loggers'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-6"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# ログフォーマット&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-7"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'formatters'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-8"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# 本番用&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-9"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'production'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-10"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'format'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="si"&gt;%(asctime)s&lt;/span&gt;&lt;span class="s1"&gt; [&lt;/span&gt;&lt;span class="si"&gt;%(levelname)s&lt;/span&gt;&lt;span class="s1"&gt;] &lt;/span&gt;&lt;span class="si"&gt;%(name)s&lt;/span&gt;&lt;span class="s1"&gt; &lt;/span&gt;&lt;span class="si"&gt;%(process)d&lt;/span&gt;&lt;span class="s1"&gt; &lt;/span&gt;&lt;span class="si"&gt;%(thread)d&lt;/span&gt;&lt;span class="s1"&gt; '&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-11"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="si"&gt;%(pathname)s&lt;/span&gt;&lt;span class="s1"&gt; &lt;/span&gt;&lt;span class="si"&gt;%(lineno)d&lt;/span&gt;&lt;span class="s1"&gt; &lt;/span&gt;&lt;span class="si"&gt;%(message)s&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-12"&gt;&lt;/a&gt;        &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-13"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-14"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# ハンドラ&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-15"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'handlers'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-16"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# ファイル出力用ハンドラ&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-17"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'file'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-18"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'level'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'INFO'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-19"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# logging.handlers.RotatingFileHandler, logging.handlers.TimeRotatingFileHandler&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-20"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# を使うとログファイルをローテーションできて便利&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-21"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'class'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'logging.FileHandler'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-22"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'filename'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'var/log/{}.log'&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PROJECT_NAME&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-23"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'formatter'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'production'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-24"&gt;&lt;/a&gt;        &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-25"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-26"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# ロガー&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-27"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'loggers'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-28"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# 自作アプリケーション全般のログを拾うロガー&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-29"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# '' と書くと、独自に追加したアプリケーションのログを拾うことができる&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-30"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;''&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-31"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'handlers'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'file'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-32"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'level'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'INFO'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-33"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'propagate'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-34"&gt;&lt;/a&gt;        &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-35"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Django 本体が出すログ全般を拾うロガー&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-36"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'django'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-37"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'handlers'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'file'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-38"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'level'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'INFO'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-39"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'propagate'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-40"&gt;&lt;/a&gt;        &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-41"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_94ec71a2aebc412f9e20ca5930d6e0ce-42"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id13"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id31"&gt;開発時の LOGGING 設定例&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;LOGGING&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-2"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# バージョンは「1」固定&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-3"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'version'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-4"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# 既存のログ設定を無効化しない&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-5"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'disable_existing_loggers'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-6"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# ログフォーマット&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-7"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'formatters'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-8"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# 開発用&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-9"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'develop'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-10"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'format'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="si"&gt;%(asctime)s&lt;/span&gt;&lt;span class="s1"&gt; [&lt;/span&gt;&lt;span class="si"&gt;%(levelname)s&lt;/span&gt;&lt;span class="s1"&gt;] &lt;/span&gt;&lt;span class="si"&gt;%(pathname)s&lt;/span&gt;&lt;span class="s1"&gt; &lt;/span&gt;&lt;span class="si"&gt;%(lineno)d&lt;/span&gt;&lt;span class="s1"&gt; &lt;/span&gt;&lt;span class="si"&gt;%(message)s&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-11"&gt;&lt;/a&gt;        &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-12"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-13"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# ハンドラ&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-14"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'handlers'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-15"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# コンソール出力用ハンドラ&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-16"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'console'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-17"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'level'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'DEBUG'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-18"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# logging.handlers.RotatingFileHandler, logging.handlers.TimeRotatingFileHandler&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-19"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# を使うとログファイルをローテーションできて便利&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-20"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'class'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'logging.StreamHandler'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-21"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'filename'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'var/log/{}.log'&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PROJECT_NAME&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-22"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'formatter'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'develop'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-23"&gt;&lt;/a&gt;        &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-24"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-25"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# ロガー&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-26"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'loggers'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-27"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# 自作アプリケーション全般のログを拾うロガー&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-28"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;''&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-29"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'handlers'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'console'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-30"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'level'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'DEBUG'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-31"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'propagate'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-32"&gt;&lt;/a&gt;        &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-33"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Django 本体が出すログ全般を拾うロガー&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-34"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'django'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-35"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'handlers'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'console'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-36"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'level'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'INFO'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-37"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'propagate'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-38"&gt;&lt;/a&gt;        &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-39"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# 発行される SQL 文を出力するための設定&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-40"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# パフォーマンスの観点から DEBUG = True でないと出力されないようになっている&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-41"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'django.db.backends'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-42"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'handlers'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'console'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-43"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'level'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'DEBUG'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-44"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'propagate'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-45"&gt;&lt;/a&gt;        &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-46"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_3503c8975d4545f292aac66bfc931ef3-47"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id14"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id32"&gt;ロガーを取得する&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_7806e96c043d4272a6cf0350c7591ec2-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;logger&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getLogger&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id15"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id33"&gt;その他の重要な設定&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;TEMPLATES&lt;/code&gt; テンプレートに関する設定: &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/settings/#std:setting-TEMPLATES"&gt;https://docs.djangoproject.com/ja/2.2/ref/settings/#std:setting-TEMPLATES&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;TEMPLATES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-2"&gt;&lt;/a&gt;    &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-3"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# テンプレートエンジン&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-4"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'BACKEND'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'django.template.backends.django.DjangoTemplates'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-5"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# ビューから指定されるテンプレート名に対してどのディレクトリを優先してテンプレートを探しに行くかの順番を指定する&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-6"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'DIRS'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BASE_DIR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'templates'&lt;/span&gt;&lt;span class="p"&gt;)],&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-7"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# テンプートを探す際に、各アプリケーションディレクトリ直下の templates を優先する場合 True&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-8"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'APP_DIRS'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-9"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'OPTIONS'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-10"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# テンプレートから参照できる変数を渡すための context_processors&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-11"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'context_processors'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-12"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'django.template.context_processors.debug'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-13"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'django.template.context_processors.request'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-14"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'django.contrib.auth.context_processors.auth'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-15"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'django.contrib.messages.context_processors.messages'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-16"&gt;&lt;/a&gt;            &lt;span class="p"&gt;],&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-17"&gt;&lt;/a&gt;        &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-18"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a name="rest_code_9ce299dbeddb402dba2ab7c636a17a98-19"&gt;&lt;/a&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;LANGUAGE_CODE&lt;/code&gt; 言語コード: &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/settings/#language-code"&gt;https://docs.djangoproject.com/ja/2.2/ref/settings/#language-code&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_eadaf4ea8b884889918e6a0e8e9687b0-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# デフォルトは 'en-us'&lt;/span&gt;
&lt;a name="rest_code_eadaf4ea8b884889918e6a0e8e9687b0-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 管理サイトの表示もここで指定した言語に&lt;/span&gt;
&lt;a name="rest_code_eadaf4ea8b884889918e6a0e8e9687b0-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;LANGUAGE_CODE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'ja'&lt;/span&gt;  &lt;span class="c1"&gt;# 日本語&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;TIME_ZONE&lt;/code&gt; タイムゾーン: &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/settings/#std:setting-TIME_ZONE"&gt;https://docs.djangoproject.com/ja/2.2/ref/settings/#std:setting-TIME_ZONE&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_14fb02e7aed34269b560e86a1564227e-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 時刻を表示する際のタイムゾーンを指定&lt;/span&gt;
&lt;a name="rest_code_14fb02e7aed34269b560e86a1564227e-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# デフォルトは 'UTC'&lt;/span&gt;
&lt;a name="rest_code_14fb02e7aed34269b560e86a1564227e-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;TIME_ZONE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;  &lt;span class="c1"&gt;# 日本&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;MIDDLEWARE&lt;/code&gt; ミドルウェアの設定: &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/settings/#middleware"&gt;https://docs.djangoproject.com/ja/2.2/ref/settings/#middleware&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;ALLOWED_HOSTS&lt;/code&gt; 許可するホスト : &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/settings/#allowed-hosts"&gt;https://docs.djangoproject.com/ja/2.2/ref/settings/#allowed-hosts&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;SECRET_KEY&lt;/code&gt; シークレットキー: &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/settings/#std:setting-SECRET_KEY"&gt;https://docs.djangoproject.com/ja/2.2/ref/settings/#std:setting-SECRET_KEY&lt;/a&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;Django 内部で暗号署名やハッシュ生成に利用されるシークレットな文字列&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;SECRET_KEY が設定されていない場合、Django は起動しない&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;django-admin startproject コマンドを実行すると、新しいプロジェクトを作成するたびに、ランダムに生成された SECRET_KEY を自動的に設定してくれる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;環境ごとに固有であることが望ましい&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;SITE_ID&lt;/code&gt; サイトID: &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/settings/#sites"&gt;https://docs.djangoproject.com/ja/2.2/ref/settings/#sites&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id16"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/settings/#id34"&gt;ベストプラクティス&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;個人の開発環境の設定は &lt;code class="docutils literal"&gt;local_settings.py&lt;/code&gt; に書く&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_e2914b85233d43438e587427017680f0-1"&gt;&lt;/a&gt;$ python3 manage.py runserver &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:8000 --settings config.local_settings
&lt;a name="rest_code_e2914b85233d43438e587427017680f0-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_e2914b85233d43438e587427017680f0-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# もしくは&lt;/span&gt;
&lt;a name="rest_code_e2914b85233d43438e587427017680f0-4"&gt;&lt;/a&gt;$ &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;DJANGO_SETTINGS_MODULE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;config.local_settings
&lt;a name="rest_code_e2914b85233d43438e587427017680f0-5"&gt;&lt;/a&gt;$ python3 manage.py runserver &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:8000
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;シークレットな変数は &lt;code class="docutils literal"&gt;.env&lt;/code&gt; に書く&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;バージョン管理下に置かない&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;settings.py には書かない&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;django-environ 便利&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>django</category><guid>https://32imuf.com/django/settings/</guid><pubDate>Sat, 23 Nov 2019 15:00:00 GMT</pubDate></item><item><title>Django: Middleware</title><link>https://32imuf.com/django/middleware/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/middleware/#id2" id="id8"&gt;書籍/リファレンス&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/middleware/#id3" id="id9"&gt;概要&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/middleware/#id4" id="id10"&gt;主なミドルウェア&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/middleware/#securitymiddleware" id="id11"&gt;SecurityMiddleware&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/middleware/#sessionmiddleware" id="id12"&gt;SessionMiddleware&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/middleware/#commonmiddleware" id="id13"&gt;CommonMiddleware&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/middleware/#csrfviewmiddleware" id="id14"&gt;CsrfViewMiddleware&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/middleware/#authenticationmiddleware" id="id15"&gt;AuthenticationMiddleware&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/middleware/#messagemiddleware" id="id16"&gt;MessageMiddleware&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/middleware/#xframeoptionsmiddleware" id="id17"&gt;XFrameOptionsMiddleware&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/middleware/#id6" id="id18"&gt;ミドルウェアの書き方&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/middleware/#id8"&gt;書籍/リファレンス&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/http/middleware/"&gt;https://docs.djangoproject.com/ja/2.2/topics/http/middleware/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://booth.pm/ja/items/1059917"&gt;現場で使える Django の教科書&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/middleware/#id9"&gt;概要&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;Django の主要な機能 (モデル・テンプレート・ビュー) と Web サーバー/アプリケーションの中間に位置&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ビューを出入りするすべてのリクエストとレスポンスをフックできる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;さまざまなミドルウェアが組み込みで用意されている&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;自作して追加することも可能&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;必要なものを settings に加えると利用できる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;サイト全体にリクエストやレスポンスを使用して一律に何らかの機能を加えたい場合などに利用する&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;settings の &lt;code class="docutils literal"&gt;MIDDLEWARE&lt;/code&gt; にリスト形式で列挙&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;書いた順番に実行される。順番大事。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;書いたミドルウェアはリクエストの度に全部実行されるので、あまり重い処理は書かないようにすること。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;できるかぎりデータベースアクセスしない&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;必要なら &lt;code class="docutils literal"&gt;django.utils.functional.SimpleLazyObject&lt;/code&gt; を使うようにする&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id4"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/middleware/#id10"&gt;主なミドルウェア&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;以下は、 Django プロジェクト作成時にデフォルトで設定される&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;デフォルトで設定されるミドルウェアはとりあえずそのまま使うのが吉とのこと&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="securitymiddleware"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/middleware/#id11"&gt;SecurityMiddleware&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;リクエスト/レスポンスのセキュリティ強化&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;HTTP =&amp;gt; HTTPS リダイレクト (デフォルトはOFF)&lt;/p&gt;
&lt;pre class="code Python"&gt;&lt;a name="rest_code_81bdd53098364b4f89af2ad6d2110370-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;SECURE_SSL_REDIRECT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;入れておいて損はないので何も考えずに入れておくとよい&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="sessionmiddleware"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/middleware/#id12"&gt;SessionMiddleware&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;セッションを有効にする&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;有効にする場合は、 &lt;code class="docutils literal"&gt;INSTALLED_APPS&lt;/code&gt; に &lt;code class="docutils literal"&gt;django.contrib.sessions&lt;/code&gt; を入れるのを忘れずに&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使い方はここを見よ: &lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/http/sessions/"&gt;https://docs.djangoproject.com/ja/2.2/topics/http/sessions/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;迷ったら有効化しておく&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="commonmiddleware"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/middleware/#id13"&gt;CommonMiddleware&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;ユーザーエージェントによるアクセス制限&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;URL リライティング&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;公式でも使用を強くお勧め&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;必須では&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;APPEND_SLASH&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;PREPEND_WWW&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="csrfviewmiddleware"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/middleware/#id14"&gt;CsrfViewMiddleware&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;CSRF トークン検証&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="authenticationmiddleware"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/middleware/#id15"&gt;AuthenticationMiddleware&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;リクエストの度に、リクエストオブジェクトの &lt;code class="docutils literal"&gt;user&lt;/code&gt; 属性にユーザー情報をセットしてくれる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ログイン済みの場合: セッション.Userインスタンス&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;未ログインの場合: AnonymousUser (匿名ユーザー)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;セッションが必要なので、 SessionMiddleware より後ろに書く&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="messagemiddleware"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/middleware/#id16"&gt;MessageMiddleware&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;フラッシュメッセージ&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;メッセージフレームワーク&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://booth.pm/ja/items/1059917"&gt;現場で使える Django の教科書&lt;/a&gt; P.103&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="xframeoptionsmiddleware"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/middleware/#id17"&gt;XFrameOptionsMiddleware&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;クリックジャッキング対策&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;X-Frame-Options&lt;/span&gt;&lt;/code&gt; ヘッダーを全てのレスポンスに設定&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id6"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/middleware/#id18"&gt;ミドルウェアの書き方&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;ここを見よ&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/http/middleware/#writing-your-own-middleware"&gt;https://docs.djangoproject.com/ja/2.2/topics/http/middleware/#writing-your-own-middleware&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://booth.pm/ja/items/1059917"&gt;現場で使える Django の教科書&lt;/a&gt; P.101&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>django</category><guid>https://32imuf.com/django/middleware/</guid><pubDate>Sun, 13 Oct 2019 15:00:00 GMT</pubDate></item><item><title>Django: django-admin.py, manage.py</title><link>https://32imuf.com/django/manage/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#id2" id="id12"&gt;書籍/リファレンス&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#django-admin-manage-py" id="id13"&gt;django-admin と manage.py の違い&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#django-admin-py-django-admin" id="id14"&gt;django-admin.py, django-admin&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#manage-py" id="id15"&gt;manage.py&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#id3" id="id16"&gt;よく使う Django 管理コマンド&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#id4" id="id17"&gt;プロジェクト作成&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#id5" id="id18"&gt;アプリケーション作成&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#id6" id="id19"&gt;マイグレーション&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#id7" id="id20"&gt;くろのて&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#id8" id="id21"&gt;スーバーユーザー作成&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#runserver" id="id22"&gt;runserver&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#id9" id="id23"&gt;インタラクティブモードで実行する&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#id10" id="id24"&gt;使用例&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#django-dbdb" id="id25"&gt;Django の DBシェルでローカルDBにつなぐ&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#id11" id="id26"&gt;静的ファイルを公開用ディレクトリに収集する&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#system-check-framework-django" id="id27"&gt;System check framework を使って、Django プロジェクトの一般的な問題を検査する&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/manage/#python2" id="id28"&gt;使用例 (python2)&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id12"&gt;書籍/リファレンス&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/django-admin/"&gt;Django documentation &amp;gt; django-admin と manage.py&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://www.amazon.co.jp/dp/B07GK7BWB7/"&gt;現場で使える Django の教科書&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="django-admin-manage-py"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id13"&gt;django-admin と manage.py の違い&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;通常、単体の Django プロジェクトを用いる場合、 &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;django-admin&lt;/span&gt;&lt;/code&gt; よりも &lt;code class="docutils literal"&gt;manage.py&lt;/code&gt; の方が簡単に利用できる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;django-admin&lt;/span&gt;&lt;/code&gt;, &lt;code class="docutils literal"&gt;manage.py&lt;/code&gt;, &lt;code class="docutils literal"&gt;python &lt;span class="pre"&gt;-m&lt;/span&gt; django&lt;/code&gt; はすべて同じことができる ( &lt;code class="docutils literal"&gt;startproject&lt;/code&gt; 後は)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="django-admin-py-django-admin"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id14"&gt;django-admin.py, django-admin&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;インストールすると使えるようになる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;基本的にどこからでも利用できる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Django を &lt;code class="docutils literal"&gt;setup.py&lt;/code&gt; ユーティリティを通じてインストールした場合は &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;django-admin&lt;/span&gt;&lt;/code&gt; スクリプトはシステムのパスが通っている場所に配置されます。もしパスが通った箇所に存在しなければ、Python インストール先の &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;site-packages/django/bin&lt;/span&gt;&lt;/code&gt; 内で見つける事ができます。そのスクリプトに対して、 &lt;code class="docutils literal"&gt;/usr/local/bin&lt;/code&gt; 等のパスが通っている場所からシンボリックリンクを張ることを検討してください。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;新しく Django プロジェクトを作成するときに利用する&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Django プロジェクトを作成してしまったら &lt;code class="docutils literal"&gt;manage.py&lt;/code&gt; が使えるようになるので出番がなくなる&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="manage-py"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id15"&gt;manage.py&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;startproject&lt;/code&gt; でプロジェクトを作成すると自動で作成される&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Django が提供する便利な管理コマンドが使えるほか...&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id16"&gt;よく使う Django 管理コマンド&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id4"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id17"&gt;プロジェクト作成&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_d6cbd2f63d0b47778f6907d1a03c9e10-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# プロジェクトのディレクトリに移動する&lt;/span&gt;
&lt;a name="rest_code_d6cbd2f63d0b47778f6907d1a03c9e10-2"&gt;&lt;/a&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; project_dir
&lt;a name="rest_code_d6cbd2f63d0b47778f6907d1a03c9e10-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# django-admin.py startproject &amp;lt;設定ディレクトリ名&amp;gt; &amp;lt;つくる場所&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_d6cbd2f63d0b47778f6907d1a03c9e10-4"&gt;&lt;/a&gt;$ django-admin.py startproject config .
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id5"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id18"&gt;アプリケーション作成&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_03ac44ecd6004a1f918f3ab4184381cb-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# プロジェクトのディレクトリに移動する&lt;/span&gt;
&lt;a name="rest_code_03ac44ecd6004a1f918f3ab4184381cb-2"&gt;&lt;/a&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; project_dir
&lt;a name="rest_code_03ac44ecd6004a1f918f3ab4184381cb-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# python manage.py startapp &amp;lt;アプリケーション名&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_03ac44ecd6004a1f918f3ab4184381cb-4"&gt;&lt;/a&gt;$ python manage.py startapp account
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;作成後、 settings.py &amp;gt; &lt;code class="docutils literal"&gt;INSTALLED_APPS&lt;/code&gt; に手動でアプリケーションを追加する&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id6"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id19"&gt;マイグレーション&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/en/2.2/topics/migrations/"&gt;https://docs.djangoproject.com/en/2.2/topics/migrations/&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# マイグレーションファイルを作成する&lt;/span&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# python manage.py makemigrations [&amp;lt;アプリケーション名&amp;gt;]&lt;/span&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-3"&gt;&lt;/a&gt;$ python manage.py makemigrations account
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-5"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 作成される予定のマイグレーションを表示する。実際のマイグレーションファイルは作成されない。&lt;/span&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-6"&gt;&lt;/a&gt;$ python manage.py makemigrations --dry-run
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-8"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# マイグレーションを実行する&lt;/span&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-9"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# python manage.py migrate [&amp;lt;アプリケーション名&amp;gt;]&lt;/span&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-10"&gt;&lt;/a&gt;$ python manage.py migrate account
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-11"&gt;&lt;/a&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-12"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# マイグレートするデータベースを指定する。デフォルトは default 。&lt;/span&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-13"&gt;&lt;/a&gt;$ python manage.py migrate --database &amp;lt;DATABASE&amp;gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-14"&gt;&lt;/a&gt;$ python manage.py migrate --database hey
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-15"&gt;&lt;/a&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-16"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 適用済みとして django_migrations にレコードは INSERT されるけれど、データベーススキーマを変更するために実際にSQLを実行することはありません。&lt;/span&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-17"&gt;&lt;/a&gt;$ python manage.py migrate --fake
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-18"&gt;&lt;/a&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-19"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 自動生成されるマイグレーション名を任意の名前に変更したい&lt;/span&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-20"&gt;&lt;/a&gt;$ python3 manage.py makemigrations book --name add_field_to_book
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-21"&gt;&lt;/a&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-22"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# マイグレーションファイルがどこまで migrate されているか確認する&lt;/span&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-23"&gt;&lt;/a&gt;$ python3 manage.py showmigrations
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-24"&gt;&lt;/a&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-25"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# shop アプリケーション関連のテーブルを 0001_initial 適用直後の状態に戻したい&lt;/span&gt;
&lt;a name="rest_code_b9effd9272334e3babd89a737c7c7129-26"&gt;&lt;/a&gt;$ python3 manage.py migrate shop 0001_initial
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;django_migrations&lt;/code&gt; テーブル: Django がマイグレーション履歴を管理しているテーブル&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="id7"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id20"&gt;くろのて&lt;/a&gt;&lt;/h4&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://note.crohaco.net/2018/django-migration/"&gt;https://note.crohaco.net/2018/django-migration/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://note.crohaco.net/2018/django-migration-case-study/"&gt;https://note.crohaco.net/2018/django-migration-case-study/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id8"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id21"&gt;スーバーユーザー作成&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_cd4b9c3b7e52445aa375b29e7773491e-1"&gt;&lt;/a&gt;$ python manage.py createsuperuser
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;管理サイト (Django Admin) を使えるユーザー&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;superuser (システム管理者)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;is_staff = True&lt;/code&gt; かつ &lt;code class="docutils literal"&gt;is_active = True&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="runserver"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id22"&gt;runserver&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_cd78d17a27e74108aa3a8be29f53dc56-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 開発用の Web サーバーを起動する&lt;/span&gt;
&lt;a name="rest_code_cd78d17a27e74108aa3a8be29f53dc56-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# python manage.py runserver [&amp;lt;IPアドレス&amp;gt;:&amp;lt;ポート番号&amp;gt;]&lt;/span&gt;
&lt;a name="rest_code_cd78d17a27e74108aa3a8be29f53dc56-3"&gt;&lt;/a&gt;$ python manage.py runserver &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:8000
&lt;a name="rest_code_cd78d17a27e74108aa3a8be29f53dc56-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_cd78d17a27e74108aa3a8be29f53dc56-5"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 自動リロード機能を OFF で起動&lt;/span&gt;
&lt;a name="rest_code_cd78d17a27e74108aa3a8be29f53dc56-6"&gt;&lt;/a&gt;$ python manage.py runserver &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0:8000 --noreload
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;runserver&lt;/code&gt;: Django に同梱されている軽量の Web サーバー&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;開発時 (基本は DEBUG = True) のみに使われることを想定した WebServer&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;本番環境では絶対使わない&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;自動リロード機能&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;静的ファイルの自動配信機能&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;IPアドレスとポート番号を省略すると &lt;code class="docutils literal"&gt;127.0.0.1:8000&lt;/code&gt; で起動する&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Docker 上で runserver =&amp;gt; ホストOSのブラウザから &lt;code class="docutils literal"&gt;127.0.0.1:8000&lt;/code&gt; に接続できないときは、 &lt;code class="docutils literal"&gt;0.0.0.0:8000&lt;/code&gt; で起動してみる&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id9"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id23"&gt;インタラクティブモードで実行する&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_0cc3595e75b543fe9cecda95ab11846d-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# こうとか&lt;/span&gt;
&lt;a name="rest_code_0cc3595e75b543fe9cecda95ab11846d-2"&gt;&lt;/a&gt;$ python manage.py shell
&lt;a name="rest_code_0cc3595e75b543fe9cecda95ab11846d-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# こうとか&lt;/span&gt;
&lt;a name="rest_code_0cc3595e75b543fe9cecda95ab11846d-4"&gt;&lt;/a&gt;$ &lt;span class="nv"&gt;DJANGO_SETTINGS_MODULE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;settings._ python manage.py shell
&lt;a name="rest_code_0cc3595e75b543fe9cecda95ab11846d-5"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# こう&lt;/span&gt;
&lt;a name="rest_code_0cc3595e75b543fe9cecda95ab11846d-6"&gt;&lt;/a&gt;$ python manage.py shell --settings&lt;span class="o"&gt;=&lt;/span&gt;settings._
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;Django のプロジェクト設定を読み込んだ REPL を起動してくれる&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="id10"&gt;
&lt;h4&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id24"&gt;使用例&lt;/a&gt;&lt;/h4&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_9106b1fea8824eb6b51f66dd89bf6e11-1"&gt;&lt;/a&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;python&lt;/span&gt; &lt;span class="n"&gt;manage&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt; &lt;span class="n"&gt;shell&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;
&lt;a name="rest_code_9106b1fea8824eb6b51f66dd89bf6e11-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;Python&lt;/span&gt; &lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;default&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Dec&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt; &lt;span class="mi"&gt;2017&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;45&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;38&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_9106b1fea8824eb6b51f66dd89bf6e11-3"&gt;&lt;/a&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;GCC&lt;/span&gt; &lt;span class="mf"&gt;4.4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="mi"&gt;20120313&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Red&lt;/span&gt; &lt;span class="n"&gt;Hat&lt;/span&gt; &lt;span class="mf"&gt;4.4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;linux2&lt;/span&gt;
&lt;a name="rest_code_9106b1fea8824eb6b51f66dd89bf6e11-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;"help"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"copyright"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"credits"&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;"license"&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;a name="rest_code_9106b1fea8824eb6b51f66dd89bf6e11-5"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InteractiveConsole&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_9106b1fea8824eb6b51f66dd89bf6e11-6"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;myapp.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Entry&lt;/span&gt;
&lt;a name="rest_code_9106b1fea8824eb6b51f66dd89bf6e11-7"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.db.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Q&lt;/span&gt;
&lt;a name="rest_code_9106b1fea8824eb6b51f66dd89bf6e11-8"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;target_entry_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;
&lt;a name="rest_code_9106b1fea8824eb6b51f66dd89bf6e11-9"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Entry&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_9106b1fea8824eb6b51f66dd89bf6e11-10"&gt;&lt;/a&gt;&lt;span class="o"&gt;...&lt;/span&gt;     &lt;span class="n"&gt;Q&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;expiration_year_month__gte&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;target_entry_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;
&lt;a name="rest_code_9106b1fea8824eb6b51f66dd89bf6e11-11"&gt;&lt;/a&gt;&lt;span class="o"&gt;...&lt;/span&gt;     &lt;span class="n"&gt;Q&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;expiration_year_month__isnull&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_9106b1fea8824eb6b51f66dd89bf6e11-12"&gt;&lt;/a&gt;&lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="django-dbdb"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id25"&gt;Django の DBシェルでローカルDBにつなぐ&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code console"&gt;&lt;a name="rest_code_d5d05ebc5a344748b895a11adbd325ee-1"&gt;&lt;/a&gt;&lt;span class="gp"&gt;$&lt;/span&gt; python manage.py dbshell --settings&lt;span class="o"&gt;=&lt;/span&gt;settings.local
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id11"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id26"&gt;静的ファイルを公開用ディレクトリに収集する&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_c66a006a3e914755aadf7dc53caa6280-1"&gt;&lt;/a&gt;$ python3 manage.py collectstatic
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;runserver には静的ファイル自動配置機能が備わっているので runserver 時には事前実行不要&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="system-check-framework-django"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id27"&gt;System check framework を使って、Django プロジェクトの一般的な問題を検査する&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/django-admin/#check"&gt;Django documentation &amp;gt; django-admin と manage.py &amp;gt; Available commands &amp;gt; check&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/checks/#system-check-framework"&gt;Django documentation &amp;gt; System check framework&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="python2"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/manage/#id28"&gt;使用例 (python2)&lt;/a&gt;&lt;/h3&gt;
&lt;blockquote&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_0879c90518fb4d209295f14bd9b1ec3a-1"&gt;&lt;/a&gt;$ &lt;span class="nv"&gt;DJANGO_SETTINGS_MODULE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;settings.local python -Wd manage.py check
&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.python.org/ja/2.7/using/cmdline.html#cmdoption-w"&gt;https://docs.python.org/ja/2.7/using/cmdline.html#cmdoption-w&lt;/a&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;Python 2.7 から、 DeprecationWarning とその子クラスはデフォルトで無視されます。 -Wd オプションを指定して有効にすることができます。&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>django</category><guid>https://32imuf.com/django/manage/</guid><pubDate>Fri, 04 Oct 2019 15:00:00 GMT</pubDate></item><item><title>Django: Form</title><link>https://32imuf.com/django/form/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#id2" id="id12"&gt;書籍/リファレンス&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#id3" id="id13"&gt;役割&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#id4" id="id14"&gt;入力フィールド&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#id5" id="id15"&gt;バリデーション&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#id6" id="id16"&gt;実行される順番&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#clean" id="id17"&gt;clean_&amp;lt;フィールド名&amp;gt;()&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#id7" id="id18"&gt;clean()&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#view" id="id19"&gt;View からの利用&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#template" id="id20"&gt;Template からの利用&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#csrf" id="id21"&gt;CSRF&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#modelform" id="id22"&gt;ModelForm&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#id8" id="id23"&gt;こんなときに利用価値が高い&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#modelform-field" id="id24"&gt;ModelForm の Field&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#modelform-p-94" id="id25"&gt;ModelForm のバリデーションが実行される順番 (P.94 の絵がとてもよい)&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#id9" id="id26"&gt;View からの利用&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#id10" id="id27"&gt;こんなのある&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/form/#id11" id="id28"&gt;インラインフォームセット&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id12"&gt;書籍/リファレンス&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/forms/api/"&gt;Django documentation &amp;gt; フォーム API&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://booth.pm/ja/items/1059917"&gt;現場で使える Django の教科書&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id13"&gt;役割&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;入力データの保持&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;バリデーション&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;OK の場合: &lt;code class="docutils literal"&gt;cleaned_data&lt;/code&gt; (辞書) に入る&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ユーザー入力データを Python 型へ変換してくれる&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;NG の場合: エラーメッセージ (list)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id4"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id14"&gt;入力フィールド&lt;/a&gt;&lt;/h2&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_08f9a9f618a043ab81d57a63af2feafc-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;
&lt;a name="rest_code_08f9a9f618a043ab81d57a63af2feafc-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_08f9a9f618a043ab81d57a63af2feafc-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LoginForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Form&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_08f9a9f618a043ab81d57a63af2feafc-4"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# この変数名が画面の入力フィールドの name 属性になる&lt;/span&gt;
&lt;a name="rest_code_08f9a9f618a043ab81d57a63af2feafc-5"&gt;&lt;/a&gt;    &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;  &lt;span class="c1"&gt;# django.forms.fields.Field クラスのサブクラスを指定&lt;/span&gt;
&lt;a name="rest_code_08f9a9f618a043ab81d57a63af2feafc-6"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# widget でどんな部品で画面に表示するか指定できる。 Field ごとにデフォルトもある。&lt;/span&gt;
&lt;a name="rest_code_08f9a9f618a043ab81d57a63af2feafc-7"&gt;&lt;/a&gt;        &lt;span class="n"&gt;widget&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PasswordInput&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;render_value&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_08f9a9f618a043ab81d57a63af2feafc-8"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# そのほかにも、いろいろ指定できる。指定できるものは Field により異なる。&lt;/span&gt;
&lt;a name="rest_code_08f9a9f618a043ab81d57a63af2feafc-9"&gt;&lt;/a&gt;        &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'パスワード'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_08f9a9f618a043ab81d57a63af2feafc-10"&gt;&lt;/a&gt;        &lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_08f9a9f618a043ab81d57a63af2feafc-11"&gt;&lt;/a&gt;    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id5"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id15"&gt;バリデーション&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id6"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id16"&gt;実行される順番&lt;/a&gt;&lt;/h3&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;Form.is_valid()&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;Form.フィールド&lt;/code&gt; に定義されたバリデーション&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;文字種チェックなど&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;フォームクラスに定義した順に実行される&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;Form.clean_&amp;lt;フィールド名&amp;gt;()&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;単項目。フィールド単体のバリデーション。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;妥当性チェック&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;フォームクラスに定義した順に実行される&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;Form.clean()&lt;/code&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;複数項目&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;相関チェック&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;データベースとの整合性チェック&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;バリデーション OK の場合、 &lt;code class="docutils literal"&gt;Form.cleaned_data&lt;/code&gt; に検証済みデータがセットされる&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;is_valid()&lt;/code&gt; 未実行の場合は &lt;code class="docutils literal"&gt;cleaned_data&lt;/code&gt; 属性自体が存在しない&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="clean"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id17"&gt;clean_&amp;lt;フィールド名&amp;gt;()&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LoginForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Form&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-4"&gt;&lt;/a&gt;    &lt;span class="n"&gt;username&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;UsernameField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-5"&gt;&lt;/a&gt;        &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'ユーザー名'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-6"&gt;&lt;/a&gt;        &lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-7"&gt;&lt;/a&gt;    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-8"&gt;&lt;/a&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-9"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# ``clean_&amp;lt;フィールド名&amp;gt;`` というメソッド名にする&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-10"&gt;&lt;/a&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;clean_username&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-11"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# 入力値は cleaned_data から取得する&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-12"&gt;&lt;/a&gt;        &lt;span class="n"&gt;username&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cleaned_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'username'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-13"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-14"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# バリデーション NG の場合&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-15"&gt;&lt;/a&gt;            &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ValidationError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-16"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;# ValidationError を raise すると Form 内部の変数にエラーメッセージを追加できる&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-17"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;# ValidationError には↓のように、メッセージを設定できる&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-18"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="si"&gt;%(min_length)s&lt;/span&gt;&lt;span class="s1"&gt; 文字以上で入力してください'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;params&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'min_length'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-19"&gt;&lt;/a&gt;            &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-20"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# バリデーションOK の場合は、 検証済み値を return することで cleaned_data に値を再セットできる&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-21"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# ``return 値`` しないと cleaned_data から値が消えてしまう!!&lt;/span&gt;
&lt;a name="rest_code_e6d4d45662ac45f890f43b55798de2fb-22"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;username&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id7"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id18"&gt;clean()&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;clean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-2"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# 入力値は cleaned_data から取得する&lt;/span&gt;
&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-3"&gt;&lt;/a&gt;    &lt;span class="n"&gt;username&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cleaned_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'username'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-4"&gt;&lt;/a&gt;    &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cleaned_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'password'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-6"&gt;&lt;/a&gt;    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-7"&gt;&lt;/a&gt;        &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;User&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-8"&gt;&lt;/a&gt;    &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;ObjectDoesNotExist&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-9"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# バリデーション NG の場合 `ValidationError` を raise することで&lt;/span&gt;
&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-10"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# エラーメッセージを Form 内部の変数に追加できる&lt;/span&gt;
&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-11"&gt;&lt;/a&gt;        &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ValidationError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"正しいユーザー名を入力してください"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-12"&gt;&lt;/a&gt;
&lt;a name="rest_code_f24407dd47eb4487b2171eb20f60fe5b-13"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# バリデーションOK の場合、 検証済み値を return する必要はない&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="view"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id19"&gt;View からの利用&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;リクエストオブジェクトから入力データを取得して型変換&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;入力データをバリデーション&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_8d1a4e654fcc483eaca5a4fb08636bfc-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# Form に request.POST をあげる&lt;/span&gt;
&lt;a name="rest_code_8d1a4e654fcc483eaca5a4fb08636bfc-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;form&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LoginForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;POST&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_8d1a4e654fcc483eaca5a4fb08636bfc-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# request から入力データを取り出して =&amp;gt; 型変換して =&amp;gt; バリデーションをする&lt;/span&gt;
&lt;a name="rest_code_8d1a4e654fcc483eaca5a4fb08636bfc-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;is_valid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_valid&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_8d1a4e654fcc483eaca5a4fb08636bfc-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_8d1a4e654fcc483eaca5a4fb08636bfc-6"&gt;&lt;/a&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;is_valid&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_8d1a4e654fcc483eaca5a4fb08636bfc-7"&gt;&lt;/a&gt;  &lt;span class="c1"&gt;# ヴァリデーションNGの場合、遷移元画面のテンプレートにフォームオブジェクトを 'form' という名前で渡している&lt;/span&gt;
&lt;a name="rest_code_8d1a4e654fcc483eaca5a4fb08636bfc-8"&gt;&lt;/a&gt;  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'account/login.html'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'form'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="template"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id20"&gt;Template からの利用&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;テンプレート内でフォームの入力データやエラーメッセージを表示する&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_5c1c696cb8e7408e8d9e2d3d334cb570-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# これだけで入力データがセットされた入力フィールドを全て出力できる&lt;/span&gt;
&lt;a name="rest_code_5c1c696cb8e7408e8d9e2d3d334cb570-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# * フィールドの出力順は、フォームクラスにフィールドを定義した順&lt;/span&gt;
&lt;a name="rest_code_5c1c696cb8e7408e8d9e2d3d334cb570-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# * 順番を変更したい =&amp;gt; Form に `field_order`&lt;/span&gt;
&lt;a name="rest_code_5c1c696cb8e7408e8d9e2d3d334cb570-4"&gt;&lt;/a&gt;&lt;span class="p"&gt;{{&lt;/span&gt;&lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="p"&gt;}}&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code python"&gt;&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-1"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="c1"&gt;# form オブジェクトをイテレートすると form に定義した fields が順番に取り出せるよ! #}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;form&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-3"&gt;&lt;/a&gt;  &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;div&lt;/span&gt; &lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"field"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-4"&gt;&lt;/a&gt;    &lt;span class="p"&gt;{{&lt;/span&gt; &lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="p"&gt;}}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-5"&gt;&lt;/a&gt;  &lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;div&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-6"&gt;&lt;/a&gt;  &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;field&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;errors&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-7"&gt;&lt;/a&gt;    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="c1"&gt;# field に関連する error messages は errors 属性にリスト形式で入っている #}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-8"&gt;&lt;/a&gt;    &lt;span class="p"&gt;{{&lt;/span&gt; &lt;span class="n"&gt;field&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;errors&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;}}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-9"&gt;&lt;/a&gt;  &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;endif&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-10"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;endfor&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-11"&gt;&lt;/a&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-12"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="c1"&gt;# 全体エラーメッセージ #}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-13"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="c1"&gt;# Form.clean() で追加したエラーメッセージは、 form オブジェクトの non_field_errors 属性にリストで入っている #}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-14"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;non_field_errors&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-15"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;div&lt;/span&gt; &lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"ui red message"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-16"&gt;&lt;/a&gt;  &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;ul&lt;/span&gt; &lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"list"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-17"&gt;&lt;/a&gt;    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;non_field_error&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;non_field_errors&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-18"&gt;&lt;/a&gt;      &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;li&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;{{&lt;/span&gt; &lt;span class="n"&gt;non_field_error&lt;/span&gt; &lt;span class="p"&gt;}}&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;li&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-19"&gt;&lt;/a&gt;    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;endfor&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-20"&gt;&lt;/a&gt;  &lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;ul&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-21"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;div&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_fec2234d0e1e4d7d84d37ccc5b2d4b63-22"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;endif&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="csrf"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id21"&gt;CSRF&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;シーサーフ、クロスサイトリクエストフォージェリーと呼ばれるセキュリティ攻撃の一種&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;POST リクエストに CSRF 対策のトークン &lt;code class="docutils literal"&gt;csrfmiddlewaretoken&lt;/code&gt; を加えられる&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_c83cf0467f2141be8033764877dae002-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# template の form 内にこれを書くよ&lt;/span&gt;
&lt;a name="rest_code_c83cf0467f2141be8033764877dae002-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;csrf_token&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="modelform"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id22"&gt;ModelForm&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id8"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id23"&gt;こんなときに利用価値が高い&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;モデルに定義したフィールドのうちのいくつかが画面の入力フィールドと合致する&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;モデルの登録や変更を伴う&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_7d019f3ea52242b5b2bb082508eec387-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;
&lt;a name="rest_code_7d019f3ea52242b5b2bb082508eec387-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.contrib.auth.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;User&lt;/span&gt;
&lt;a name="rest_code_7d019f3ea52242b5b2bb082508eec387-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_7d019f3ea52242b5b2bb082508eec387-4"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# django.forms.models.ModelForm を継承する&lt;/span&gt;
&lt;a name="rest_code_7d019f3ea52242b5b2bb082508eec387-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RegisterForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ModelForm&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_7d019f3ea52242b5b2bb082508eec387-6"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""ユーザー登録画面用のフォーム"""&lt;/span&gt;
&lt;a name="rest_code_7d019f3ea52242b5b2bb082508eec387-7"&gt;&lt;/a&gt;    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Meta&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_7d019f3ea52242b5b2bb082508eec387-8"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# 利用するモデルクラスを指定&lt;/span&gt;
&lt;a name="rest_code_7d019f3ea52242b5b2bb082508eec387-9"&gt;&lt;/a&gt;        &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;User&lt;/span&gt;
&lt;a name="rest_code_7d019f3ea52242b5b2bb082508eec387-10"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# 利用するモデルのフィールドを指定&lt;/span&gt;
&lt;a name="rest_code_7d019f3ea52242b5b2bb082508eec387-11"&gt;&lt;/a&gt;        &lt;span class="n"&gt;fields&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'username'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'email'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'password'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="modelform-field"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id24"&gt;ModelForm の Field&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ModelForm は、モデルの django.db.models.fields.Field のサブクラスを自動判別してそれに対応するフォームの django.forms.fields.Field のサブクラスに変換してくれる&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;対応表は P.92&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;変換されたフォームの Field をそのまま使えない場合は、いろいろカスタマイズできる。&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RegisterForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ModelForm&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-2"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""ユーザー登録画面用のフォーム"""&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-4"&gt;&lt;/a&gt;    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Meta&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-5"&gt;&lt;/a&gt;        &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;User&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-6"&gt;&lt;/a&gt;        &lt;span class="n"&gt;fields&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'username'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'email'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'password'&lt;/span&gt;&lt;span class="p"&gt;,)&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-7"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# widget を TextInput から PasswordInput に変更&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-8"&gt;&lt;/a&gt;        &lt;span class="n"&gt;widgets&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-9"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'password'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PasswordInput&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;attrs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'placeholder'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'パスワード'&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-10"&gt;&lt;/a&gt;        &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-11"&gt;&lt;/a&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-12"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# User モデルにはない「確認用パスワード」フィールドを追加&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-13"&gt;&lt;/a&gt;    &lt;span class="n"&gt;password2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-14"&gt;&lt;/a&gt;        &lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'確認用パスワード'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-15"&gt;&lt;/a&gt;        &lt;span class="n"&gt;required&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-16"&gt;&lt;/a&gt;        &lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-17"&gt;&lt;/a&gt;        &lt;span class="n"&gt;widgets&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PasswordInput&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;attrs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'placeholder'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'確認用パスワード'&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-18"&gt;&lt;/a&gt;    &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-19"&gt;&lt;/a&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-20"&gt;&lt;/a&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-21"&gt;&lt;/a&gt;        &lt;span class="nb"&gt;super&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RegisterForm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-22"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# プレースホルダーをつける&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-23"&gt;&lt;/a&gt;        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'username'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;widget&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;attrs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'placeholder'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'ユーザー名'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-24"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# email に必須を設定&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-25"&gt;&lt;/a&gt;        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'email'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;required&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-26"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# プレースホルダーをつける&lt;/span&gt;
&lt;a name="rest_code_3c9c834a315741c7aad9676b5265ccfd-27"&gt;&lt;/a&gt;        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'email'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;widget&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;attrs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'placeholder'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'メールアドレス'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="modelform-p-94"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id25"&gt;ModelForm のバリデーションが実行される順番 (P.94 の絵がとてもよい)&lt;/a&gt;&lt;/h3&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p&gt;フィールドのバリデーション&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;文字種などの形式チェック&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;フォームのバリデーション&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;値の妥当性チェック&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;clean_&amp;lt;フィールド名&amp;gt;()&lt;/span&gt;&lt;/code&gt; =&amp;gt; &lt;code class="docutils literal"&gt;clean()&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;モデルのバリデーション&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ユニーク制約などのデータベースとの整合性チェック&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;モデルの各フィールドに定義された &lt;code class="docutils literal"&gt;unique=True&lt;/code&gt; の制約にしたがって、レコードがユニークになっているか否かチェックしてくれる! ので、&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;モデルの登録変更を伴うフォームでは、親クラスの &lt;code class="docutils literal"&gt;clean()&lt;/code&gt; を明示的に呼び出すとよい&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_129d5fab74bf45f39ad79492f25e166a-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;clean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_129d5fab74bf45f39ad79492f25e166a-2"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# 明示的に親クラスの clean() を呼び出すことで、&lt;/span&gt;
&lt;a name="rest_code_129d5fab74bf45f39ad79492f25e166a-3"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Form を `_validate_unique = True` に更新する&lt;/span&gt;
&lt;a name="rest_code_129d5fab74bf45f39ad79492f25e166a-4"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# そうすると、 validate_unique() が実行されるようになる&lt;/span&gt;
&lt;a name="rest_code_129d5fab74bf45f39ad79492f25e166a-5"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;super&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RegisterForm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;clean&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_129d5fab74bf45f39ad79492f25e166a-6"&gt;&lt;/a&gt;    &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;changed_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'password'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_129d5fab74bf45f39ad79492f25e166a-7"&gt;&lt;/a&gt;    &lt;span class="n"&gt;password2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;changed_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'password2'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_129d5fab74bf45f39ad79492f25e166a-8"&gt;&lt;/a&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;password2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_129d5fab74bf45f39ad79492f25e166a-9"&gt;&lt;/a&gt;        &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;forms&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ValidationError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"パスワードと確認用パスワードが合致しません"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="id9"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id26"&gt;View からの利用&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;登録の場合&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_a9085cf3b29f4e24a67306c5e87922db-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# GET や POST オブジェクトをあげる&lt;/span&gt;
&lt;a name="rest_code_a9085cf3b29f4e24a67306c5e87922db-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;form&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RegisterForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;POST&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_a9085cf3b29f4e24a67306c5e87922db-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 対象のモデルをデータベースに保存&lt;/span&gt;
&lt;a name="rest_code_a9085cf3b29f4e24a67306c5e87922db-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;request からもらったものだけでは足りない場合&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_13bc90a29ce74e9889ba2cf819bd5dc0-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# モデルにセットするけれど、データベースには登録していない&lt;/span&gt;
&lt;a name="rest_code_13bc90a29ce74e9889ba2cf819bd5dc0-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;commit&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_13bc90a29ce74e9889ba2cf819bd5dc0-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 補完してあげる&lt;/span&gt;
&lt;a name="rest_code_13bc90a29ce74e9889ba2cf819bd5dc0-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_password&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cleaned_data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'password'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_13bc90a29ce74e9889ba2cf819bd5dc0-5"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# データベースに登録する&lt;/span&gt;
&lt;a name="rest_code_13bc90a29ce74e9889ba2cf819bd5dc0-6"&gt;&lt;/a&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;更新の場合&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_f93b4b11270a4c0fa712e66ef703e948-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 更新したい model オブジェクトを DB から取得&lt;/span&gt;
&lt;a name="rest_code_f93b4b11270a4c0fa712e66ef703e948-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;User&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pk&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_f93b4b11270a4c0fa712e66ef703e948-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# `instance` キーワード引数にあげる&lt;/span&gt;
&lt;a name="rest_code_f93b4b11270a4c0fa712e66ef703e948-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;form&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ProfileForm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;POST&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;instance&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_f93b4b11270a4c0fa712e66ef703e948-5"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# 更新前のデータをベースにして request で上書きしてくれる&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id10"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id27"&gt;こんなのある&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id11"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/form/#id28"&gt;インラインフォームセット&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;使い方はよくわかっていない&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/forms/modelforms/#inline-formsets"&gt;https://docs.djangoproject.com/ja/2.2/topics/forms/modelforms/#inline-formsets&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/forms/models/#inlineformset-factory"&gt;https://docs.djangoproject.com/ja/2.2/ref/forms/models/#inlineformset-factory&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>django</category><guid>https://32imuf.com/django/form/</guid><pubDate>Sat, 13 Jul 2019 15:00:00 GMT</pubDate></item><item><title>Django なんでもメモ</title><link>https://32imuf.com/django/note/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#django" id="id11"&gt;Djangoで静的ファイルとうまくやる&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#time-zones" id="id12"&gt;Time zones&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#id2" id="id13"&gt;リファレンス&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#id3" id="id14"&gt;タイムゾーンサポート&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#naive-aware" id="id15"&gt;naive と aware&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#id4" id="id16"&gt;タイムゾーンサポートが有効なときの Django の日時の取り扱い方&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#id5" id="id17"&gt;現在日時の取得&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#id6" id="id18"&gt;デフォルトタイムゾーンとカレントタイムゾーン&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#naive-django" id="id19"&gt;naive な日時をデータベースに保存しようとすると、Django は警告を出す&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#s3" id="id20"&gt;S3 アップロード&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#id7" id="id21"&gt;マイグレーションを間違えたときのリカバリ方法&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#id8" id="id22"&gt;こんなのある&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#multivaluedict" id="id23"&gt;MultiValueDict&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#querydict" id="id24"&gt;QueryDict オブジェクト&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/note/#id10" id="id25"&gt;便利さん&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="django"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id11"&gt;Djangoで静的ファイルとうまくやる&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;tell-k さんの Django Con での発表&lt;/p&gt;
&lt;p&gt;すごく良かった&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://tell-k.github.io/djangocongressjp2019/#1"&gt;https://tell-k.github.io/djangocongressjp2019/#1&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="time-zones"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id12"&gt;Time zones&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="id2"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id13"&gt;リファレンス&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/i18n/timezones/"&gt;https://docs.djangoproject.com/ja/2.2/topics/i18n/timezones/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/utils/#module-django.utils.timezone"&gt;https://docs.djangoproject.com/ja/2.2/ref/utils/#module-django.utils.timezone&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id14"&gt;タイムゾーンサポート&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;settings.py&lt;/code&gt; で設定する&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;USE_TZ = True&lt;/code&gt;: タイムゾーンサポートが有効&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;USE_TZ = False&lt;/code&gt;: タイムゾーンサポートが無効 (default)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;django-admin&lt;/span&gt; startproject&lt;/code&gt; によって生成されるデフォルトの &lt;code class="docutils literal"&gt;settings.py&lt;/code&gt; ファイル は、 &lt;code class="docutils literal"&gt;USE_TZ = True&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;タイムゾーンのサポートは &lt;code class="docutils literal"&gt;pytz&lt;/code&gt; を使用する。Django をインストールしたときに一緒にインストールされている。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="naive-aware"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id15"&gt;naive と aware&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;aware: タイムゾーンあり&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Python の &lt;code class="docutils literal"&gt;datetime.datetime&lt;/code&gt; のオブジェクトには、タイムゾーン情報を保持するために使える tzinfo 属性があり、これは &lt;code class="docutils literal"&gt;datetime.tzinfo&lt;/code&gt; のサブクラスのインスタンスで表されます。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;この属性がセットされオフセットを示すとき、datetime オブジェクトは aware となります。それ以外の場合は naive となります。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;naive: タイムゾーンなし&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id4"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id16"&gt;タイムゾーンサポートが有効なときの Django の日時の取り扱い方&lt;/a&gt;&lt;/h3&gt;
&lt;dl class="field-list simple"&gt;
&lt;dt&gt;データベース&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;内部的に aware なタイムゾーンオブジェクトを使用して、 UTC で保持&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;フォーム&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;入力された日時をカレントタイムゾーンで変換し、 cleaned_data 内で aware な datetime オブジェクトを返す&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;テンプレート&lt;/dt&gt;
&lt;dd&gt;&lt;p&gt;レンダリングする際に aware な datetime オブジェクトをカレントタイムゾーンに変換する&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/div&gt;
&lt;div class="section" id="id5"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id17"&gt;現在日時の取得&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;タイムゾーンサポートが有効&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# USE_TZ = True&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# TIME_ZONE = 'Asia/Tokyo'&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-4"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.utils&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;timezone&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-5"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-6"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pytz&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-8"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-9"&gt;&lt;/a&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;903697&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;UTC&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-10"&gt;&lt;/a&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-11"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-12"&gt;&lt;/a&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;41&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;152275&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-13"&gt;&lt;/a&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-14"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;make_aware&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-15"&gt;&lt;/a&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;56&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;39144&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;DstTzInfo&lt;/span&gt; &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt; &lt;span class="n"&gt;JST&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;00&lt;/span&gt; &lt;span class="n"&gt;STD&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-16"&gt;&lt;/a&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-17"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;localtime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-18"&gt;&lt;/a&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;36991&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;DstTzInfo&lt;/span&gt; &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt; &lt;span class="n"&gt;JST&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;00&lt;/span&gt; &lt;span class="n"&gt;STD&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-19"&gt;&lt;/a&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-20"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tz&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_4d33547788404fa48da4e52e4b321802-21"&gt;&lt;/a&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;258210&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;DstTzInfo&lt;/span&gt; &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt; &lt;span class="n"&gt;JST&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;00&lt;/span&gt; &lt;span class="n"&gt;STD&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;タイムゾーンサポートが無効&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# USE_TZ = False&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-3"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.utils&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;timezone&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-4"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-5"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-6"&gt;&lt;/a&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-7"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-8"&gt;&lt;/a&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;28&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;147660&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-9"&gt;&lt;/a&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-10"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-11"&gt;&lt;/a&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;28&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;41&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;569008&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-12"&gt;&lt;/a&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-13"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;make_aware&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-14"&gt;&lt;/a&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;28&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;54&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;973598&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;DstTzInfo&lt;/span&gt; &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt; &lt;span class="n"&gt;JST&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;00&lt;/span&gt; &lt;span class="n"&gt;STD&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-15"&gt;&lt;/a&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-16"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;localtime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-17"&gt;&lt;/a&gt;&lt;span class="n"&gt;Traceback&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;most&lt;/span&gt; &lt;span class="n"&gt;recent&lt;/span&gt; &lt;span class="n"&gt;call&lt;/span&gt; &lt;span class="n"&gt;last&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-18"&gt;&lt;/a&gt;  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;"&amp;lt;console&amp;gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-19"&gt;&lt;/a&gt;  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;"/var/www/usonar/.tox/py37/lib/python3.7/site-packages/django/utils/timezone.py"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;207&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;localtime&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-20"&gt;&lt;/a&gt;    &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="ne"&gt;ValueError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"localtime() cannot be applied to a naive datetime"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-21"&gt;&lt;/a&gt;&lt;span class="ne"&gt;ValueError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;localtime&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;cannot&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;applied&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;naive&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-22"&gt;&lt;/a&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-23"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tz&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timezone&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_3ed5fb8a769a47b38b0692dc56548d4c-24"&gt;&lt;/a&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;29&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;566142&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tzinfo&lt;/span&gt;&lt;span class="o"&gt;=&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;DstTzInfo&lt;/span&gt; &lt;span class="s1"&gt;'Asia/Tokyo'&lt;/span&gt; &lt;span class="n"&gt;JST&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;00&lt;/span&gt; &lt;span class="n"&gt;STD&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id6"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id18"&gt;デフォルトタイムゾーンとカレントタイムゾーン&lt;/a&gt;&lt;/h3&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;デフォルトタイムゾーン: &lt;code class="docutils literal"&gt;settings.TIME_ZONE&lt;/code&gt; に定義されたタイムゾーン&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;カレントタイムゾーン: レンダリングに使われるタイムゾーン&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="naive-django"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id19"&gt;naive な日時をデータベースに保存しようとすると、Django は警告を出す&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_e8312027ad794b2f9ff569023bdbf84f-1"&gt;&lt;/a&gt;&lt;span class="ne"&gt;RuntimeWarning&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;DateTimeField&lt;/span&gt; &lt;span class="n"&gt;ModelName&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;field_name&lt;/span&gt; &lt;span class="n"&gt;received&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;naive&lt;/span&gt;
&lt;a name="rest_code_e8312027ad794b2f9ff569023bdbf84f-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;datetime&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2012&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mo"&gt;01&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mo"&gt;01&lt;/span&gt; &lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mo"&gt;00&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="n"&gt;zone&lt;/span&gt; &lt;span class="n"&gt;support&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="n"&gt;active&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="s3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id20"&gt;S3 アップロード&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;体感だけど、パターン1 のほうが速いような感じがした&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_ae5c8627f9014eafb6c382b42cc29305-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# settings.py&lt;/span&gt;
&lt;a name="rest_code_ae5c8627f9014eafb6c382b42cc29305-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;DEFAULT_FILE_STORAGE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'storages.backends.s3boto3.S3Boto3Storage'&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code python"&gt;&lt;a name="rest_code_e6824a8a1fff471fa04f5c9ba056b43c-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# upload.py&lt;/span&gt;
&lt;a name="rest_code_e6824a8a1fff471fa04f5c9ba056b43c-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.core.files.base&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;ContentFile&lt;/span&gt;
&lt;a name="rest_code_e6824a8a1fff471fa04f5c9ba056b43c-3"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.core.files.storage&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;default_storage&lt;/span&gt;
&lt;a name="rest_code_e6824a8a1fff471fa04f5c9ba056b43c-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_e6824a8a1fff471fa04f5c9ba056b43c-5"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# パターン1&lt;/span&gt;
&lt;a name="rest_code_e6824a8a1fff471fa04f5c9ba056b43c-6"&gt;&lt;/a&gt;&lt;span class="n"&gt;file_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;default_storage&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ContentFile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_data&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_e6824a8a1fff471fa04f5c9ba056b43c-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_e6824a8a1fff471fa04f5c9ba056b43c-8"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# パターン2&lt;/span&gt;
&lt;a name="rest_code_e6824a8a1fff471fa04f5c9ba056b43c-9"&gt;&lt;/a&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;default_storage&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'w'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_e6824a8a1fff471fa04f5c9ba056b43c-10"&gt;&lt;/a&gt;    &lt;span class="n"&gt;file_size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html"&gt;https://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/en/2.2/ref/files/storage/#the-storage-class"&gt;https://docs.djangoproject.com/en/2.2/ref/files/storage/#the-storage-class&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/en/2.2/topics/files/#storage-objects"&gt;https://docs.djangoproject.com/en/2.2/topics/files/#storage-objects&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id7"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id21"&gt;マイグレーションを間違えたときのリカバリ方法&lt;/a&gt;&lt;/h2&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p&gt;DjangoのDBシェルでローカルDBにつなぐ&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code console"&gt;&lt;a name="rest_code_9ca1eb97c2ab428b9adb6522083c2f78-1"&gt;&lt;/a&gt;&lt;span class="gp"&gt;$&lt;/span&gt; python manage.py dbshell --settings&lt;span class="o"&gt;=&lt;/span&gt;settings.local
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;django_migrations テーブルから該当アプリのレコードを削除する&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_22bc1ec38c774cd39ba22ffec61ca234-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;django_migrations&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="k"&gt;like&lt;/span&gt; &lt;span class="s1"&gt;'%{application_name}%'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_22bc1ec38c774cd39ba22ffec61ca234-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;DELETE&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;django_migrations&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;{該当の&lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;該当テーブルやカラムも DROP する&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_c0233744d9af4b1291a0c2ab761c9d85-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;DROP&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="k"&gt;table_name&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_c0233744d9af4b1291a0c2ab761c9d85-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;ALTER&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="k"&gt;table_name&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt; &lt;span class="k"&gt;DROP&lt;/span&gt; &lt;span class="k"&gt;COLUMN&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="k"&gt;column_name&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;該当のマイグレーションファイルも削除しておく&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;もう一回最初からマイグレーションする&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre class="code console"&gt;&lt;a name="rest_code_7f66a546787e4f3fb551243f4f64fe35-1"&gt;&lt;/a&gt;&lt;span class="gp"&gt;$&lt;/span&gt; python manage.py makemigrations &lt;span class="o"&gt;{&lt;/span&gt;application_name&lt;span class="o"&gt;}&lt;/span&gt; --settings&lt;span class="o"&gt;=&lt;/span&gt;settings.local
&lt;a name="rest_code_7f66a546787e4f3fb551243f4f64fe35-2"&gt;&lt;/a&gt;&lt;span class="gp"&gt;$&lt;/span&gt; python manage.py migrate &lt;span class="o"&gt;{&lt;/span&gt;application_name&lt;span class="o"&gt;}&lt;/span&gt; --settings&lt;span class="o"&gt;=&lt;/span&gt;settings.local
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="id8"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id22"&gt;こんなのある&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="multivaluedict"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id23"&gt;MultiValueDict&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;なにがうれしいのかさっぱりわからない =&amp;gt; &lt;cite&gt;MultiValueDict を継承してる QueryDict とか見るとユースケースはなんとなく想像つくと思います&lt;/cite&gt; と教えて頂いた。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.1/_modules/django/utils/datastructures/"&gt;https://docs.djangoproject.com/ja/2.1/_modules/django/utils/datastructures/&lt;/a&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;A subclass of dictionary customized to handle multiple values for the same key.&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;よく見たら、こういうところが便利だと思った ↓&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_e96c9a2e17744246bd620b6267df8eba-1"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.utils.datastructures&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;MultiValueDict&lt;/span&gt;
&lt;a name="rest_code_e96c9a2e17744246bd620b6267df8eba-2"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;MultiValueDict&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s1"&gt;'name'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'Adrian'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'Simon'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s1"&gt;'position'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'Developer'&lt;/span&gt;&lt;span class="p"&gt;]})&lt;/span&gt;
&lt;a name="rest_code_e96c9a2e17744246bd620b6267df8eba-3"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s1"&gt;'name'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'Momo'&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;a name="rest_code_e96c9a2e17744246bd620b6267df8eba-4"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;
&lt;a name="rest_code_e96c9a2e17744246bd620b6267df8eba-5"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;MultiValueDict&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'position'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'Developer'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s1"&gt;'name'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'Adrian'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'Simon'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'Momo'&lt;/span&gt;&lt;span class="p"&gt;]}&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_e96c9a2e17744246bd620b6267df8eba-6"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;dd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'name'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'Adrian'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'Simon'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s1"&gt;'position'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'Developer'&lt;/span&gt;&lt;span class="p"&gt;]}&lt;/span&gt;
&lt;a name="rest_code_e96c9a2e17744246bd620b6267df8eba-7"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;dd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s1"&gt;'name'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'Momo'&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;a name="rest_code_e96c9a2e17744246bd620b6267df8eba-8"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;dd&lt;/span&gt;
&lt;a name="rest_code_e96c9a2e17744246bd620b6267df8eba-9"&gt;&lt;/a&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'position'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'Developer'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s1"&gt;'name'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'Momo'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="querydict"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id24"&gt;QueryDict オブジェクト&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;cite&gt;In an HttpRequest object, the GET and POST attributes are instances of django.http.QueryDict&lt;/cite&gt; だそうです。&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.1/ref/request-response/#querydict-objects"&gt;QueryDict オブジェクト&lt;/a&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;In an HttpRequest object, the GET and POST attributes are instances of django.http.QueryDict, a dictionary-like class customized to deal with multiple values for the same key. This is necessary because some HTML form elements, notably &amp;lt;select multiple&amp;gt;, pass multiple values for the same key.&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id10"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/note/#id25"&gt;便利さん&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;django に便利コマンド追加してくれるさん &lt;a class="reference external" href="https://django-extensions.readthedocs.io/en/latest/"&gt;django-extensions&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://djangopackages.org/"&gt;https://djangopackages.org/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://django.awesome-programming.com/"&gt;https://django.awesome-programming.com/&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;django-allauth: 認証系機能の拡充&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;メールアドレスベースのログイン&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ログインまわり&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Google, Twitter, GitHub などのソーシャルアカウントを利用したサードパーティ認証機能&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;django-tables2: テーブル表示とページネーション&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;django-environ&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;django-debug-toolbar: GUI によるデバッグ&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>django</category><guid>https://32imuf.com/django/note/</guid><pubDate>Mon, 17 Jun 2019 15:00:00 GMT</pubDate></item><item><title>Django: Test</title><link>https://32imuf.com/django/test/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/test/#requestfactory" id="id2"&gt;RequestFactory&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="requestfactory"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/test/#id2"&gt;RequestFactory&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/en/2.2/topics/testing/advanced/#django.test.RequestFactory"&gt;Django documentation &amp;gt; Advanced testing topics &amp;gt; RequestFactory&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>django</category><guid>https://32imuf.com/django/test/</guid><pubDate>Mon, 20 May 2019 15:00:00 GMT</pubDate></item><item><title>Django: Template</title><link>https://32imuf.com/django/template/</link><dc:creator>fumi23</dc:creator><description>&lt;div&gt;&lt;details&gt;
  &lt;summary&gt;目次&lt;/summary&gt;&lt;div class="contents topic" id="id1"&gt;
&lt;p class="topic-title first"&gt;目次&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id2" id="id22"&gt;リファレンス/書籍&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id4" id="id23"&gt;なるほどめも&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id5" id="id24"&gt;変数表示&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id6" id="id25"&gt;フィルタ&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id7" id="id26"&gt;デフォルト表示&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id8" id="id27"&gt;文字列長を表示&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id9" id="id28"&gt;エスケープの無効化&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id10" id="id29"&gt;日時フォーマット&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id11" id="id30"&gt;改行タグの変換&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id12" id="id31"&gt;リンク変換&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id13" id="id32"&gt;文字の切り詰め&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id14" id="id33"&gt;テンプレートタグ&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#if" id="id34"&gt;if&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#for" id="id35"&gt;for&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id15" id="id36"&gt;テンプレートの継承&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id16" id="id37"&gt;外部テンプレートの読み込み&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#url" id="id38"&gt;静的ファイルの配信 URL 取得&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id17" id="id39"&gt;url&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id18" id="id40"&gt;自動エスケープ制御&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id19" id="id41"&gt;ベーステンプレートを用意しよう&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://32imuf.com/django/template/#id20" id="id42"&gt;独自のテンプレートタグとフィルタ&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/details&gt;&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id22"&gt;リファレンス/書籍&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/topics/templates/"&gt;Django documentation &amp;gt; テンプレート&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/ref/templates/builtins/"&gt;Django documentation &amp;gt; 組み込みタグとフィルタ&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://www.amazon.co.jp/dp/B07GK7BWB7/"&gt;現場で使える Django の教科書&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id4"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id23"&gt;なるほどめも&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;変数定義できない&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Python モジュールを直接 import して使うことはできない&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;独自の関数を使うにはテンプレートタグやフィルタを自作する&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;フィルター: 変数の内容を表示する際の表示形式を変更する&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id5"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id24"&gt;変数表示&lt;/a&gt;&lt;/h2&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_7ab1d0ec5ab9469b8b670c0ee5884ca3-1"&gt;&lt;/a&gt;&lt;span class="c"&gt;{# __str__() の結果を表示してくれる #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_7ab1d0ec5ab9469b8b670c0ee5884ca3-2"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;user&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_7ab1d0ec5ab9469b8b670c0ee5884ca3-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_7ab1d0ec5ab9469b8b670c0ee5884ca3-4"&gt;&lt;/a&gt;&lt;span class="c"&gt;{# このように書くと #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_7ab1d0ec5ab9469b8b670c0ee5884ca3-5"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;user.username&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_7ab1d0ec5ab9469b8b670c0ee5884ca3-6"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;comment&lt;/span&gt; &lt;span class="s2"&gt;"以下の順番に値を取得しようとして、一番先に取得できた値を表示してくれる"&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_7ab1d0ec5ab9469b8b670c0ee5884ca3-7"&gt;&lt;/a&gt;&lt;span class="x"&gt;  user['username']  # 1. 辞書としての照合&lt;/span&gt;
&lt;a name="rest_code_7ab1d0ec5ab9469b8b670c0ee5884ca3-8"&gt;&lt;/a&gt;&lt;span class="x"&gt;  user.username     # 2. 属性値の照合&lt;/span&gt;
&lt;a name="rest_code_7ab1d0ec5ab9469b8b670c0ee5884ca3-9"&gt;&lt;/a&gt;&lt;span class="x"&gt;  user.username()   # 3. メソッド呼び出し&lt;/span&gt;
&lt;a name="rest_code_7ab1d0ec5ab9469b8b670c0ee5884ca3-10"&gt;&lt;/a&gt;&lt;span class="x"&gt;  user[username]    # 4. リストやタプルの添字指定&lt;/span&gt;
&lt;a name="rest_code_7ab1d0ec5ab9469b8b670c0ee5884ca3-11"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endcomment&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;テンプレートには「コンテキスト」と呼ばれる変数と値がマッピングされたオブジェクトが渡される&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;コンテキストに含まれるもの&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ビューから渡された変数&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;settings.py&lt;/code&gt; の &lt;code class="docutils literal"&gt;TEMPLATES.OPTIONS.context_processors&lt;/code&gt; に定義された関数でセットされた変数&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;request&lt;/code&gt;: リクエストオブジェクト&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;user&lt;/code&gt;: ユーザー&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;perms&lt;/code&gt;: ユーザーのパーミッション&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;messages&lt;/code&gt;: フラッシュメッセージ&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;e.t.c...&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;何もしなくも XSS 対策として &lt;code class="docutils literal"&gt;&amp;lt;&lt;/code&gt;, &lt;code class="docutils literal"&gt;&amp;gt;&lt;/code&gt;, &lt;code class="docutils literal"&gt;'&lt;/code&gt;, &lt;code class="docutils literal"&gt;"&lt;/code&gt;, &lt;code class="docutils literal"&gt;&amp;amp;&lt;/code&gt; を自動でエスケープしてくれる&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id6"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id25"&gt;フィルタ&lt;/a&gt;&lt;/h2&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_6fc3e5206be14223bf4cd2246e7a1643-1"&gt;&lt;/a&gt;&lt;span class="c"&gt;{# 変数名の直後に ``|`` (パイプ) を使って繋げる #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_6fc3e5206be14223bf4cd2246e7a1643-2"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="err"&gt;変数名&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;|&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="err"&gt;フィルタ名&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_6fc3e5206be14223bf4cd2246e7a1643-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_6fc3e5206be14223bf4cd2246e7a1643-4"&gt;&lt;/a&gt;&lt;span class="c"&gt;{# フィルタによっては引数もとれる、 ``:`` で繋げる #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_6fc3e5206be14223bf4cd2246e7a1643-5"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="err"&gt;変数名&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;|&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="err"&gt;フィルタ名&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;:"&amp;lt;引数&amp;gt;"&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_6fc3e5206be14223bf4cd2246e7a1643-6"&gt;&lt;/a&gt;
&lt;a name="rest_code_6fc3e5206be14223bf4cd2246e7a1643-7"&gt;&lt;/a&gt;&lt;span class="c"&gt;{# フィルタは ``|`` で連結できる #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_6fc3e5206be14223bf4cd2246e7a1643-8"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="err"&gt;変数名&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;|&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="err"&gt;フィルタ名&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;:"&amp;lt;引数&amp;gt;"&lt;/span&gt;&lt;span class="err"&gt;|&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="err"&gt;フィルタ名&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;:"&amp;lt;引数&amp;gt;"&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;div class="section" id="id7"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id26"&gt;デフォルト表示&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_292704551c944601add8af126ffc6717-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;user.first_name&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="nf"&gt;default&lt;/span&gt;&lt;span class="s2"&gt;:""&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt; &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;user.first_name&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="nf"&gt;default&lt;/span&gt;&lt;span class="s2"&gt;:""&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;変数が存在しない場合、あるいは変数の値が &lt;code class="docutils literal"&gt;None&lt;/code&gt;, &lt;code class="docutils literal"&gt;''&lt;/code&gt;, &lt;code class="docutils literal"&gt;0&lt;/code&gt;, &lt;code class="docutils literal"&gt;False&lt;/code&gt;, &lt;code class="docutils literal"&gt;[]&lt;/code&gt; などの場合に指定した文字列を表示する&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id8"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id27"&gt;文字列長を表示&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_6f8b4a544f314d1caff33d4cd7b755ea-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;user.username&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="nf"&gt;length&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id9"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id28"&gt;エスケープの無効化&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_b2fb1ea31fb443b3904c736fdc71f4bd-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;book.description&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="nf"&gt;safe&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;XSS 対策として自動でエスケープしてくれる &lt;code class="docutils literal"&gt;&amp;lt;&lt;/code&gt;, &lt;code class="docutils literal"&gt;&amp;gt;&lt;/code&gt;, &lt;code class="docutils literal"&gt;'&lt;/code&gt;, &lt;code class="docutils literal"&gt;"&lt;/code&gt;, &lt;code class="docutils literal"&gt;&amp;amp;&lt;/code&gt; をエスケープしない&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;変数の内容が安全だとわかっている場合のみ利用すること&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id10"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id29"&gt;日時フォーマット&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_893ab3b88e834f648291882d9f306fed-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;user.last_login&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="nf"&gt;date&lt;/span&gt;&lt;span class="s2"&gt;:"Y-m-d H:i:s"&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id11"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id30"&gt;改行タグの変換&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_5a562a526e5c422db09c3521d33b5131-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;book.description&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="nf"&gt;linebreaksbr&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;\n&lt;/code&gt; を &lt;code class="docutils literal"&gt;&amp;lt;br&amp;gt;&lt;/code&gt; に変換してくれる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;便利だな...&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id12"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id31"&gt;リンク変換&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_fe339c11529f44208555cd3e3af3ea1c-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;book.description&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="nf"&gt;urlize&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;URL と メールアドレスの部分だけをアンカータグで囲んでクリック可能なリンクに変換してくれる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;しゅごいな...&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id13"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id32"&gt;文字の切り詰め&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_8a3039d5901f4d42a27f93d8008bb458-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;book.description&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="nf"&gt;truncatechars_html&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;指定した文字数まで切り詰めて &lt;code class="docutils literal"&gt;...&lt;/code&gt; をくっつけてくれる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;HTML タグを考慮して省略後の文字にきちんと閉じタグをつけてくれる&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;うええ...&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id14"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id33"&gt;テンプレートタグ&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="if"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id34"&gt;if&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_460349dc04624cc485714a9a7ccbc397-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nv"&gt;user.is_superuser&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_460349dc04624cc485714a9a7ccbc397-2"&gt;&lt;/a&gt;&lt;span class="x"&gt;  システム管理者です。&lt;/span&gt;
&lt;a name="rest_code_460349dc04624cc485714a9a7ccbc397-3"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="nv"&gt;user.is_staff&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_460349dc04624cc485714a9a7ccbc397-4"&gt;&lt;/a&gt;&lt;span class="x"&gt;  スタッフです。&lt;/span&gt;
&lt;a name="rest_code_460349dc04624cc485714a9a7ccbc397-5"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_460349dc04624cc485714a9a7ccbc397-6"&gt;&lt;/a&gt;&lt;span class="x"&gt;  一般ユーザーだよ。&lt;/span&gt;
&lt;a name="rest_code_460349dc04624cc485714a9a7ccbc397-7"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endif&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code django"&gt;&lt;a name="rest_code_2eed8a3701234a7796ba505edc13150f-1"&gt;&lt;/a&gt;&lt;span class="c"&gt;{# フィルタと組み合わせることもできる #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_2eed8a3701234a7796ba505edc13150f-2"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nv"&gt;user.username&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="nf"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_2eed8a3701234a7796ba505edc13150f-3"&gt;&lt;/a&gt;&lt;span class="x"&gt;  ユーザー名が短かすぎます。&lt;/span&gt;
&lt;a name="rest_code_2eed8a3701234a7796ba505edc13150f-4"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt;  &lt;span class="k"&gt;endif&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="for"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id35"&gt;for&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;book&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nv"&gt;book_list&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-2"&gt;&lt;/a&gt;&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nv"&gt;book.title&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-4"&gt;&lt;/a&gt;&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="c"&gt;{# for ループ内で使える変数 #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-5"&gt;&lt;/a&gt;&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nb"&gt;forloop&lt;/span&gt;&lt;span class="nv"&gt;.counter&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;     &lt;/span&gt;&lt;span class="c"&gt;{# 現在のループカウンタ番号 ( 1 から順にカウント ) #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-6"&gt;&lt;/a&gt;&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nb"&gt;forloop&lt;/span&gt;&lt;span class="nv"&gt;.counter0&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;    &lt;/span&gt;&lt;span class="c"&gt;{# 現在のループカウンタ番号 ( 0 から順にカウント ) #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-7"&gt;&lt;/a&gt;&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nb"&gt;forloop&lt;/span&gt;&lt;span class="nv"&gt;.revcounter&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="c"&gt;{# 現在のループカウンタ値 ( 1 から順に、末尾からカウント) #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-8"&gt;&lt;/a&gt;&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nb"&gt;forloop&lt;/span&gt;&lt;span class="nv"&gt;.revcounter0&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt; &lt;/span&gt;&lt;span class="c"&gt;{# 現在のループカウンタ値 ( 0 から順に、末尾からカウント) #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-9"&gt;&lt;/a&gt;&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nb"&gt;forloop&lt;/span&gt;&lt;span class="nv"&gt;.first&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;       &lt;/span&gt;&lt;span class="c"&gt;{# 最初のループであれば True #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-10"&gt;&lt;/a&gt;&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nb"&gt;forloop&lt;/span&gt;&lt;span class="nv"&gt;.last&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;        &lt;/span&gt;&lt;span class="c"&gt;{# 最後のループであれば True #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-11"&gt;&lt;/a&gt;&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt; &lt;span class="nb"&gt;forloop&lt;/span&gt;&lt;span class="nv"&gt;.parentloop&lt;/span&gt; &lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="c"&gt;{# 入れ子のループであるとき、現在のループを囲んでいる 1 つ上のループを表します。 #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-12"&gt;&lt;/a&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-13"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt;  &lt;span class="k"&gt;empty&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-14"&gt;&lt;/a&gt;&lt;span class="x"&gt;  本ない&lt;/span&gt;
&lt;a name="rest_code_f9cf4f6b804a4c38aa09101440c5e8ec-15"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt;  &lt;span class="k"&gt;endfor&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id15"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id36"&gt;テンプレートの継承&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;親テンプレート &lt;code class="docutils literal"&gt;parent.html&lt;/code&gt;&lt;/p&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_1d4d724fa3ac461ebbfabee7a45c8044-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;sample&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;Hello &lt;/span&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endblock&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;子テンプレート &lt;code class="docutils literal"&gt;child.html&lt;/code&gt;&lt;/p&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_09385f58303d41c3ae996b49ee866845-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;extends&lt;/span&gt; &lt;span class="s2"&gt;"parent.html"&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_09385f58303d41c3ae996b49ee866845-2"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;block&lt;/span&gt; &lt;span class="nv"&gt;sample&lt;/span&gt; &lt;span class="cp"&gt;%}{{&lt;/span&gt; &lt;span class="nb"&gt;block&lt;/span&gt;&lt;span class="nv"&gt;.super&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="nv"&gt;World&lt;/span&gt;&lt;span class="err"&gt;!&lt;/span&gt; &lt;span class="o"&gt;{%&lt;/span&gt; &lt;span class="nv"&gt;endblock&lt;/span&gt; &lt;span class="o"&gt;%}&lt;/span&gt;
&lt;a name="rest_code_09385f58303d41c3ae996b49ee866845-3"&gt;&lt;/a&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nb"&gt;block&lt;/span&gt;&lt;span class="nv"&gt;.super&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="err"&gt;親テンプレートのブロック内部の値をそのまま保持した変数&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id16"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id37"&gt;外部テンプレートの読み込み&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_2720d7b09c69405eb0bf27b5a5b3635c-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;include&lt;/span&gt; &lt;span class="s2"&gt;"_message.html"&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;ヘッダーフッターなど部品化したテンプレートを別のテンプレートから読み込む場合など&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="url"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id38"&gt;静的ファイルの配信 URL 取得&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_3f2f93a3ef85488194b1c572e1fe38bf-1"&gt;&lt;/a&gt;&lt;span class="c"&gt;{# 利用する前に機能をロードしておく #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_3f2f93a3ef85488194b1c572e1fe38bf-2"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;load&lt;/span&gt; &lt;span class="nv"&gt;static&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_3f2f93a3ef85488194b1c572e1fe38bf-3"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="s2"&gt;"images/logo.png"&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_3f2f93a3ef85488194b1c572e1fe38bf-4"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="s2"&gt;"shop/images/no-image.png"&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;静的ファイルの配信 URL を取得するためのタグ&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Django デフォルトで使える組み込みタグではないのでロードが必要&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;extends&lt;/code&gt; している場合、継承元で &lt;code class="docutils literal"&gt;load&lt;/code&gt; していても自身のテンプレートでは有効にならないので、
つど &lt;code class="docutils literal"&gt;load&lt;/code&gt; する必要がある&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id17"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id39"&gt;url&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_b0be8a3728644693b2a9a4631b5ad150-1"&gt;&lt;/a&gt;&lt;span class="c"&gt;{# URL 逆引き #}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_b0be8a3728644693b2a9a4631b5ad150-2"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;url&lt;/span&gt; &lt;span class="s2"&gt;"index"&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_b0be8a3728644693b2a9a4631b5ad150-3"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;url&lt;/span&gt; &lt;span class="s2"&gt;"accounts:login"&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_b0be8a3728644693b2a9a4631b5ad150-4"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;url&lt;/span&gt; &lt;span class="s2"&gt;"shop:detail"&lt;/span&gt; &lt;span class="nv"&gt;book.id&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_b0be8a3728644693b2a9a4631b5ad150-5"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;url&lt;/span&gt; &lt;span class="s2"&gt;"shop:detail"&lt;/span&gt; &lt;span class="nv"&gt;book_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;book.id&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id18"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id40"&gt;自動エスケープ制御&lt;/a&gt;&lt;/h3&gt;
&lt;pre class="code django"&gt;&lt;a name="rest_code_a108886acead4946b3a324ce20178a79-1"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;autoescape&lt;/span&gt; &lt;span class="nv"&gt;off&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;a name="rest_code_a108886acead4946b3a324ce20178a79-2"&gt;&lt;/a&gt;&lt;span class="x"&gt;  自動エスケープがオフになる範囲&lt;/span&gt;
&lt;a name="rest_code_a108886acead4946b3a324ce20178a79-3"&gt;&lt;/a&gt;&lt;span class="cp"&gt;{%&lt;/span&gt; &lt;span class="k"&gt;endautoescape&lt;/span&gt; &lt;span class="cp"&gt;%}&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id19"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id41"&gt;ベーステンプレートを用意しよう&lt;/a&gt;&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;現場で使える Django の教科書《基礎編》 P.79 参照のこと&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;どのテンプレートにも書くような共通の内容は base.html テンプレートする&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id20"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://32imuf.com/django/template/#id42"&gt;独自のテンプレートタグとフィルタ&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;カスタムタグやカスタムフィルタをつくることができる。&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://docs.djangoproject.com/ja/2.2/howto/custom-template-tags/"&gt;Django documentation &amp;gt; 独自のテンプレートタグとフィルタ&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>django</category><guid>https://32imuf.com/django/template/</guid><pubDate>Sun, 05 May 2019 15:00:00 GMT</pubDate></item></channel></rss>