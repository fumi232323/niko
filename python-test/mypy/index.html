<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
<title>mypy/ふみのて</title>
<link rel="shortcut icon" href="../../assets/icons/favicon.ico">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Griffy">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Vollkorn:400,700">
<link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/sawarabimincho.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
<link rel="stylesheet" href="../../assets/css/style.css?20190602">
</head>
<body>
    <div class="container">
      <div class="header"><header class="item item-header"><h1>
    <a href="../../">
      <img class="logo" src="../../assets/images/inuu.png" alt="犬"></a>
  </h1>
  <nav class="nav"><ul>
<li class="nav-category"><a href="../../">HOME</a></li>
    </ul></nav><iframe src="../../tags/" class="tags-frame"></iframe>
</header></div>
      <div class="main">
<div class="article-content">
  <main class="item item-article item-test"><time class="date" datetime="2018-11-17 00:00:00+09:00">
      2018-11-17 Sat
    </time><div class="title">mypy</div>
    <div class="category">
      <a href="../../tags/test/">
          test
      </a>
    </div>
    <div class="text">
      <div>
<details><summary>目次</summary><div class="contents topic" id="id1">
<p class="topic-title first">目次</p>
<ul class="simple">
<li><a class="reference internal" href="#id2" id="id6">リファレンス</a></li>
<li><a class="reference internal" href="#type-hints" id="id7">Type hints 覚書き</a></li>
<li><a class="reference internal" href="#id3" id="id8">これ</a></li>
<li><a class="reference internal" href="#id4" id="id9">Type hints はどこに必要か、どこに書くべきか</a></li>
<li><a class="reference internal" href="#python3" id="id10">python3 ではこういうふうに書ける</a></li>
<li><a class="reference internal" href="#tips" id="id11">Tips</a></li>
<li><a class="reference internal" href="#id5" id="id12">情報</a></li>
</ul>
</div>
</details><div class="section" id="id2">
<h2><a class="toc-backref" href="#id6">リファレンス</a></h2>
<p><a class="reference external" href="https://mypy.readthedocs.io/en/latest/index.html">https://mypy.readthedocs.io/en/latest/index.html</a></p>
</div>
<div class="section" id="type-hints">
<h2><a class="toc-backref" href="#id7">Type hints 覚書き</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://mypy.readthedocs.io/en/latest/cheat_sheet_py3.html">Type hints cheat sheet (Python 3)</a></li>
<li><a class="reference external" href="https://mypy.readthedocs.io/en/latest/cheat_sheet.html">Type hints cheat sheet (Python 2)</a></li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name">
<col class="field-body">
<tbody valign="top">
<tr class="field"><th class="field-name" colspan="2">Union[int, str]:</th></tr>
<tr class="field">
<td> </td>
<td class="field-body">
<tt class="docutils literal">int</tt> or <tt class="docutils literal">str</tt> の意。とり得る型が全部わかっているなら、 <tt class="docutils literal">Any</tt> と書くより列記したほうがよい。</td>
</tr>
<tr class="field">
<th class="field-name">Optional[str]:</th>
<td class="field-body">
<tt class="docutils literal">str</tt> or <tt class="docutils literal">None</tt> の意</td>
</tr>
<tr class="field">
<th class="field-name">Any:</th>
<td class="field-body">なんでもいい</td>
</tr>
<tr class="field">
<th class="field-name">ignore:</th>
<td class="field-body">mypy エラーを抑止</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id8">これ</a></h2>
<ul class="simple">
<li><cite>Any は型チェックの敗北</cite></li>
<li><cite>ignore は敗北その2</cite></li>
<li>
<tt class="docutils literal">実行時にわかること</tt> は mypy にはわからない</li>
<li><cite>mypy が解釈できないなら人間にも読みにくい</cite></li>
</ul>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id9">Type hints はどこに必要か、どこに書くべきか</a></h2>
<ul class="simple">
<li>引数と戻り値</li>
<li>定数の初期化時 (空の場合のみ)</li>
<li>変数の初期化時</li>
<li>まわりのひとに、こうしてほしい (この型にしてほしい) って知らせたいとき</li>
<li>ついていたらありがたいと (自分が) 思うところ</li>
<li>どこという決まりはどうもないらしい (調べていて今のところ見つかっていない)</li>
<li>とりあえずのところ、 mypy に怒られるところにつけていけば、そのうちわかるようになると思う</li>
</ul>
</div>
<div class="section" id="python3">
<h2><a class="toc-backref" href="#id10">python3 ではこういうふうに書ける</a></h2>
<pre class="code python"><a name="rest_code_79799e7022f34d2b90c18a799aa79a3d-1"></a><span class="c1"># https://mypy.readthedocs.io/en/latest/cheat_sheet_py3.html</span>
<a name="rest_code_79799e7022f34d2b90c18a799aa79a3d-2"></a>
<a name="rest_code_79799e7022f34d2b90c18a799aa79a3d-3"></a><span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
<a name="rest_code_79799e7022f34d2b90c18a799aa79a3d-4"></a><span class="n">x</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a name="rest_code_79799e7022f34d2b90c18a799aa79a3d-5"></a>
<a name="rest_code_79799e7022f34d2b90c18a799aa79a3d-6"></a><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">num1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">my_float</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<a name="rest_code_79799e7022f34d2b90c18a799aa79a3d-7"></a>  <span class="k">return</span> <span class="n">num1</span> <span class="o">+</span> <span class="n">my_float</span>
</pre>
<ul class="simple">
<li>
<a class="reference external" href="https://docs.python.org/ja/3/library/typing.html">typing --- 型ヒントのサポート</a> ( <cite>バージョン 3.5 で追加</cite> と言っている)</li>
<li>python3 でも、type hints を書いたからと言って、言語側でチェックしてくれるわけではない。 <cite>static type checker</cite> と言っているのが、 <tt class="docutils literal">mypy</tt> とかのこと。</li>
</ul>
</div>
<div class="section" id="tips">
<h2><a class="toc-backref" href="#id11">Tips</a></h2>
<ul class="simple">
<li>PyCharm で、 <tt class="docutils literal">関数名やら定数やら変数やらを範囲選択</tt> -&gt; <tt class="docutils literal">Option + Enter</tt> で type hints を自動追加できる<ul>
<li>ガイド: <a class="reference external" href="https://pleiades.io/help/pycharm/type-hinting-in-product.html">PyCharmのヒント</a>
</li>
<li>いくつか試してみたけど、半々くらいの確率でちゃんとなる (期待どおりの type hints が追加できる)</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id5">
<h2><a class="toc-backref" href="#id12">情報</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://www.slideshare.net/t2y/python-typechecker-20180519">Python と型チェッカー</a></li>
<li><a class="reference external" href="http://mypy-lang.blogspot.com/2018/05/">Mypy 0.600 Released</a></li>
<li>
<a class="reference external" href="https://mypy.readthedocs.io/en/latest/getting_started.html">Mypy: Getting started</a><ul>
<li><a class="reference external" href="https://blog.zulip.org/2016/10/13/static-types-in-python-oh-mypy/">Static types in Python, oh my(py)!</a></li>
<li><a class="reference external" href="https://www.youtube.com/watch?v=pMgmKJyWKn8">Carl Meyer - Type-checked Python in the real world - PyCon 2018</a></li>
</ul>
</li>
<li><a class="reference external" href="https://www.python.org/dev/peps/pep-0484/">PEP 484 -- Type Hints</a></li>
</ul>
</div>
</div>
    </div>
  </main>
</div>
</div>
    </div>
  </body>
</html>
